{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"yiouejv \u7684\u535a\u5ba2\u8bb0\u5f55 Stay Hungry Stay Foolish. \u672c\u7535\u5b50\u4e66\u5236\u4f5c\u548c\u5199\u4f5c\u65b9\u5f0f \u4f7f\u7528 mkdocs \u548c markdown \u6784\u5efa\u3002 markdown \u8bed\u6cd5\u53c2\u8003\uff1ahttp://xianbai.me/learn-md/article/about/readme.html \u5b89\u88c5\u4f9d\u8d56\uff1a # \u65b9\u5f0f1\uff1a pip install mkdocs # \u5236\u4f5c\u7535\u5b50\u4e66, http://markdown-docs-zh.readthedocs.io/zh_CN/latest/ # https://stackoverflow.com/questions/27882261/mkdocs-and-mathjax/31874157 pip install https://github.com/mitya57/python-markdown-math/archive/master.zip # \u63a8\u8350\u65b9\u5f0f2\uff1a pip install -r requirements.txt \u7f16\u5199\u5e76\u67e5\u770b\uff1a mkdocs serve # \u4fee\u6539\u81ea\u52a8\u66f4\u65b0\uff0c\u6d4f\u89c8\u5668\u6253\u5f00 http://localhost:8000 \u8bbf\u95ee # \u6570\u5b66\u516c\u5f0f\u53c2\u8003 https://www.zybuluo.com/codeep/note/163962 mkdocs gh-deploy # \u90e8\u7f72\u5230\u81ea\u5df1\u7684 github pages, \u5982\u679c\u662f readthedocs \u4f1a\u81ea\u52a8\u89e6\u53d1\u6784\u5efa \u8bbf\u95ee:","title":"yiouejv \u7684\u535a\u5ba2\u8bb0\u5f55"},{"location":"#yiouejv","text":"Stay Hungry Stay Foolish.","title":"yiouejv \u7684\u535a\u5ba2\u8bb0\u5f55"},{"location":"#_1","text":"\u4f7f\u7528 mkdocs \u548c markdown \u6784\u5efa\u3002 markdown \u8bed\u6cd5\u53c2\u8003\uff1ahttp://xianbai.me/learn-md/article/about/readme.html \u5b89\u88c5\u4f9d\u8d56\uff1a # \u65b9\u5f0f1\uff1a pip install mkdocs # \u5236\u4f5c\u7535\u5b50\u4e66, http://markdown-docs-zh.readthedocs.io/zh_CN/latest/ # https://stackoverflow.com/questions/27882261/mkdocs-and-mathjax/31874157 pip install https://github.com/mitya57/python-markdown-math/archive/master.zip # \u63a8\u8350\u65b9\u5f0f2\uff1a pip install -r requirements.txt \u7f16\u5199\u5e76\u67e5\u770b\uff1a mkdocs serve # \u4fee\u6539\u81ea\u52a8\u66f4\u65b0\uff0c\u6d4f\u89c8\u5668\u6253\u5f00 http://localhost:8000 \u8bbf\u95ee # \u6570\u5b66\u516c\u5f0f\u53c2\u8003 https://www.zybuluo.com/codeep/note/163962 mkdocs gh-deploy # \u90e8\u7f72\u5230\u81ea\u5df1\u7684 github pages, \u5982\u679c\u662f readthedocs \u4f1a\u81ea\u52a8\u89e6\u53d1\u6784\u5efa","title":"\u672c\u7535\u5b50\u4e66\u5236\u4f5c\u548c\u5199\u4f5c\u65b9\u5f0f"},{"location":"#_2","text":"","title":"\u8bbf\u95ee:"},{"location":"django/1_django\u4ecb\u7ecd\u53ca\u5b89\u88c5/","text":"django\u4ecb\u7ecd\u53ca\u5b89\u88c5 \u6846\u67b6\u4ecb\u7ecd Django\u662f\u4e00\u4e2a\u5f00\u6e90\u6846\u67b6\uff0c2005\u5e74\u5f00\u53d1\uff0c\u91c7\u7528python\u8bed\u8a00\u7f16\u5199\u7684\u3002 \u65e9\u671f\u662f\u4e3b\u8981\u505a\u65b0\u95fb\u548c\u5185\u5bb9\u7ba1\u7406\u7684\u7f51\u7ad9 Django\u672c\u8eab\u63d0\u4f9b\u4e86\u975e\u5e38\u5f3a\u5927\u7684\u540e\u53f0\u7ba1\u7406\u7cfb\u7edf \u5b98\u7f51 http://www.djangoproject.com \u4e2d\u6587\u6587\u6863 http://djangobook.py3k.cn/2.0/ \u7248\u672c\u4ecb\u7ecd \u7248\u672c\u8def\u7ebf\u56fe \u6a2a\u8f74\u4ee3\u8868\u53d1\u884c\u5e74\u4efd\u3002 LTS \u662f\u957f\u671f\u652f\u6301(Long Term Support)\u7684\u7f29\u5199 \uff0c\u9009\u7528django\u5f00\u53d1\u65f6\uff0c\u4e00\u822c\u9009\u7528\u957f\u671f\u652f\u6301\u7248\u3002 django1.8 2019\u5e74\u5c31\u4e0d\u518d\u652f\u6301\u7ef4\u62a4\u4e86\u3002 django1.11 2021\u5e74 \u4e0d\u518d\u652f\u6301\u7ef4\u62a4\u3002 \u7b14\u8005\u5b66\u4e60\u7684\u65f6\u5019\u4f7f\u7528\u7684\u662fdjango1.11\u7248\uff0c\u73b0\u5728\u63a8\u8350\u4f7f\u7528\u7684\u662fdjango2.2 \u4ee5\u540e\u7248\u672c\u3002 \u6846\u67b6\u6a21\u5f0f MTV M Models - \u6a21\u578b\uff08\u6570\u636e\u5e93\uff09 T Templates - \u6a21\u677f\uff08\u7f51\u9875\uff09 V Views - \u89c6\u56fe\uff08\u903b\u8f91\uff09 Django\u6846\u67b6\u7684\u5b89\u88c5 \u5b89\u88c5\u6700\u65b0\u7248\u672c\u7684django python pip install django \u5b89\u88c5\u6307\u5b9a\u7248\u672c\u7684django python pip install django==2.2.6 \u79bb\u7ebf\u5b89\u88c5 django\u5b98\u7f51\u4e0b\u8f7dtar.gz\u6587\u4ef6\uff0c\u6839\u636e\u5b98\u7f51\u6587\u6863\u5b89\u88c5","title":"django\u4ecb\u7ecd\u53ca\u5b89\u88c5"},{"location":"django/1_django\u4ecb\u7ecd\u53ca\u5b89\u88c5/#django","text":"\u6846\u67b6\u4ecb\u7ecd Django\u662f\u4e00\u4e2a\u5f00\u6e90\u6846\u67b6\uff0c2005\u5e74\u5f00\u53d1\uff0c\u91c7\u7528python\u8bed\u8a00\u7f16\u5199\u7684\u3002 \u65e9\u671f\u662f\u4e3b\u8981\u505a\u65b0\u95fb\u548c\u5185\u5bb9\u7ba1\u7406\u7684\u7f51\u7ad9 Django\u672c\u8eab\u63d0\u4f9b\u4e86\u975e\u5e38\u5f3a\u5927\u7684\u540e\u53f0\u7ba1\u7406\u7cfb\u7edf \u5b98\u7f51 http://www.djangoproject.com \u4e2d\u6587\u6587\u6863 http://djangobook.py3k.cn/2.0/","title":"django\u4ecb\u7ecd\u53ca\u5b89\u88c5"},{"location":"django/1_django\u4ecb\u7ecd\u53ca\u5b89\u88c5/#_1","text":"","title":"\u7248\u672c\u4ecb\u7ecd"},{"location":"django/1_django\u4ecb\u7ecd\u53ca\u5b89\u88c5/#_2","text":"\u6a2a\u8f74\u4ee3\u8868\u53d1\u884c\u5e74\u4efd\u3002 LTS \u662f\u957f\u671f\u652f\u6301(Long Term Support)\u7684\u7f29\u5199 \uff0c\u9009\u7528django\u5f00\u53d1\u65f6\uff0c\u4e00\u822c\u9009\u7528\u957f\u671f\u652f\u6301\u7248\u3002 django1.8 2019\u5e74\u5c31\u4e0d\u518d\u652f\u6301\u7ef4\u62a4\u4e86\u3002 django1.11 2021\u5e74 \u4e0d\u518d\u652f\u6301\u7ef4\u62a4\u3002 \u7b14\u8005\u5b66\u4e60\u7684\u65f6\u5019\u4f7f\u7528\u7684\u662fdjango1.11\u7248\uff0c\u73b0\u5728\u63a8\u8350\u4f7f\u7528\u7684\u662fdjango2.2 \u4ee5\u540e\u7248\u672c\u3002","title":"\u7248\u672c\u8def\u7ebf\u56fe"},{"location":"django/1_django\u4ecb\u7ecd\u53ca\u5b89\u88c5/#_3","text":"MTV M Models - \u6a21\u578b\uff08\u6570\u636e\u5e93\uff09 T Templates - \u6a21\u677f\uff08\u7f51\u9875\uff09 V Views - \u89c6\u56fe\uff08\u903b\u8f91\uff09","title":"\u6846\u67b6\u6a21\u5f0f"},{"location":"django/1_django\u4ecb\u7ecd\u53ca\u5b89\u88c5/#django_1","text":"\u5b89\u88c5\u6700\u65b0\u7248\u672c\u7684django python pip install django \u5b89\u88c5\u6307\u5b9a\u7248\u672c\u7684django python pip install django==2.2.6 \u79bb\u7ebf\u5b89\u88c5 django\u5b98\u7f51\u4e0b\u8f7dtar.gz\u6587\u4ef6\uff0c\u6839\u636e\u5b98\u7f51\u6587\u6863\u5b89\u88c5","title":"Django\u6846\u67b6\u7684\u5b89\u88c5"},{"location":"django/2_django\u4e2d\u7684\u8def\u7531/","text":"django\u6846\u67b6\u7684\u4f7f\u7528 \u521b\u5efa\u9879\u76ee \u4f7f\u7528 django-admin \u521b\u5efa Django \u9879\u76ee \uff0c\u5728\u63a7\u5236\u53f0\u8f93\u5165\u3002 \u200b \u8bed\u6cd5\uff1a django-admin startproject \u9879\u76ee\u540d\u79f0 \u200b \u5982: django-admin startproject django_test Django\u9879\u76ee\u7ed3\u6784 manage.py \u529f\u80fd\uff1a \u5305\u542b\u6267\u884cdjango\u4e2d\u7684\u5404\u9879\u64cd\u4f5c\u7684\u6307\u4ee4 \u5982\uff1a \u542f\u52a8\u670d\u52a1 runserver \u4e3b\u76ee\u5f55 django_test/django_test __init__.py \u9879\u76ee\u7684\u521d\u59cb\u5316\u6587\u4ef6\uff0c\u81ea\u52a8\u8fd0\u884c urls.py \u9879\u76ee\u7684\u57fa\u7840\u8def\u7531\u914d\u7f6e\u6587\u4ef6 wsgi.py Web Server Gateway Interface Web \u670d\u52a1\u7f51\u5173\u63a5\u53e3 settings.py \u9879\u76ee\u7684\u914d\u7f6e\u6587\u4ef6 python 1. BASE_DIR \u9879\u76ee\u6839\u76ee\u5f55 2. ALLOWED_HOSTS \u8bbe\u7f6e\u5141\u8bb8\u8bbf\u95ee\u5230\u672c\u9879\u76ee\u7684\u5730\u5740\u5217\u8868 \u5982\u679c\u5141\u8bb8\u5728\u7f51\u7edc\u4e2d\u88ab\u5176\u4ed6\u7684\u673a\u5668\u8bbf\u95ee\u5230\u7684\u8bdd \u63a8\u8350\u5199[\"*\"], \u8868\u793a\u4efb\u4f55\u80fd\u591f\u8868\u793a\u8be5\u673a\u5668\u7684\u5730\u5740\u90fd\u80fd\u8bbf\u95ee\u5230\u8be5\u9879\u76ee \u540c\u65f6\u5728\u542f\u52a8\u670d\u52a1\u65f6\u8fd8\u9700\u8981\u6307\u5b9a\u5730\u5740\u548c\u7aef\u53e3 python3 manage.py runserver 0.0.0.0:8000 3. INSTALLED_APPS \u6307\u5b9a\u5df2\u5b89\u88c5\u7684\u5e94\u7528\uff0c\u5982\u679c\u7531\u81ea\u5b9a\u4e49\u7684\u5e94\u7528\u7684\u8bdd\u9700\u8981\u5728\u6b64\u6ce8\u518c 4. MIDDLEWARE \u4e2d\u95f4\u4ef6\uff0c\u5982\u679c\u6709\u81ea\u5b9a\u4e49\u7684\u4e2d\u95f4\u4ef6\uff0c\u9700\u8981\u5728\u6b64\u6ce8\u518c 5. ROOT_URLCONF \u6307\u5b9a\u9879\u76ee\u7684\u57fa\u7840\u8def\u7531\u914d\u7f6e\u6587\u4ef6 6. TEMPLATES \u914d\u7f6e\u6a21\u677f\u7684\u76f8\u5e94\u4fe1\u606f 7. DATABASES \u914d\u7f6e\u6570\u636e\u5e93\u7684\u4fe1\u606f 8. LANGUAGE_CODE \u8bbe\u7f6e\u8bed\u8a00\uff0c\u4e3b\u8981\u8bbe\u7f6e\u4e2d\u6587\u7684\u8bdd\uff0c\u5141\u8bb8\u5c06\u503c\u6539\u4e3a'zh-Hans' 9. TIME_ZONE \u6307\u5b9a\u65f6\u533a\uff0c\u9ed8\u8ba4\u65f6\u533a\uff0c\u5141\u8bb8\u5c06\u503c\u66f4\u6539\u4e3a\"Asia/Shanghai\" url\u7684\u4f7f\u7528 urls.py \u9ed8\u8ba4\u5728\u4e3b\u76ee\u5f55\u4e2d\uff0c\u4e3b\u8def\u7531\u914d\u7f6e\u6587\u4ef6\uff0c\u4f1a\u5305\u542b\u6700\u57fa\u672c\u7684\u5730\u5740\u6620\u5c04\uff0c\u6bcf\u4e2a\u5730\u5740\u8bbf\u95ee\u90fd\u5fc5\u987b\u8981\u5148\u7ecf\u8fc7\u8be5\u6587\u4ef6 \u4f5c\u7528\uff1a\u901a\u8fc7urls\u4e2d\u5b9a\u4e49\u597d\u7684\u5730\u5740\u627e\u5230\u5bf9\u5e94\u7684\u89c6\u56fe\u5904\u7406\u51fd\u6570 python urlpatterns = [ path('admin/', admin.site.urls), ] path() \u4f5c\u7528\uff1a\u4e3a\u4e86\u5339\u914d\u7528\u6237\u7684\u8bbf\u95ee\u8def\u5f84 \u8bed\u6cd5: ``` from django.urls import path path(route, view, kwargs=None, name=None) route: \u5339\u914d\u8bf7\u6c42\u7684url view: \u5730\u5740\u5339\u914d\u4e0a\u4e4b\u540e\u8981\u6267\u884c\u64cd\u4f5c\u7684\u89c6\u56fe\u5904\u7406\u51fd\u6570 kwargs: \u5b57\u5178\uff0c\u7528\u6765\u60f3view\u4f20\u53c2\u7684\uff0c\u53ef\u4ee5\u7701\u7565 name: \u4e3aurl\u8d77\u522b\u540d, \u5728\u5730\u5740\u53cd\u5411\u89e3\u6790\u65f6\u4f7f\u7528 ``` \u5411url\u4f20\u9012\u53c2\u6570 \u65b9\u5f0f\u4e00\uff1a\u901a\u8fc7path\u7684\u53c2\u6570kwargs\u7684\u65b9\u5f0f\u4f20\u9012\uff0c\u4e0d\u63a8\u8350\uff0c\u8fd9\u91cc\u4f9d\u8d56\u4e86django\u6846\u67b6\uff0c\u4e0d\u901a\u7528\u3002 \u65b9\u5f0f\u4e8c\uff1a\u901a\u8fc7http\u534f\u8bae\u8fdb\u884c\u4f20\u53c2 get\u8bf7\u6c42 http:// xxxx.com/login?id=1&token=xxx post\u8bf7\u6c42 http:// xxx.com/login \u6570\u636e\u653e\u5728 form-data\u91cc\uff0c\u8be6\u7ec6\u4e00\u70b9\u7684\u8bdd\u5c31\u662f\u653e\u5728http\u8bf7\u6c42\u7684\u8bf7\u6c42\u4f53\u91cc\uff08\u53ef\u4ee5\u53bb\u770b\u770bhttp\u534f\u8bae\u7684\u5185\u5bb9\uff09 \u6570\u636e\u600e\u4e48\u53d6\uff1f\uff1f \u540e\u9762\u7684\u6559\u7a0b\u4f1a\u8bb2\u5230\u3002 Django\u4e2d\u7684\u5e94\u7528 \u4ec0\u4e48\u662f\u5e94\u7528 \uff1f \u5e94\u7528\u5c31\u662f\u7f51\u7ad9\u4e2d\u7684\u4e00\u4e2a\u72ec\u7acb\u7684\u6a21\u5757 \u5982: \u7f51\u6613\u7f51\u7ad9\u53ef\u5206\u4e3a\u82e5\u5e72\u5e94\u7528\u7ec4\u6210 \u200b \u65b0\u95fb\u5e94\u7528: \u4e0e\u65b0\u95fb\u76f8\u5173\u7684\u5185\u5bb9 \u200b \u8f66\u5e94\u7528: \u4e0e\u6c7d\u8f66\u76f8\u5173\u7684\u5185\u5bb9 \u200b \u79d1\u6280\u5e94\u7528: \u4e0e\u79d1\u6280\u76f8\u5173\u7684\u5185\u5bb9 \u5728django\u4e2d, \u4e3b\u76ee\u5f55\u4e00\u822c\u4e0d\u5904\u7406\u5177\u4f53\u7684\u8bf7\u6c42, \u4e3b\u76ee\u5f55\u4e00\u822c\u5904\u7406\u7684\u662f\u9879\u76ee\u7684\u521d\u59cb\u5316\u64cd\u4f5c \u5904\u7406\u7684\u662f\u521d\u59cb\u5316\u64cd\u4f5c, \u4ee5\u53ca\u8bf7\u6c42\u7684\u5206\u53d1(\u5206\u5e03\u5f0f\u8bf7\u6c42\u5904\u7406), \u800c\u5177\u4f53\u7684\u8bf7\u6c42\u662f\u7531\u5404\u4e2a\u5e94\u7528\u53bb\u5904\u7406. \u521b\u5efa\u5e94\u7528 \u547d\u4ee4 python python manage.py startapp \u5e94\u7528\u7684\u540d\u79f0 \u9700\u8981\u5728settings.py \u4e2d\u8fdb\u884c\u6ce8\u518c \uff0c \u5728INSTALLED_APPS \u4e2d\u8ffd\u52a0\u5e94\u7528\u7684\u540d\u79f0\u6765\u6ce8\u518c\u5e94\u7528 python INSTALLED_APPS = [ 'django.contrib.admin', ... ... '\u81ea\u5b9a\u4e49\u7684\u5e94\u7528\u540d\u79f0' ] \u5e94\u7528\u7684\u89e3\u6790\u7ec4\u6210 migrations \u6587\u4ef6\u5939 : \u5b58\u653e\u6570\u636e\u5e93\u7684\u4e2d\u95f4\u6587\u4ef6 __init__.py : \u5e94\u7528\u7684\u521d\u59cb\u5316\u6587\u4ef6 admin.py : \u5e94\u7528\u7684\u540e\u53f0\u7ba1\u7406\u914d\u7f6e\u6587\u4ef6 apps.py : \u548c\u5e94\u7528\u7684\u5c5e\u6027\u914d\u7f6e\u6587\u4ef6 models.py : Models \u4e0e \u6a21\u578b\u76f8\u5173\u7684\u6620\u5c04\u6587\u4ef6 tests.py : \u5e94\u7528\u7684\u5355\u5143\u6d4b\u8bd5\u6587\u4ef6 views.py : \u89c6\u56fe\u5904\u7406\u51fd\u6570\u7684\u6587\u4ef6 \u5206\u90e8\u5f0f\u7684\u8def\u7531\u7cfb\u7edf \u5728\u6bcf\u4e2a\u5e94\u7528\u4e2d\u5206\u522b\u521b\u5efaurls.py, \u683c\u5f0f\u53c2\u8003\u4e3b\u8def\u7531\u6587\u4ef6 \u76ee\u7684: \u4e3a\u4e86\u5904\u7406\u5404\u4e2a\u5e94\u7528\u4e2d\u7684\u8bf7\u6c42\u8def\u7531 \u7528\u6cd5: (\u8fd9\u91cc\u76f4\u63a5\u5f15\u7528django\u5b98\u65b9\u7684\u4f8b\u5b50) \u521b\u5efa\u4e00\u4e2apolls\u5e94\u7528\uff1a python python manage.py startapp polls django_test/setting.py \u58f0\u660epolls\u6a21\u5757 INSTALLED_APPS = [ 'django.contrib.admin', 'django.contrib.auth', 'django.contrib.contenttypes', 'django.contrib.sessions', 'django.contrib.messages', 'django.contrib.staticfiles', 'polls' # <- \u8fd9\u91cc ] \u5728polls\u5305\u4e0b\u521b\u5efa urls.py \u6a21\u5757\uff0c\u5e76\u5b9a\u4e49\u4e00\u4e2ahttp://127.0.0.1:8000/ \u8def\u7531\u3002 ```python from django.urls import path from .views import index_view urlpatterns = [ path('', index_view, name='index'), ] ``` \u7f16\u5199\u8bd5\u56fe\u51fd\u6570 polls/views.py ```python from django.http import HttpResponse from django.shortcuts import render # Create your views here. def index_view(request): return HttpResponse('index') ``` \u5c06polls\u5e94\u7528\u7684urls\u6ce8\u518c\u5230\u4e3b\u8def\u7531\u7cfb\u7edf\u4e2d\uff0c django_test/urls.py ```python from django.contrib import admin from django.urls import path, include urlpatterns = [ path('admin/', admin.site.urls), path('', include(\"polls.urls\")), ] ``` \u542f\u52a8\u670d\u52a1\uff0c\u8bbf\u95ee\u4e3b\u9875\uff1ahttp://127.0.0.1:8000/","title":"django\u4e2d\u7684\u8def\u7531"},{"location":"django/2_django\u4e2d\u7684\u8def\u7531/#django","text":"","title":"django\u6846\u67b6\u7684\u4f7f\u7528"},{"location":"django/2_django\u4e2d\u7684\u8def\u7531/#_1","text":"\u4f7f\u7528 django-admin \u521b\u5efa Django \u9879\u76ee \uff0c\u5728\u63a7\u5236\u53f0\u8f93\u5165\u3002 \u200b \u8bed\u6cd5\uff1a django-admin startproject \u9879\u76ee\u540d\u79f0 \u200b \u5982: django-admin startproject django_test","title":"\u521b\u5efa\u9879\u76ee"},{"location":"django/2_django\u4e2d\u7684\u8def\u7531/#django_1","text":"manage.py \u529f\u80fd\uff1a \u5305\u542b\u6267\u884cdjango\u4e2d\u7684\u5404\u9879\u64cd\u4f5c\u7684\u6307\u4ee4 \u5982\uff1a \u542f\u52a8\u670d\u52a1 runserver \u4e3b\u76ee\u5f55 django_test/django_test __init__.py \u9879\u76ee\u7684\u521d\u59cb\u5316\u6587\u4ef6\uff0c\u81ea\u52a8\u8fd0\u884c urls.py \u9879\u76ee\u7684\u57fa\u7840\u8def\u7531\u914d\u7f6e\u6587\u4ef6 wsgi.py Web Server Gateway Interface Web \u670d\u52a1\u7f51\u5173\u63a5\u53e3 settings.py \u9879\u76ee\u7684\u914d\u7f6e\u6587\u4ef6 python 1. BASE_DIR \u9879\u76ee\u6839\u76ee\u5f55 2. ALLOWED_HOSTS \u8bbe\u7f6e\u5141\u8bb8\u8bbf\u95ee\u5230\u672c\u9879\u76ee\u7684\u5730\u5740\u5217\u8868 \u5982\u679c\u5141\u8bb8\u5728\u7f51\u7edc\u4e2d\u88ab\u5176\u4ed6\u7684\u673a\u5668\u8bbf\u95ee\u5230\u7684\u8bdd \u63a8\u8350\u5199[\"*\"], \u8868\u793a\u4efb\u4f55\u80fd\u591f\u8868\u793a\u8be5\u673a\u5668\u7684\u5730\u5740\u90fd\u80fd\u8bbf\u95ee\u5230\u8be5\u9879\u76ee \u540c\u65f6\u5728\u542f\u52a8\u670d\u52a1\u65f6\u8fd8\u9700\u8981\u6307\u5b9a\u5730\u5740\u548c\u7aef\u53e3 python3 manage.py runserver 0.0.0.0:8000 3. INSTALLED_APPS \u6307\u5b9a\u5df2\u5b89\u88c5\u7684\u5e94\u7528\uff0c\u5982\u679c\u7531\u81ea\u5b9a\u4e49\u7684\u5e94\u7528\u7684\u8bdd\u9700\u8981\u5728\u6b64\u6ce8\u518c 4. MIDDLEWARE \u4e2d\u95f4\u4ef6\uff0c\u5982\u679c\u6709\u81ea\u5b9a\u4e49\u7684\u4e2d\u95f4\u4ef6\uff0c\u9700\u8981\u5728\u6b64\u6ce8\u518c 5. ROOT_URLCONF \u6307\u5b9a\u9879\u76ee\u7684\u57fa\u7840\u8def\u7531\u914d\u7f6e\u6587\u4ef6 6. TEMPLATES \u914d\u7f6e\u6a21\u677f\u7684\u76f8\u5e94\u4fe1\u606f 7. DATABASES \u914d\u7f6e\u6570\u636e\u5e93\u7684\u4fe1\u606f 8. LANGUAGE_CODE \u8bbe\u7f6e\u8bed\u8a00\uff0c\u4e3b\u8981\u8bbe\u7f6e\u4e2d\u6587\u7684\u8bdd\uff0c\u5141\u8bb8\u5c06\u503c\u6539\u4e3a'zh-Hans' 9. TIME_ZONE \u6307\u5b9a\u65f6\u533a\uff0c\u9ed8\u8ba4\u65f6\u533a\uff0c\u5141\u8bb8\u5c06\u503c\u66f4\u6539\u4e3a\"Asia/Shanghai\"","title":"Django\u9879\u76ee\u7ed3\u6784"},{"location":"django/2_django\u4e2d\u7684\u8def\u7531/#url","text":"urls.py \u9ed8\u8ba4\u5728\u4e3b\u76ee\u5f55\u4e2d\uff0c\u4e3b\u8def\u7531\u914d\u7f6e\u6587\u4ef6\uff0c\u4f1a\u5305\u542b\u6700\u57fa\u672c\u7684\u5730\u5740\u6620\u5c04\uff0c\u6bcf\u4e2a\u5730\u5740\u8bbf\u95ee\u90fd\u5fc5\u987b\u8981\u5148\u7ecf\u8fc7\u8be5\u6587\u4ef6 \u4f5c\u7528\uff1a\u901a\u8fc7urls\u4e2d\u5b9a\u4e49\u597d\u7684\u5730\u5740\u627e\u5230\u5bf9\u5e94\u7684\u89c6\u56fe\u5904\u7406\u51fd\u6570 python urlpatterns = [ path('admin/', admin.site.urls), ] path() \u4f5c\u7528\uff1a\u4e3a\u4e86\u5339\u914d\u7528\u6237\u7684\u8bbf\u95ee\u8def\u5f84 \u8bed\u6cd5: ``` from django.urls import path path(route, view, kwargs=None, name=None) route: \u5339\u914d\u8bf7\u6c42\u7684url view: \u5730\u5740\u5339\u914d\u4e0a\u4e4b\u540e\u8981\u6267\u884c\u64cd\u4f5c\u7684\u89c6\u56fe\u5904\u7406\u51fd\u6570 kwargs: \u5b57\u5178\uff0c\u7528\u6765\u60f3view\u4f20\u53c2\u7684\uff0c\u53ef\u4ee5\u7701\u7565 name: \u4e3aurl\u8d77\u522b\u540d, \u5728\u5730\u5740\u53cd\u5411\u89e3\u6790\u65f6\u4f7f\u7528 ``` \u5411url\u4f20\u9012\u53c2\u6570 \u65b9\u5f0f\u4e00\uff1a\u901a\u8fc7path\u7684\u53c2\u6570kwargs\u7684\u65b9\u5f0f\u4f20\u9012\uff0c\u4e0d\u63a8\u8350\uff0c\u8fd9\u91cc\u4f9d\u8d56\u4e86django\u6846\u67b6\uff0c\u4e0d\u901a\u7528\u3002 \u65b9\u5f0f\u4e8c\uff1a\u901a\u8fc7http\u534f\u8bae\u8fdb\u884c\u4f20\u53c2 get\u8bf7\u6c42 http:// xxxx.com/login?id=1&token=xxx post\u8bf7\u6c42 http:// xxx.com/login \u6570\u636e\u653e\u5728 form-data\u91cc\uff0c\u8be6\u7ec6\u4e00\u70b9\u7684\u8bdd\u5c31\u662f\u653e\u5728http\u8bf7\u6c42\u7684\u8bf7\u6c42\u4f53\u91cc\uff08\u53ef\u4ee5\u53bb\u770b\u770bhttp\u534f\u8bae\u7684\u5185\u5bb9\uff09 \u6570\u636e\u600e\u4e48\u53d6\uff1f\uff1f \u540e\u9762\u7684\u6559\u7a0b\u4f1a\u8bb2\u5230\u3002","title":"url\u7684\u4f7f\u7528"},{"location":"django/2_django\u4e2d\u7684\u8def\u7531/#django_2","text":"\u4ec0\u4e48\u662f\u5e94\u7528 \uff1f \u5e94\u7528\u5c31\u662f\u7f51\u7ad9\u4e2d\u7684\u4e00\u4e2a\u72ec\u7acb\u7684\u6a21\u5757 \u5982: \u7f51\u6613\u7f51\u7ad9\u53ef\u5206\u4e3a\u82e5\u5e72\u5e94\u7528\u7ec4\u6210 \u200b \u65b0\u95fb\u5e94\u7528: \u4e0e\u65b0\u95fb\u76f8\u5173\u7684\u5185\u5bb9 \u200b \u8f66\u5e94\u7528: \u4e0e\u6c7d\u8f66\u76f8\u5173\u7684\u5185\u5bb9 \u200b \u79d1\u6280\u5e94\u7528: \u4e0e\u79d1\u6280\u76f8\u5173\u7684\u5185\u5bb9 \u5728django\u4e2d, \u4e3b\u76ee\u5f55\u4e00\u822c\u4e0d\u5904\u7406\u5177\u4f53\u7684\u8bf7\u6c42, \u4e3b\u76ee\u5f55\u4e00\u822c\u5904\u7406\u7684\u662f\u9879\u76ee\u7684\u521d\u59cb\u5316\u64cd\u4f5c \u5904\u7406\u7684\u662f\u521d\u59cb\u5316\u64cd\u4f5c, \u4ee5\u53ca\u8bf7\u6c42\u7684\u5206\u53d1(\u5206\u5e03\u5f0f\u8bf7\u6c42\u5904\u7406), \u800c\u5177\u4f53\u7684\u8bf7\u6c42\u662f\u7531\u5404\u4e2a\u5e94\u7528\u53bb\u5904\u7406. \u521b\u5efa\u5e94\u7528 \u547d\u4ee4 python python manage.py startapp \u5e94\u7528\u7684\u540d\u79f0 \u9700\u8981\u5728settings.py \u4e2d\u8fdb\u884c\u6ce8\u518c \uff0c \u5728INSTALLED_APPS \u4e2d\u8ffd\u52a0\u5e94\u7528\u7684\u540d\u79f0\u6765\u6ce8\u518c\u5e94\u7528 python INSTALLED_APPS = [ 'django.contrib.admin', ... ... '\u81ea\u5b9a\u4e49\u7684\u5e94\u7528\u540d\u79f0' ] \u5e94\u7528\u7684\u89e3\u6790\u7ec4\u6210 migrations \u6587\u4ef6\u5939 : \u5b58\u653e\u6570\u636e\u5e93\u7684\u4e2d\u95f4\u6587\u4ef6 __init__.py : \u5e94\u7528\u7684\u521d\u59cb\u5316\u6587\u4ef6 admin.py : \u5e94\u7528\u7684\u540e\u53f0\u7ba1\u7406\u914d\u7f6e\u6587\u4ef6 apps.py : \u548c\u5e94\u7528\u7684\u5c5e\u6027\u914d\u7f6e\u6587\u4ef6 models.py : Models \u4e0e \u6a21\u578b\u76f8\u5173\u7684\u6620\u5c04\u6587\u4ef6 tests.py : \u5e94\u7528\u7684\u5355\u5143\u6d4b\u8bd5\u6587\u4ef6 views.py : \u89c6\u56fe\u5904\u7406\u51fd\u6570\u7684\u6587\u4ef6 \u5206\u90e8\u5f0f\u7684\u8def\u7531\u7cfb\u7edf \u5728\u6bcf\u4e2a\u5e94\u7528\u4e2d\u5206\u522b\u521b\u5efaurls.py, \u683c\u5f0f\u53c2\u8003\u4e3b\u8def\u7531\u6587\u4ef6 \u76ee\u7684: \u4e3a\u4e86\u5904\u7406\u5404\u4e2a\u5e94\u7528\u4e2d\u7684\u8bf7\u6c42\u8def\u7531 \u7528\u6cd5: (\u8fd9\u91cc\u76f4\u63a5\u5f15\u7528django\u5b98\u65b9\u7684\u4f8b\u5b50) \u521b\u5efa\u4e00\u4e2apolls\u5e94\u7528\uff1a python python manage.py startapp polls django_test/setting.py \u58f0\u660epolls\u6a21\u5757 INSTALLED_APPS = [ 'django.contrib.admin', 'django.contrib.auth', 'django.contrib.contenttypes', 'django.contrib.sessions', 'django.contrib.messages', 'django.contrib.staticfiles', 'polls' # <- \u8fd9\u91cc ] \u5728polls\u5305\u4e0b\u521b\u5efa urls.py \u6a21\u5757\uff0c\u5e76\u5b9a\u4e49\u4e00\u4e2ahttp://127.0.0.1:8000/ \u8def\u7531\u3002 ```python from django.urls import path from .views import index_view urlpatterns = [ path('', index_view, name='index'), ] ``` \u7f16\u5199\u8bd5\u56fe\u51fd\u6570 polls/views.py ```python from django.http import HttpResponse from django.shortcuts import render # Create your views here. def index_view(request): return HttpResponse('index') ``` \u5c06polls\u5e94\u7528\u7684urls\u6ce8\u518c\u5230\u4e3b\u8def\u7531\u7cfb\u7edf\u4e2d\uff0c django_test/urls.py ```python from django.contrib import admin from django.urls import path, include urlpatterns = [ path('admin/', admin.site.urls), path('', include(\"polls.urls\")), ] ``` \u542f\u52a8\u670d\u52a1\uff0c\u8bbf\u95ee\u4e3b\u9875\uff1ahttp://127.0.0.1:8000/","title":"Django\u4e2d\u7684\u5e94\u7528"},{"location":"django/3_django\u4e2d\u7684HttpRequest\u5bf9\u8c61/","text":"django\u4e2d\u7684HttpRequest\u5bf9\u8c61 \u4ec0\u4e48\u662fHttpRequest HttpRequest \u5bf9\u8bf7\u6c42\u5bf9\u8c61\u7684\u5c01\u88c5\uff0c \u91cc\u9762\u5c01\u88c5\u7684\u662f\u8bf7\u6c42\u8fc7\u7a0b\u4e2d\u7684\u6240\u6709\u4fe1\u606f\uff0c\u5728Django\u4e2dHttpRequest \u88ab\u5c01\u88c5\u6210 request \u5bf9\u8c61\u5e76\u5c01\u88c5\u5230\u89c6\u56fe\u5904\u7406\u51fd\u6570\u4e2d\uff0c\u5728\u8c03\u7528\u89c6\u56fe\u65f6\u81ea\u52a8\u5bfc\u5165 HttpRequest \u4e2d\u7684\u4e3b\u8981\u5185\u5bb9 1. request.scheme: \u8868\u793a\u8bf7\u6c42\u65b9\u6848\uff08http\u6216https \u901a\u5e38\uff09\u7684\u5b57\u7b26\u4e32 2. request.post: \u8bf7\u6c42\u4e3b\u4f53 3. request.path: \u8bf7\u6c42\u8def\u5f84 4. request.get_full_path: \u8bf7\u6c42\u5b8c\u6574\u8def\u5f84 5. request.get_host(): \u8bf7\u6c42\u4e3b\u673a\u5730\u5740 / \u57df\u540d 6. request.method: \u8bf7\u6c42\u65b9\u6cd5 7. request.GET: \u5c01\u88dd\u4e86get\u8acb\u6c42\u65b9\u5f0f\u63d0\u4ea4\u7684\u6578\u64da 8. request.POST: \u5c01\u88dd\u4e86POST\u8acb\u6c42\u65b9\u5f0f\u63d0\u4ea4\u7684\u6578\u64da 9. request.cookies: \u5c01\u88dd\u4e86 cookies\u4e2d\u7684\u6240\u6709\u6578\u64da 10. request.META: \u5c01\u88dd\u4e86\u8acb\u6c42\u7684\u5143\u6578\u64da request.META.HTTP_REFERER: \u5c01\u88dd\u4e86\u8acb\u6c42\u7684\u6e90\u5730\u5740 11. request.FILES: \u4e0a\u4f20\u6587\u4ef6\u7684\u7c7b\u5b57\u5178\u5bf9\u8c61 12. request.is_secure(): True\u5982\u679c\u8bf7\u6c42\u662f\u5b89\u5168\u7684\uff0c\u5219\u8fd4\u56de; \u4e5f\u5c31\u662f\u8bf4\uff0c\u5982\u679c\u5b83\u662f\u7528HTTPS\u5236\u4f5c\u7684 13. request.is_ajax(): \u8fd4\u56deTrue\u5982\u679c\u8bf7\u6c42\u88ab\u7ecf\u7531\u5236\u6210XMLHttpRequest \u83b7\u53d6\u8bf7\u6c42\u63d0\u4ea4\u7684\u6570\u636e get \u8bf7\u6c42 \u83b7\u53d6\u6570\u636e python request.GET['\u540d\u79f0'] request.GET.get('\u540d\u79f0') request.GET.getlist('\u540d\u79f0') POST\u8bf7\u6c42 \u83b7\u53d6\u6570\u636e python request.GET['\u540d\u79f0'] request.GET.get('\u540d\u79f0') request.GET.getlist('\u540d\u79f0') request.META \u5305\u542b\u6240\u6709\u53ef\u7528HTTP\u6807\u5934\u7684\u5b57\u5178\u3002\u53ef\u7528\u7684\u6807\u5934\u53d6\u51b3\u4e8e\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\uff0c\u4ee5\u4e0b\u662f\u4e00\u4e9b\u793a\u4f8b CONTENT_LENGTH - \u8bf7\u6c42\u6b63\u6587\u7684\u957f\u5ea6\uff08\u4f5c\u4e3a\u5b57\u7b26\u4e32\uff09\u3002 CONTENT_TYPE - \u8bf7\u6c42\u6b63\u6587\u7684MIME\u7c7b\u578b\u3002 HTTP_ACCEPT - \u54cd\u5e94\u7684\u53ef\u63a5\u53d7\u5185\u5bb9\u7c7b\u578b\u3002 HTTP_ACCEPT_ENCODING - \u53ef\u63a5\u53d7\u7684\u54cd\u5e94\u7f16\u7801\u3002 HTTP_ACCEPT_LANGUAGE - \u54cd\u5e94\u7684\u53ef\u63a5\u53d7\u8bed\u8a00\u3002 HTTP_HOST - \u5ba2\u6237\u7aef\u53d1\u9001\u7684HTTP\u4e3b\u673a\u5934\u3002 HTTP_REFERER - \u5f15\u7528\u9875\u9762\uff0c\u5982\u679c\u6709\u7684\u8bdd\u3002 HTTP_USER_AGENT - \u5ba2\u6237\u7aef\u7684\u7528\u6237\u4ee3\u7406\u5b57\u7b26\u4e32\u3002 QUERY_STRING - \u67e5\u8be2\u5b57\u7b26\u4e32\uff0c\u4f5c\u4e3a\u5355\u4e2a\uff08\u672a\u89e3\u6790\u7684\uff09\u5b57\u7b26\u4e32\u3002 REMOTE_ADDR - \u5ba2\u6237\u7aef\u7684IP\u5730\u5740\u3002 REMOTE_HOST - \u5ba2\u6237\u7aef\u7684\u4e3b\u673a\u540d\u3002 REMOTE_USER - Web\u670d\u52a1\u5668\u9a8c\u8bc1\u7684\u7528\u6237\uff08\u5982\u679c\u6709\uff09\u3002 REQUEST_METHOD- \u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u5982\"GET\"\u6216\"POST\"\u3002 SERVER_NAME - \u670d\u52a1\u5668\u7684\u4e3b\u673a\u540d\u3002 SERVER_PORT - \u670d\u52a1\u5668\u7684\u7aef\u53e3\uff08\u4f5c\u4e3a\u5b57\u7b26\u4e32\uff09\u3002 \u9664\u4e86CONTENT_LENGTH\u548c\u4e4b\u5916CONTENT_TYPE\uff0c\u5982\u4e0a\u6240\u8ff0\uff0c\u8bf7\u6c42\u4e2d\u7684\u4efb\u4f55HTTP\u5934\u90fd\u5c06\u8f6c\u6362\u4e3aMETA\u952e\uff0c\u65b9\u6cd5\u662f\u5c06\u6240\u6709\u5b57\u7b26\u8f6c\u6362\u4e3a\u5927\u5199\uff0c\u7528\u4e0b\u5212\u7ebf\u66ff\u6362\u4efb\u4f55\u8fde\u5b57\u7b26\u5e76HTTP_\u5728\u540d\u79f0\u4e2d\u6dfb\u52a0\u524d\u7f00\u3002\u56e0\u6b64\uff0c\u4f8b\u5982\uff0c\u8c03\u7528\u7684\u6807\u5934X-Bender\u5c06\u6620\u5c04\u5230META\u5bc6\u94a5 HTTP_X_BENDER\u3002","title":"HttpRequest\u5bf9\u8c61"},{"location":"django/3_django\u4e2d\u7684HttpRequest\u5bf9\u8c61/#djangohttprequest","text":"","title":"django\u4e2d\u7684HttpRequest\u5bf9\u8c61"},{"location":"django/3_django\u4e2d\u7684HttpRequest\u5bf9\u8c61/#httprequest","text":"HttpRequest \u5bf9\u8bf7\u6c42\u5bf9\u8c61\u7684\u5c01\u88c5\uff0c \u91cc\u9762\u5c01\u88c5\u7684\u662f\u8bf7\u6c42\u8fc7\u7a0b\u4e2d\u7684\u6240\u6709\u4fe1\u606f\uff0c\u5728Django\u4e2dHttpRequest \u88ab\u5c01\u88c5\u6210 request \u5bf9\u8c61\u5e76\u5c01\u88c5\u5230\u89c6\u56fe\u5904\u7406\u51fd\u6570\u4e2d\uff0c\u5728\u8c03\u7528\u89c6\u56fe\u65f6\u81ea\u52a8\u5bfc\u5165","title":"\u4ec0\u4e48\u662fHttpRequest"},{"location":"django/3_django\u4e2d\u7684HttpRequest\u5bf9\u8c61/#httprequest_1","text":"1. request.scheme: \u8868\u793a\u8bf7\u6c42\u65b9\u6848\uff08http\u6216https \u901a\u5e38\uff09\u7684\u5b57\u7b26\u4e32 2. request.post: \u8bf7\u6c42\u4e3b\u4f53 3. request.path: \u8bf7\u6c42\u8def\u5f84 4. request.get_full_path: \u8bf7\u6c42\u5b8c\u6574\u8def\u5f84 5. request.get_host(): \u8bf7\u6c42\u4e3b\u673a\u5730\u5740 / \u57df\u540d 6. request.method: \u8bf7\u6c42\u65b9\u6cd5 7. request.GET: \u5c01\u88dd\u4e86get\u8acb\u6c42\u65b9\u5f0f\u63d0\u4ea4\u7684\u6578\u64da 8. request.POST: \u5c01\u88dd\u4e86POST\u8acb\u6c42\u65b9\u5f0f\u63d0\u4ea4\u7684\u6578\u64da 9. request.cookies: \u5c01\u88dd\u4e86 cookies\u4e2d\u7684\u6240\u6709\u6578\u64da 10. request.META: \u5c01\u88dd\u4e86\u8acb\u6c42\u7684\u5143\u6578\u64da request.META.HTTP_REFERER: \u5c01\u88dd\u4e86\u8acb\u6c42\u7684\u6e90\u5730\u5740 11. request.FILES: \u4e0a\u4f20\u6587\u4ef6\u7684\u7c7b\u5b57\u5178\u5bf9\u8c61 12. request.is_secure(): True\u5982\u679c\u8bf7\u6c42\u662f\u5b89\u5168\u7684\uff0c\u5219\u8fd4\u56de; \u4e5f\u5c31\u662f\u8bf4\uff0c\u5982\u679c\u5b83\u662f\u7528HTTPS\u5236\u4f5c\u7684 13. request.is_ajax(): \u8fd4\u56deTrue\u5982\u679c\u8bf7\u6c42\u88ab\u7ecf\u7531\u5236\u6210XMLHttpRequest","title":"HttpRequest \u4e2d\u7684\u4e3b\u8981\u5185\u5bb9"},{"location":"django/3_django\u4e2d\u7684HttpRequest\u5bf9\u8c61/#_1","text":"","title":"\u83b7\u53d6\u8bf7\u6c42\u63d0\u4ea4\u7684\u6570\u636e"},{"location":"django/3_django\u4e2d\u7684HttpRequest\u5bf9\u8c61/#get","text":"\u83b7\u53d6\u6570\u636e python request.GET['\u540d\u79f0'] request.GET.get('\u540d\u79f0') request.GET.getlist('\u540d\u79f0')","title":"get \u8bf7\u6c42"},{"location":"django/3_django\u4e2d\u7684HttpRequest\u5bf9\u8c61/#post","text":"\u83b7\u53d6\u6570\u636e python request.GET['\u540d\u79f0'] request.GET.get('\u540d\u79f0') request.GET.getlist('\u540d\u79f0')","title":"POST\u8bf7\u6c42"},{"location":"django/3_django\u4e2d\u7684HttpRequest\u5bf9\u8c61/#requestmeta","text":"\u5305\u542b\u6240\u6709\u53ef\u7528HTTP\u6807\u5934\u7684\u5b57\u5178\u3002\u53ef\u7528\u7684\u6807\u5934\u53d6\u51b3\u4e8e\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\uff0c\u4ee5\u4e0b\u662f\u4e00\u4e9b\u793a\u4f8b CONTENT_LENGTH - \u8bf7\u6c42\u6b63\u6587\u7684\u957f\u5ea6\uff08\u4f5c\u4e3a\u5b57\u7b26\u4e32\uff09\u3002 CONTENT_TYPE - \u8bf7\u6c42\u6b63\u6587\u7684MIME\u7c7b\u578b\u3002 HTTP_ACCEPT - \u54cd\u5e94\u7684\u53ef\u63a5\u53d7\u5185\u5bb9\u7c7b\u578b\u3002 HTTP_ACCEPT_ENCODING - \u53ef\u63a5\u53d7\u7684\u54cd\u5e94\u7f16\u7801\u3002 HTTP_ACCEPT_LANGUAGE - \u54cd\u5e94\u7684\u53ef\u63a5\u53d7\u8bed\u8a00\u3002 HTTP_HOST - \u5ba2\u6237\u7aef\u53d1\u9001\u7684HTTP\u4e3b\u673a\u5934\u3002 HTTP_REFERER - \u5f15\u7528\u9875\u9762\uff0c\u5982\u679c\u6709\u7684\u8bdd\u3002 HTTP_USER_AGENT - \u5ba2\u6237\u7aef\u7684\u7528\u6237\u4ee3\u7406\u5b57\u7b26\u4e32\u3002 QUERY_STRING - \u67e5\u8be2\u5b57\u7b26\u4e32\uff0c\u4f5c\u4e3a\u5355\u4e2a\uff08\u672a\u89e3\u6790\u7684\uff09\u5b57\u7b26\u4e32\u3002 REMOTE_ADDR - \u5ba2\u6237\u7aef\u7684IP\u5730\u5740\u3002 REMOTE_HOST - \u5ba2\u6237\u7aef\u7684\u4e3b\u673a\u540d\u3002 REMOTE_USER - Web\u670d\u52a1\u5668\u9a8c\u8bc1\u7684\u7528\u6237\uff08\u5982\u679c\u6709\uff09\u3002 REQUEST_METHOD- \u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u5982\"GET\"\u6216\"POST\"\u3002 SERVER_NAME - \u670d\u52a1\u5668\u7684\u4e3b\u673a\u540d\u3002 SERVER_PORT - \u670d\u52a1\u5668\u7684\u7aef\u53e3\uff08\u4f5c\u4e3a\u5b57\u7b26\u4e32\uff09\u3002 \u9664\u4e86CONTENT_LENGTH\u548c\u4e4b\u5916CONTENT_TYPE\uff0c\u5982\u4e0a\u6240\u8ff0\uff0c\u8bf7\u6c42\u4e2d\u7684\u4efb\u4f55HTTP\u5934\u90fd\u5c06\u8f6c\u6362\u4e3aMETA\u952e\uff0c\u65b9\u6cd5\u662f\u5c06\u6240\u6709\u5b57\u7b26\u8f6c\u6362\u4e3a\u5927\u5199\uff0c\u7528\u4e0b\u5212\u7ebf\u66ff\u6362\u4efb\u4f55\u8fde\u5b57\u7b26\u5e76HTTP_\u5728\u540d\u79f0\u4e2d\u6dfb\u52a0\u524d\u7f00\u3002\u56e0\u6b64\uff0c\u4f8b\u5982\uff0c\u8c03\u7528\u7684\u6807\u5934X-Bender\u5c06\u6620\u5c04\u5230META\u5bc6\u94a5 HTTP_X_BENDER\u3002","title":"request.META"},{"location":"django/4_django\u4e2d\u7684session\u548ccookie/","text":"session \u548c cookie django \u4e2d\u4f7f\u7528 cookies \u8bbe\u7f6ecookies \u7684\u503c\uff08\u5c06\u6570\u636e\u4fdd\u5b58\u5230\u5ba2\u6237\u7aef\uff09 \u8bed\u6cd5\uff1a \u54cd\u5e94\u5bf9\u8c61.set_cookie(key, value, expires) ```python # \u4e0d\u4f7f\u7528\u6a21\u677f resp = HttpResponse('xxx') resp.set_cookie(key, value, expires) return resp # \u4f7f\u7528\u6a21\u677f resp = render(request, 'xxx.html', context) resp.set_cookie(key, value, expires) return resp # \u4f7f\u7528\u91cd\u5b9a\u5411 resp = redirect(request, 'xxx.html') resp.set_cookie(key, value, expires) return resp ``` \u83b7\u53d6cookies \u7684\u503c \u4f34\u968f\u8bf7\u6c42\u5bf9\u8c61\u5230\u8fbe\u670d\u52a1\u5668\u540e\u518d\u83b7\u53d6cookie\u7684\u503c request.COOKIES: \u5c01\u88c5\u4e86\u5f53\u524d\u8bbf\u95ee\u7ad9\u70b9\u4e0b\u6240\u6709cookie\u7684\u4fe1\u606f \u5220\u9664cookie \u7684\u503c \u5ba2\u6237\u7aef\uff1a\u6e05\u9664\u6d4f\u89c8\u5668cookie \u670d\u52a1\u7aef\uff1aresp.delete_cookie(key) django \u4e2d\u4f7f\u7528 session \u8bbe\u7f6esession\u7684\u503c\uff08\u5c06\u6570\u636e\u4fdd\u5b58\u5230\u670d\u52a1\u7aef\uff09 \u8bed\u6cd5\uff1a request.session['key'] = value \u83b7\u53d6session \u7684\u503c python request.session['key'] request.session.get('key') \u5220\u9664session\u7684\u503c python del request.session['key'] \u6709\u5173 session \u7684\u914d\u7f6e \u5728 settings.py \u4e2d\u6709\u5173session\u7684\u8bbe\u7f6e SESSION_COOKIE_AGE \u8bbe\u7f6esessionID\u5728cookies\u4e2d\u7684\u5b58\u6d3b\u65f6\u95f4 python SESSION_COOKIE_AGE = 60*30 # 30s SESSION_EXPIRE_AT_BROWSER_CLOSE \u8bbe\u7f6e\u6d4f\u89c8\u5668\u5173\u95ed\u65f6\u5219\u6e05\u9664\u670d\u52a1\u5668\u4e0a\u5bf9\u5e94\u7684session\u7a7a\u95f4 python SESSION_EXPIRE_AT_BROWSER_CLOSE = True","title":"session\u548ccookie"},{"location":"django/4_django\u4e2d\u7684session\u548ccookie/#session-cookie","text":"","title":"session \u548c cookie"},{"location":"django/4_django\u4e2d\u7684session\u548ccookie/#django-cookies","text":"\u8bbe\u7f6ecookies \u7684\u503c\uff08\u5c06\u6570\u636e\u4fdd\u5b58\u5230\u5ba2\u6237\u7aef\uff09 \u8bed\u6cd5\uff1a \u54cd\u5e94\u5bf9\u8c61.set_cookie(key, value, expires) ```python # \u4e0d\u4f7f\u7528\u6a21\u677f resp = HttpResponse('xxx') resp.set_cookie(key, value, expires) return resp # \u4f7f\u7528\u6a21\u677f resp = render(request, 'xxx.html', context) resp.set_cookie(key, value, expires) return resp # \u4f7f\u7528\u91cd\u5b9a\u5411 resp = redirect(request, 'xxx.html') resp.set_cookie(key, value, expires) return resp ``` \u83b7\u53d6cookies \u7684\u503c \u4f34\u968f\u8bf7\u6c42\u5bf9\u8c61\u5230\u8fbe\u670d\u52a1\u5668\u540e\u518d\u83b7\u53d6cookie\u7684\u503c request.COOKIES: \u5c01\u88c5\u4e86\u5f53\u524d\u8bbf\u95ee\u7ad9\u70b9\u4e0b\u6240\u6709cookie\u7684\u4fe1\u606f \u5220\u9664cookie \u7684\u503c \u5ba2\u6237\u7aef\uff1a\u6e05\u9664\u6d4f\u89c8\u5668cookie \u670d\u52a1\u7aef\uff1aresp.delete_cookie(key)","title":"django \u4e2d\u4f7f\u7528 cookies"},{"location":"django/4_django\u4e2d\u7684session\u548ccookie/#django-session","text":"\u8bbe\u7f6esession\u7684\u503c\uff08\u5c06\u6570\u636e\u4fdd\u5b58\u5230\u670d\u52a1\u7aef\uff09 \u8bed\u6cd5\uff1a request.session['key'] = value \u83b7\u53d6session \u7684\u503c python request.session['key'] request.session.get('key') \u5220\u9664session\u7684\u503c python del request.session['key'] \u6709\u5173 session \u7684\u914d\u7f6e \u5728 settings.py \u4e2d\u6709\u5173session\u7684\u8bbe\u7f6e SESSION_COOKIE_AGE \u8bbe\u7f6esessionID\u5728cookies\u4e2d\u7684\u5b58\u6d3b\u65f6\u95f4 python SESSION_COOKIE_AGE = 60*30 # 30s SESSION_EXPIRE_AT_BROWSER_CLOSE \u8bbe\u7f6e\u6d4f\u89c8\u5668\u5173\u95ed\u65f6\u5219\u6e05\u9664\u670d\u52a1\u5668\u4e0a\u5bf9\u5e94\u7684session\u7a7a\u95f4 python SESSION_EXPIRE_AT_BROWSER_CLOSE = True","title":"django \u4e2d\u4f7f\u7528 session"},{"location":"django/5_django\u4e2d\u7684\u6a21\u677f/","text":"django \u4e2d\u7684\u6a21\u677f\uff0cTemplates \u6a21\u677f\u7684\u5b9a\u4e49 \u6a21\u677f\u5c31\u662f\u8981\u52a8\u6001\u5448\u73b0\u7ed9\u7528\u6237\u7684\u7f51\u9875 \u6a21\u677f\u7684\u672c\u8d28\u5c31\u662f\u7f51\u9875\uff0c\u524d\u540e\u7aef\uff0c \u52a8\u9759\u7ed3\u5408\u7684\u7f51\u9875 django\u4e2d\u7684\u6a21\u677f\u5f15\u64ce\u662f\u7531django\u81ea\u5df1\u63d0\u4f9b\u7684\uff0c\u800c\u5e76\u975eJinja2\uff0c\u6240\u4ee5Django\u4e2d\u7684\u6a21\u677f\u7684\u8bed\u6cd5\u4e0eflask(Jinja2)\u7684\u8bed\u6cd5\u4f1a\u7a0d\u6709\u4e0d\u540c Django\u6a21\u677f\u7684\u8bbe\u7f6e \u5728setting.py\u4e2d\u8bbe\u7f6e TEMPLATES \u7684\u53d8\u91cf TEMPLATES = [ { 'BACKEND': 'django.template.backends.django.DjangoTemplates', 'DIRS': [], 'APP_DIRS': True, 'OPTIONS': { 'context_processors': [ 'django.template.context_processors.debug', 'django.template.context_processors.request', 'django.contrib.auth.context_processors.auth', 'django.contrib.messages.context_processors.messages', ], }, }, ] \u53c2\u6570\u8bf4\u660e BACKEND \uff1a \u6307\u5b9a\u4f7f\u7528\u7684\u6a21\u677f\u7684\u5f15\u64ce DIRS \uff1a \u6307\u5b9a\u6a21\u677f\u7684\u5b58\u653e\u76ee\u5f55\u4eec\uff0c\u4e00\u822c\u7528\u6839\u76ee\u5f55\u4e0b\u7684\u8fd9\u79cd\uff08\u7b2c\u4e00\u79cd\uff09 # \u5728\u9879\u76ee\u7684\u6839\u76ee\u5f55\u7684templates\u76ee\u5f55\u4e2d\u5b58\u653e\u6240\u6709\u6a21\u677f DIRS = [os.path.join(BASE_DIR, 'templates')] # \u5728\u9879\u76ee\u7684index\u5e94\u7528\u4e2d\u7684temp\u76ee\u5f55\u4e2d\u5b58\u653e\u6a21\u677f\uff0c\u4ee5\u53ca\u5728\u9879\u76ee\u7684music\u5e94\u7528\u4e2d\u7684temp\u76ee\u5f55\u4e2d\u5b58\u653e\u6a21\u677f DIRS = ['index.temp', 'music.temp'] APP_DIRS \uff1a \u8868\u793a\u662f\u5426\u81ea\u52a8\u641c\u7d22\u5e94\u7528\u4e2d\u7684\u76ee\u5f55 \uff0c True: \u8868\u793a\u8981\u81ea\u52a8\u641c\u7d22\u5e94\u7528\u4e2d\u7684templates\u7684\u76ee\u5f55\u3002 \u6a21\u677f\u7684\u52a0\u8f7d\u65b9\u5f0f \u901a\u8fc7loader \u5bf9\u8c61\u83b7\u53d6\u6a21\u677f\uff0c\u518d\u901a\u8fc7HttpResponse\u8fdb\u884c\u54cd\u5e94 ```python # \u5148\u5bfc\u5165loader # \u901a\u8fc7loader\u52a0\u8f7d\u6a21\u677f # \u5c06\u52a0\u8f7d\u597d\u7684\u6a21\u677f\u6e32\u67d3\u6210\u5b57\u7b26\u4e32 # \u901a\u8fc7HttpResponse \u5c06\u5b57\u7b26\u4e32\u8fdb\u884c\u54cd\u5e94 from django.template import loader def index_view(self, request, args, *kwargs): template = loader.get_template('index.html') template = template.render() return HttpResponse(template) ``` \u4f7f\u7528render \u76f4\u63a5\u52a0\u8f7d\u5e76\u54cd\u5e94\u6a21\u677f python return render(request, \"name\") \u6a21\u677f\u7684\u8bed\u6cd5 \u53d8\u91cf \u4f5c\u7528\uff1a \u5c06\u540e\u7aef\u7684\u6570\u636e\u4f20\u9012\u5230\u6a21\u677f\u4e0a\u8fdb\u884c\u663e\u793a\u3002 \u6570\u636e\u7c7b\u578b\uff1a \u5b57\u7b26\u4e32, \u6574\u6570, \u5217\u8868, \u5143\u7956, \u5b57\u5178, \u51fd\u6570\u5bf9\u8c61\u3002 \u8bed\u6cd5\u89c4\u8303\uff1a\u53d8\u91cf\u5fc5\u987b\u8981\u5c01\u88c5\u5230\u5b57\u5178\u4e2d\u53c2\u80fd\u4f20\u9012\u7ed9\u6a21\u677f\u3002 # views.py def var(request): context = { 'name': '\u738b\u8001\u5e08', 'age': 30, 'gender': '\u7537', \"message\": '\u5929\u4e0b\u6ca1\u6709\u5403\u4e0d\u6563\u7684\u5bb4\u5e2d', 'tuple': ('\u738b\u8001\u5e08', 'MrRang', 'Rap Wang'), 'list': ['!!!!!', '@@@@@', '#####'], 'dic': { 'bj': '\u5317\u4eac', 'sy': '\u6c88\u9633', 'cc': '\u957f\u6625', }, 'show_message': show_message, 'dog': Dog(name='\u65fa\u8d22'), 'lst': [1, 2, 3, 4, 5, 6] } return render(request, \"two_day/var.html\", context) #var.html <!DOCTYPE html> <html> <head> <meta charset=\"UTF-8\"> <title>\u53d8\u91cf\u6f14\u793a</title> </head> <body> {% comment \"\u6ce8\u91caname\" %} <h3>\u559c\u6b22\u7684\u4e00\u53e5\u8bdd: {{ message }}</h3> {% endcomment %} <h3>\u59d3\u540d\uff1a{{ name }}</h3> <h3>\u5e74\u9f84\uff1a{{ age }}</h3> <h3>\u6027\u522b\uff1a{{ gender }}</h3> <h3>tuple[0]: {{ tuple.0 }}</h3> <h3>tuple[1]: {{ tuple.1 }}</h3> <h3>tuple[2]: {{ tuple.2 }}</h3> <h3>list[0]: {{ list.0 }}</h3> <h3>{{ dic.bj }}</h3> <h3>{{ show_message }}</h3> <h3>{{ dog.name }}</h3> <h3>{{ dog.age }}</h3> <h3>{{ dog.eat }}</h3> {% for l in list %} {% if forloop.first %} <h2 style=\"background: red;\"> {% elif forloop.last %} <h2 style=\"background-color: yellow;\"> {% else %} <h2 style=\"background-color: pink;\"> {% endif %} <p>\u59d3\u540d{{ l }}</p> <p>counter: {{ forloop.counter }}</p> <p>counter0: {{ forloop.counter0 }}</p> <p>revcounter: {{ forloop.revcounter }}</p> <p>revcounter0: {{ forloop.revcounter0 }}</p> </h2> {% endfor %} {% for l in lst %} {% if forloop.counter|divisibleby:\"2\" %} <p style=\"background-color: red\">{{ l }}</p> {% else %} <p>{{ l }}</p> {% endif %} {% endfor %} </body> </html> \u6807\u7b7e \u4f5c\u7528\uff1a\u5c06\u670d\u52a1\u5668\u7684\u529f\u80fd\u5d4c\u5165\u5230\u6a21\u677f\u4e2d\u3002 \u8bed\u6cd5\uff1a {% \u6807\u7b7e\u540d %} {% end\u6807\u7b7e\u540d %} \u5e38\u7528\u7684\u6807\u7b7e if {% if %} {% elif %} {% else %} {% endif %} for {% for \u53d8\u91cf in iterable %} {% endfor %} \u5185\u7f6e\u53d8\u91cf forloop \u5728\u5faa\u73af\u4e2d\u5141\u8bb8\u4f7f\u7528forloop\u5185\u7f6e\u53d8\u91cf\u6765\u83b7\u53d6\u5faa\u73af\u7684\u4fe1\u606f forloop.counter: \u8bb0\u5f55\u5f53\u524d\u5faa\u73af\u904d\u5386\u7684\u6b21\u6570 forloop.counter0: \u8bb0\u5f55\u5f53\u524d\u5faa\u73af\u904d\u5386\u7684\u6b21\u6570\uff0c\u4ece0\u5f00\u59cb forloop.revcounter: \u8bb0\u5f55\u5f53\u524d\u5143\u7d20\u4ece\u540e\u5411\u524d\u7b97\u7684\u4f4d\u7f6e forloop.revcounter0: \u8bb0\u5f55\u5f53\u524d\u5143\u7d20\u4ece\u540e\u5411\u524d\u7b97\u7684 forloop.first: \u5224\u65ad\u662f\u5426\u662f\u7b2c\u4e00\u6b21\u7684\u5faa\u73af forloop.last: \u5224\u65ad\u662f\u5426\u662f\u6700\u540e\u4e00\u6b21\u7684\u5faa\u73af \u8fc7\u6ee4\u5668 \u4f5c\u7528\uff1a \u5728\u53d8\u91cf\u8f93\u51fa\u4e4b\u524d\uff0c\u5bf9\u53d8\u91cf\u7684\u6570\u636e\u8fdb\u884c\u7b5b\u9009\u548c\u8fc7\u6ee4 \u3002 \u8bed\u6cd5\uff1a {{ \u53d8\u91cf|\u8fc7\u6ee4\u5668:\u53c2\u6570 }} \u5e38\u7528\u8fc7\u6ee4\u5668: \u200b (\u5176\u4ed6\u9700\u6c42\u53ef\u4ee5\u53c2\u8003\u5b98\u7f51\uff0c\u4e5f\u53ef\u4ee5\u81ea\u5df1\u5b9a\u4e49\u8fc7\u6ee4\u5668) {{ value | upper }} \u5c06value\u8f6c\u4e3a\u5927\u5199 {{ value | lower }} \u5c06value\u8f6c\u4e3a\u5c0f\u5199 {{ value | add:num }} \u5c06num\u8ffd\u52a0\u5230value\u4e4b\u540e, value \u548c num \u53ef\u4ee5\u662f\u5217\u8868 {{ value | truncatechars:n }} \u5c06value\u622a\u53d6n\u4e3a\u5b57\u7b26\uff0c\u540e\u9762\u4ee5...\u6765\u663e\u793a \u9759\u6001\u6587\u4ef6\u7684\u5904\u7406 \u5b9a\u4e49\uff1a\u65e0\u6cd5\u4e0e\u670d\u52a1\u5668\u8fdb\u884c\u52a8\u6001\u4ea4\u4e92\u7684\u6587\u4ef6\u3002 django\u4e2d\u9759\u6001\u6587\u4ef6\u7684\u5904\u7406\uff1a\u5728 setting.py \u4e2d\u8bbe\u7f6e\u6709\u5173\u9759\u6001\u6587\u4ef6\u7684\u4fe1\u606f \u8bbe\u7f6e\u9759\u6001\u6587\u4ef6\u7684\u8bbf\u95ee\u8def\u5f84 \u5728\u6d4f\u89c8\u5668\u4e2d\u901a\u8fc7\u90a3\u4e2a\u5730\u5740\u80fd\u591f\u627e\u5230\u9759\u6001\u6587\u4ef6 python STATIC_URL = '/static/' \u5982\u679c\u8bbf\u95ee\u8def\u5f84\u662f http://localhost:8000/static/...\uff0c\u4e00\u5f8b\u90fd\u6309\u7167\u9759\u6001\u6587\u4ef6\u7684\u65b9\u5f0f\u53bb\u67e5\u627e\uff0c\u4e0d\u7ecf\u8fc7\u8def\u7531 \u8bbe\u7f6e\u9759\u6001\u6587\u4ef6\u7684\u5b58\u50a8\u8def\u5f84 \u6307\u5b9a\u9759\u6001\u6587\u4ef6\u8981\u4fdd\u5b58\u5728\u670d\u52a1\u5668\u4e0a\u54ea\u4e2a\u76ee\u5f55\u5904 python STATICFILES_DIRS = (os.path.join(BASE_DIR, 'static'),) \u9759\u6001\u6587\u4ef6\u76ee\u5f55\u7684\u5b58\u653e\u4f4d\u7f6e : \u5728\u9879\u76ee\u7684\u6839\u76ee\u5f55\u53bb\u521b\u5efa\u4e00\u4e2astatic\uff0c\u7528\u6765\u4fdd\u5b58\u9759\u6001\u6587\u4ef6 \u8bbf\u95ee\u9759\u6001\u6587\u4ef6 \u76f4\u63a5\u4f7f\u7528\u9759\u6001\u6587\u4ef6\u8bbf\u95ee\u8def\u5f84\u8fdb\u884c\u8bbf\u95ee http://localhost:8000/static/... \u4f7f\u7528{% static %} \u8bbf\u95ee\u9759\u6001\u8d44\u6e90 \u5728\u4f7f\u7528\u4e4b\u524d\u9700\u8981\u901a\u8fc7{% load static %} \u52a0\u8f7dstatic \u4f7f\u7528\u9759\u6001\u8d44\u6e90\u65f6: <img src=\"{% static \"images/1.jpg\" %}\"> \u6a21\u677f\u7684\u7ee7\u627f \u4f5c\u7528\uff1a\u4e0d\u540c\u7684\u6a21\u677fblock\u6807\u7b7e\u91cc\u5185\u5bb9\u6709\u5dee\u522b\uff0c\u4e0d\u5728block\u91cc\u7684\u5185\u5bb9\u539f\u6837\u8f93\u51fa\uff0c\u53c2\u6570\u7c7b\u7ee7\u627f\u5c31\u660e\u767d\u4e86\u3002 \u7ee7\u627f\u8bed\u6cd5\uff1a # \u7236\u6a21\u677f {% block \u540d\u79f0 %} {% endblock %} # \u5b50\u6a21\u677f {% extends \"\u7236\u6a21\u677f\u7684\u540d\u79f0\" %} \u53cd\u5411\u89e3\u6790: \u8def\u7531\u5339\u914d\u662f\u901a\u8fc7url\u627e\u5bf9\u5e94\u7684\u8bd5\u56fe\u51fd\u6570\uff0c\u53cd\u5411\u89e3\u6790\u5219\u76f8\u53cd\u3002 # \u6a21\u677f\u91cc\u7684\u53cd\u5411\u89e3\u6790 {% url \"name\" \"arg\" \"\" %} # \u89c6\u56fe\u91cc\u7684\u53cd\u5411\u89e3\u6790 reverse(name, agrs=(arg1, arg2))","title":"django\u4e2d\u7684\u6a21\u677f"},{"location":"django/5_django\u4e2d\u7684\u6a21\u677f/#django-templates","text":"","title":"django \u4e2d\u7684\u6a21\u677f\uff0cTemplates"},{"location":"django/5_django\u4e2d\u7684\u6a21\u677f/#_1","text":"\u6a21\u677f\u5c31\u662f\u8981\u52a8\u6001\u5448\u73b0\u7ed9\u7528\u6237\u7684\u7f51\u9875 \u6a21\u677f\u7684\u672c\u8d28\u5c31\u662f\u7f51\u9875\uff0c\u524d\u540e\u7aef\uff0c \u52a8\u9759\u7ed3\u5408\u7684\u7f51\u9875 django\u4e2d\u7684\u6a21\u677f\u5f15\u64ce\u662f\u7531django\u81ea\u5df1\u63d0\u4f9b\u7684\uff0c\u800c\u5e76\u975eJinja2\uff0c\u6240\u4ee5Django\u4e2d\u7684\u6a21\u677f\u7684\u8bed\u6cd5\u4e0eflask(Jinja2)\u7684\u8bed\u6cd5\u4f1a\u7a0d\u6709\u4e0d\u540c","title":"\u6a21\u677f\u7684\u5b9a\u4e49"},{"location":"django/5_django\u4e2d\u7684\u6a21\u677f/#django","text":"\u5728setting.py\u4e2d\u8bbe\u7f6e TEMPLATES \u7684\u53d8\u91cf TEMPLATES = [ { 'BACKEND': 'django.template.backends.django.DjangoTemplates', 'DIRS': [], 'APP_DIRS': True, 'OPTIONS': { 'context_processors': [ 'django.template.context_processors.debug', 'django.template.context_processors.request', 'django.contrib.auth.context_processors.auth', 'django.contrib.messages.context_processors.messages', ], }, }, ] \u53c2\u6570\u8bf4\u660e BACKEND \uff1a \u6307\u5b9a\u4f7f\u7528\u7684\u6a21\u677f\u7684\u5f15\u64ce DIRS \uff1a \u6307\u5b9a\u6a21\u677f\u7684\u5b58\u653e\u76ee\u5f55\u4eec\uff0c\u4e00\u822c\u7528\u6839\u76ee\u5f55\u4e0b\u7684\u8fd9\u79cd\uff08\u7b2c\u4e00\u79cd\uff09 # \u5728\u9879\u76ee\u7684\u6839\u76ee\u5f55\u7684templates\u76ee\u5f55\u4e2d\u5b58\u653e\u6240\u6709\u6a21\u677f DIRS = [os.path.join(BASE_DIR, 'templates')] # \u5728\u9879\u76ee\u7684index\u5e94\u7528\u4e2d\u7684temp\u76ee\u5f55\u4e2d\u5b58\u653e\u6a21\u677f\uff0c\u4ee5\u53ca\u5728\u9879\u76ee\u7684music\u5e94\u7528\u4e2d\u7684temp\u76ee\u5f55\u4e2d\u5b58\u653e\u6a21\u677f DIRS = ['index.temp', 'music.temp'] APP_DIRS \uff1a \u8868\u793a\u662f\u5426\u81ea\u52a8\u641c\u7d22\u5e94\u7528\u4e2d\u7684\u76ee\u5f55 \uff0c True: \u8868\u793a\u8981\u81ea\u52a8\u641c\u7d22\u5e94\u7528\u4e2d\u7684templates\u7684\u76ee\u5f55\u3002","title":"Django\u6a21\u677f\u7684\u8bbe\u7f6e"},{"location":"django/5_django\u4e2d\u7684\u6a21\u677f/#_2","text":"\u901a\u8fc7loader \u5bf9\u8c61\u83b7\u53d6\u6a21\u677f\uff0c\u518d\u901a\u8fc7HttpResponse\u8fdb\u884c\u54cd\u5e94 ```python # \u5148\u5bfc\u5165loader # \u901a\u8fc7loader\u52a0\u8f7d\u6a21\u677f # \u5c06\u52a0\u8f7d\u597d\u7684\u6a21\u677f\u6e32\u67d3\u6210\u5b57\u7b26\u4e32 # \u901a\u8fc7HttpResponse \u5c06\u5b57\u7b26\u4e32\u8fdb\u884c\u54cd\u5e94 from django.template import loader def index_view(self, request, args, *kwargs): template = loader.get_template('index.html') template = template.render() return HttpResponse(template) ``` \u4f7f\u7528render \u76f4\u63a5\u52a0\u8f7d\u5e76\u54cd\u5e94\u6a21\u677f python return render(request, \"name\")","title":"\u6a21\u677f\u7684\u52a0\u8f7d\u65b9\u5f0f"},{"location":"django/5_django\u4e2d\u7684\u6a21\u677f/#_3","text":"","title":"\u6a21\u677f\u7684\u8bed\u6cd5"},{"location":"django/5_django\u4e2d\u7684\u6a21\u677f/#_4","text":"\u4f5c\u7528\uff1a \u5c06\u540e\u7aef\u7684\u6570\u636e\u4f20\u9012\u5230\u6a21\u677f\u4e0a\u8fdb\u884c\u663e\u793a\u3002 \u6570\u636e\u7c7b\u578b\uff1a \u5b57\u7b26\u4e32, \u6574\u6570, \u5217\u8868, \u5143\u7956, \u5b57\u5178, \u51fd\u6570\u5bf9\u8c61\u3002 \u8bed\u6cd5\u89c4\u8303\uff1a\u53d8\u91cf\u5fc5\u987b\u8981\u5c01\u88c5\u5230\u5b57\u5178\u4e2d\u53c2\u80fd\u4f20\u9012\u7ed9\u6a21\u677f\u3002 # views.py def var(request): context = { 'name': '\u738b\u8001\u5e08', 'age': 30, 'gender': '\u7537', \"message\": '\u5929\u4e0b\u6ca1\u6709\u5403\u4e0d\u6563\u7684\u5bb4\u5e2d', 'tuple': ('\u738b\u8001\u5e08', 'MrRang', 'Rap Wang'), 'list': ['!!!!!', '@@@@@', '#####'], 'dic': { 'bj': '\u5317\u4eac', 'sy': '\u6c88\u9633', 'cc': '\u957f\u6625', }, 'show_message': show_message, 'dog': Dog(name='\u65fa\u8d22'), 'lst': [1, 2, 3, 4, 5, 6] } return render(request, \"two_day/var.html\", context) #var.html <!DOCTYPE html> <html> <head> <meta charset=\"UTF-8\"> <title>\u53d8\u91cf\u6f14\u793a</title> </head> <body> {% comment \"\u6ce8\u91caname\" %} <h3>\u559c\u6b22\u7684\u4e00\u53e5\u8bdd: {{ message }}</h3> {% endcomment %} <h3>\u59d3\u540d\uff1a{{ name }}</h3> <h3>\u5e74\u9f84\uff1a{{ age }}</h3> <h3>\u6027\u522b\uff1a{{ gender }}</h3> <h3>tuple[0]: {{ tuple.0 }}</h3> <h3>tuple[1]: {{ tuple.1 }}</h3> <h3>tuple[2]: {{ tuple.2 }}</h3> <h3>list[0]: {{ list.0 }}</h3> <h3>{{ dic.bj }}</h3> <h3>{{ show_message }}</h3> <h3>{{ dog.name }}</h3> <h3>{{ dog.age }}</h3> <h3>{{ dog.eat }}</h3> {% for l in list %} {% if forloop.first %} <h2 style=\"background: red;\"> {% elif forloop.last %} <h2 style=\"background-color: yellow;\"> {% else %} <h2 style=\"background-color: pink;\"> {% endif %} <p>\u59d3\u540d{{ l }}</p> <p>counter: {{ forloop.counter }}</p> <p>counter0: {{ forloop.counter0 }}</p> <p>revcounter: {{ forloop.revcounter }}</p> <p>revcounter0: {{ forloop.revcounter0 }}</p> </h2> {% endfor %} {% for l in lst %} {% if forloop.counter|divisibleby:\"2\" %} <p style=\"background-color: red\">{{ l }}</p> {% else %} <p>{{ l }}</p> {% endif %} {% endfor %} </body> </html>","title":"\u53d8\u91cf"},{"location":"django/5_django\u4e2d\u7684\u6a21\u677f/#_5","text":"\u4f5c\u7528\uff1a\u5c06\u670d\u52a1\u5668\u7684\u529f\u80fd\u5d4c\u5165\u5230\u6a21\u677f\u4e2d\u3002 \u8bed\u6cd5\uff1a {% \u6807\u7b7e\u540d %} {% end\u6807\u7b7e\u540d %} \u5e38\u7528\u7684\u6807\u7b7e if {% if %} {% elif %} {% else %} {% endif %} for {% for \u53d8\u91cf in iterable %} {% endfor %} \u5185\u7f6e\u53d8\u91cf forloop \u5728\u5faa\u73af\u4e2d\u5141\u8bb8\u4f7f\u7528forloop\u5185\u7f6e\u53d8\u91cf\u6765\u83b7\u53d6\u5faa\u73af\u7684\u4fe1\u606f forloop.counter: \u8bb0\u5f55\u5f53\u524d\u5faa\u73af\u904d\u5386\u7684\u6b21\u6570 forloop.counter0: \u8bb0\u5f55\u5f53\u524d\u5faa\u73af\u904d\u5386\u7684\u6b21\u6570\uff0c\u4ece0\u5f00\u59cb forloop.revcounter: \u8bb0\u5f55\u5f53\u524d\u5143\u7d20\u4ece\u540e\u5411\u524d\u7b97\u7684\u4f4d\u7f6e forloop.revcounter0: \u8bb0\u5f55\u5f53\u524d\u5143\u7d20\u4ece\u540e\u5411\u524d\u7b97\u7684 forloop.first: \u5224\u65ad\u662f\u5426\u662f\u7b2c\u4e00\u6b21\u7684\u5faa\u73af forloop.last: \u5224\u65ad\u662f\u5426\u662f\u6700\u540e\u4e00\u6b21\u7684\u5faa\u73af","title":"\u6807\u7b7e"},{"location":"django/5_django\u4e2d\u7684\u6a21\u677f/#_6","text":"\u4f5c\u7528\uff1a \u5728\u53d8\u91cf\u8f93\u51fa\u4e4b\u524d\uff0c\u5bf9\u53d8\u91cf\u7684\u6570\u636e\u8fdb\u884c\u7b5b\u9009\u548c\u8fc7\u6ee4 \u3002 \u8bed\u6cd5\uff1a {{ \u53d8\u91cf|\u8fc7\u6ee4\u5668:\u53c2\u6570 }} \u5e38\u7528\u8fc7\u6ee4\u5668: \u200b (\u5176\u4ed6\u9700\u6c42\u53ef\u4ee5\u53c2\u8003\u5b98\u7f51\uff0c\u4e5f\u53ef\u4ee5\u81ea\u5df1\u5b9a\u4e49\u8fc7\u6ee4\u5668) {{ value | upper }} \u5c06value\u8f6c\u4e3a\u5927\u5199 {{ value | lower }} \u5c06value\u8f6c\u4e3a\u5c0f\u5199 {{ value | add:num }} \u5c06num\u8ffd\u52a0\u5230value\u4e4b\u540e, value \u548c num \u53ef\u4ee5\u662f\u5217\u8868 {{ value | truncatechars:n }} \u5c06value\u622a\u53d6n\u4e3a\u5b57\u7b26\uff0c\u540e\u9762\u4ee5...\u6765\u663e\u793a","title":"\u8fc7\u6ee4\u5668"},{"location":"django/5_django\u4e2d\u7684\u6a21\u677f/#_7","text":"\u5b9a\u4e49\uff1a\u65e0\u6cd5\u4e0e\u670d\u52a1\u5668\u8fdb\u884c\u52a8\u6001\u4ea4\u4e92\u7684\u6587\u4ef6\u3002 django\u4e2d\u9759\u6001\u6587\u4ef6\u7684\u5904\u7406\uff1a\u5728 setting.py \u4e2d\u8bbe\u7f6e\u6709\u5173\u9759\u6001\u6587\u4ef6\u7684\u4fe1\u606f \u8bbe\u7f6e\u9759\u6001\u6587\u4ef6\u7684\u8bbf\u95ee\u8def\u5f84 \u5728\u6d4f\u89c8\u5668\u4e2d\u901a\u8fc7\u90a3\u4e2a\u5730\u5740\u80fd\u591f\u627e\u5230\u9759\u6001\u6587\u4ef6 python STATIC_URL = '/static/' \u5982\u679c\u8bbf\u95ee\u8def\u5f84\u662f http://localhost:8000/static/...\uff0c\u4e00\u5f8b\u90fd\u6309\u7167\u9759\u6001\u6587\u4ef6\u7684\u65b9\u5f0f\u53bb\u67e5\u627e\uff0c\u4e0d\u7ecf\u8fc7\u8def\u7531 \u8bbe\u7f6e\u9759\u6001\u6587\u4ef6\u7684\u5b58\u50a8\u8def\u5f84 \u6307\u5b9a\u9759\u6001\u6587\u4ef6\u8981\u4fdd\u5b58\u5728\u670d\u52a1\u5668\u4e0a\u54ea\u4e2a\u76ee\u5f55\u5904 python STATICFILES_DIRS = (os.path.join(BASE_DIR, 'static'),) \u9759\u6001\u6587\u4ef6\u76ee\u5f55\u7684\u5b58\u653e\u4f4d\u7f6e : \u5728\u9879\u76ee\u7684\u6839\u76ee\u5f55\u53bb\u521b\u5efa\u4e00\u4e2astatic\uff0c\u7528\u6765\u4fdd\u5b58\u9759\u6001\u6587\u4ef6 \u8bbf\u95ee\u9759\u6001\u6587\u4ef6 \u76f4\u63a5\u4f7f\u7528\u9759\u6001\u6587\u4ef6\u8bbf\u95ee\u8def\u5f84\u8fdb\u884c\u8bbf\u95ee http://localhost:8000/static/... \u4f7f\u7528{% static %} \u8bbf\u95ee\u9759\u6001\u8d44\u6e90 \u5728\u4f7f\u7528\u4e4b\u524d\u9700\u8981\u901a\u8fc7{% load static %} \u52a0\u8f7dstatic \u4f7f\u7528\u9759\u6001\u8d44\u6e90\u65f6: <img src=\"{% static \"images/1.jpg\" %}\">","title":"\u9759\u6001\u6587\u4ef6\u7684\u5904\u7406"},{"location":"django/5_django\u4e2d\u7684\u6a21\u677f/#_8","text":"\u4f5c\u7528\uff1a\u4e0d\u540c\u7684\u6a21\u677fblock\u6807\u7b7e\u91cc\u5185\u5bb9\u6709\u5dee\u522b\uff0c\u4e0d\u5728block\u91cc\u7684\u5185\u5bb9\u539f\u6837\u8f93\u51fa\uff0c\u53c2\u6570\u7c7b\u7ee7\u627f\u5c31\u660e\u767d\u4e86\u3002 \u7ee7\u627f\u8bed\u6cd5\uff1a # \u7236\u6a21\u677f {% block \u540d\u79f0 %} {% endblock %} # \u5b50\u6a21\u677f {% extends \"\u7236\u6a21\u677f\u7684\u540d\u79f0\" %} \u53cd\u5411\u89e3\u6790: \u8def\u7531\u5339\u914d\u662f\u901a\u8fc7url\u627e\u5bf9\u5e94\u7684\u8bd5\u56fe\u51fd\u6570\uff0c\u53cd\u5411\u89e3\u6790\u5219\u76f8\u53cd\u3002 # \u6a21\u677f\u91cc\u7684\u53cd\u5411\u89e3\u6790 {% url \"name\" \"arg\" \"\" %} # \u89c6\u56fe\u91cc\u7684\u53cd\u5411\u89e3\u6790 reverse(name, agrs=(arg1, arg2))","title":"\u6a21\u677f\u7684\u7ee7\u627f"},{"location":"django/6_django\u4e2d\u7684\u6a21\u578b/","text":"Django\u4e2d\u7684\u6a21\u578b ORM \u5bf9\u8c61\u5173\u7cfb\u6620\u5c04\uff08Object Relational Mapping\uff09\uff1a\u901a\u8fc7\u4f7f\u7528\u63cf\u8ff0\u5bf9\u8c61\u548c\u6570\u636e\u5e93\u4e4b\u95f4\u6620\u5c04\u7684\u5143\u6570\u636e\uff0c\u5c06\u9762\u5411\u5bf9\u8c61\u8bed\u8a00\u7a0b\u5e8f\u4e2d\u7684\u5bf9\u8c61\u81ea\u52a8\u6301\u4e45\u5316\u5230\u5173\u7cfb\u6570\u636e\u5e93\u4e2d\u3002 \u6620\u5c04\u5173\u7cfb model db \u5b9e\u4f53\u7c7b \u8868\u540d \u7c7b\u5c5e\u6027 \u8868\u5b57\u6bb5 \u7c7b\u5b9e\u4f8b \u8868\u8bb0\u5f55 \u6570\u636e\u5e93\u914d\u7f6e \u5728 setting.py \u4e2d\u914d\u7f6e\u6570\u636e\u5e93\u4fe1\u606f DATABASES = { 'default': { 'ENGINE': 'django.db.backends.mysql', 'NAME': 'db_name', 'USER': 'root', 'PASSWORD': '123456', 'HOST': '127.0.0.1', 'PORT': 3306, } } \u53c2\u6570\u8bf4\u660e\uff1a ENGINE \uff1a # \u53ef\u9009\u503c\u6709\uff0c\u5206\u522b\u5bf9\u5e94\u4e0d\u540c\u7684\u6570\u636e\u5e93 django.db.backends.sqlite3 django.db.backends.postgresql django.db.backends.mysql django.db.backends.oracle NAME \uff1a\u6570\u636e\u5e93\u7684\u540d\u79f0\u3002\u5982\u679c\u4f7f\u7528\u7684\u662f SQLite\uff0c\u6570\u636e\u5e93\u5c06\u662f\u4f60\u7535\u8111\u4e0a\u7684\u4e00\u4e2a\u6587\u4ef6\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c NAME \u5e94\u8be5\u662f\u6b64\u6587\u4ef6\u7684\u7edd\u5bf9\u8def\u5f84\uff0c\u5305\u62ec\u6587\u4ef6\u540d\u3002 \u5982\u679c\u4f60\u4e0d\u4f7f\u7528 SQLite\uff0c\u5219\u5fc5\u987b\u6dfb\u52a0\u4e00\u4e9b\u989d\u5916\u8bbe\u7f6e\uff0c\u6bd4\u5982 USER \u3001 PASSWORD \u3001 HOST \u7b49\u7b49\u3002 \u60f3\u4e86\u89e3\u66f4\u591a\u6570\u636e\u5e93\u8bbe\u7f6e\u65b9\u9762\u7684\u5185\u5bb9\uff0c\u8bf7\u770b\u6587\u6863\uff1a DATABASES \u521b\u5efa\u6a21\u578b \u8bed\u6cd5\uff1a class ModelName(models.Model): \u5c5e\u6027\u540d = models.\u5b57\u6bb5\u7c7b\u578b(\u5b57\u6bb5\u9009\u9879) \u5b57\u6bb5\u7c7b\u578b: \u200b \u5206\u522b\u5bf9\u5e94\u6570\u636e\u5e93\u4e2d\u7684\u6570\u636e\u7c7b\u578b CharField() varchar() EmailField() varchar() URLField() varchar() ImageField() varchar() IntegerField() int FloatField() float DecimalField() decimal BolleanField() boolean DateField() data DateTimeField() datetime TextField() text \u5b57\u6bb5\u9009\u9879: 1. default 2. null: True \u6216 False 3. db_column: \u6307\u5b9a\u5217\u540d 4. db_index: True \u6216 False \u521b\u5efa\u7d22\u5f15 5. max_length: \u6700\u5927\u957f\u5ea6 # models.py from django.db import models from django.db.models import CharField class TestModel(models.Model): name = CharField(max_length=50) \u521b\u5efa\u597d\u6a21\u578b\u4e4b\u540e\u9700\u8981\u540c\u6b65\u6570\u636e\u5e93 # 1. \u5c06models.py\u4e2d\u7684\u5185\u5bb9\u751f\u6210\u4e2d\u95f4\u6587\u4ef6 python manage.py makemigrations # 2. \u5c06\u4e2d\u95f4\u6587\u4ef6\u6620\u5c04\u5230\u6570\u636e\u5e93\u4e2d python manage.py migrate \u6267\u884c\u5b8c\u7b2c\u4e00\u6761\u4e4b\u540e\u4f1a\u53d1\u73b0\u5e94\u7528\u76ee\u5f55\u4e0b\u591a\u4e86\u4e00\u4e2a\u4e2d\u95f4\u6587\u4ef6\u3002(\u9047\u5230\u95ee\u9898\u53ef\u4ee5\u770b\u8fd9\u7bc7\u6587\u7ae0\uff1a https://kongping.net/blog/post/5538/ ) \u6b64\u65f6\u53ea\u662f\u751f\u6210\u4e86\u4e2d\u95f4\u6587\u4ef6\uff0c\u6570\u636e\u5e93\u4e2d\u662f\u6ca1\u6709\u8868\u7684\uff08\u56e0\u4e3a\u8fd8\u6ca1\u6709\u540c\u6b65\u5230\u6570\u636e\u5e93\uff09 \u6267\u884c\u7b2c\u4e8c\u6761\u8bed\u53e5\uff1apython manage.py migrate \u6210\u529f\u540c\u6b65\u5230\u6570\u636e\u5e93\u4e2d\uff0c\u770b\u4e0b\u56fe\u3002 tips: \u6bcf\u6b21\u4fee\u6539\u6a21\u578b\u90fd\u8981\u540c\u6b65\u4e00\u4e0b\uff01 \u7248\u672c\u7684\u5207\u6362\u6307\u4ee4 0001-initial.py 0002-xxxx.py 0003-xxxx.py python manage.py migrate \u5e94\u7528\u7684\u540d\u79f0 \u7248\u672c\u53f7 \u6a21\u578b\u4e2d\u7684CRUD (create read update delete) \u589e\u52a0\u6570\u636e create Entry.objects.create(\u5c5e\u6027=\u503c\uff0c\u5c5e\u6027=\u503c) \u8fd4\u56de\u503c \u200b \u63d2\u5165\u6210\u529f\uff1a\u8fd4\u56de\u521b\u5efa\u597d\u7684\u5b9e\u4f53\u5bf9\u8c61 \u200b \u63d2\u5165\u5931\u8d25\uff1a\u8fd4\u56deNone\uff0c\u4ea7\u751f\u5f02\u5e38 \u521b\u5efa\u4e00\u4e2aEntry\u5bf9\u8c61\uff0c\u5e76\u901a\u8fc7save()\u8fdb\u884c\u4fdd\u5b58 obj = Entry(\u5c5e\u6027=\u503c, \u5c5e\u6027=\u503c) obj.\u5c5e\u6027 = \u503c obj.save() \u65e0\u8fd4\u56de\u503c\uff0c\u4fdd\u5b58\u6210\u529f\u540e\uff0cobj\u4f1a\u88ab\u91cd\u65b0\u8d4b\u503c (obj\u591a\u4e86\u4e00\u4e2aid\u5c5e\u6027) ```python def index_view(request): obj = TestModel() obj.name = 'xxx' print(obj.id) obj.save() print(obj.id) return HttpResponse('index') # \u6267\u884c\u7ed3\u679c None 1 ``` \u67e5\u8be2\u6570\u636e read \u901a\u8fc7Entry.objects \u8c03\u7528\u67e5\u8be2\u63a5\u53e3\u51fd\u6570 Entry.objects \u63d0\u4f9b\u4e86\u5bf9\u8be5\u5b9e\u4f53\u7684\u6240\u6709\u7684\u6570\u636e\u7684\u67e5\u8be2 \u83b7\u53d6\u6240\u6709\u67e5\u8be2\u7ed3\u679c\u7684\u65b9\u6cd5 \u65b9\u6cd5\uff1a all() python Enrty.objects.all() \u8fd4\u56de\uff1aQuerySet(\u67e5\u8be2\u7ed3\u679c\u96c6\uff0c\u672c\u8d28\u662f\u4e00\u4e2a\u5c01\u88c5\u4e86\u82e5\u5e72\u5bf9\u8c61\u7684\u5217\u8868) \u67e5\u8be2\u8fd4\u56de\u6307\u5b9a\u5217 \u65b9\u6cd5\uff1a values() \u6216 values('\u5217\u540d1', '\u5217\u540d2') \u4f5c\u7528\uff1a \u67e5\u8be2\u8868\u4e2d\u6570\u636e\u7684\u90e8\u5206\u5217\uff0c\u5c01\u88c5\u5230\u5b57\u5178\u4e2d\uff0c\u518d\u5c01\u88c5\u5230QuerySet\u4e2d \u8fd4\u56de\uff1aQuerySet(\u67e5\u8be2\u7ed3\u679c\u96c6\uff0c\u672c\u8d28\u662f\u4e00\u4e2a\u5c01\u88c5\u4e86\u82e5\u5e72\u5b57\u6bb5\u7684\u5217\u8868) \u67e5\u8be2\u8fd4\u56de\u6307\u5b9a\u5217 \u65b9\u6cd5: values_list() \u4f5c\u7528\uff1a\u5c06\u6570\u636e\u5c01\u88c5\u5230\u5143\u7ec4\u4e2d\u518d\u5c01\u88c5\u5230\u5217\u8868\u4e2d \u6392\u5e8f\u65b9\u6cd5 \u65b9\u6cd5\uff1a order_by() \u8bed\u6cd5\uff1a Entry.objects.order_by('col1', '-col2') \u9ed8\u8ba4\u662f\u5347\u5e8f\u6392\u5e8f\uff0c\u5217\u540d\u524d\u52a0-\uff0c\u5219\u8868\u793a\u964d\u5e8f\u6392\u5e8f \u67e5\u8be2\u53ea\u8fd4\u56de\u4e00\u6761\u6570\u636e \u65b9\u6cd5\uff1a get(\u6761\u4ef6) \u8fd4\u56de\uff1a\u5355\u4e2a\u5b9e\u4f53\u5bf9\u8c61 \u6ce8\u610f\uff1a \u200b \u8be5\u65b9\u6cd5\u53ea\u4f7f\u7528\u4e8e\u53ea\u80fd\u67e5\u8be2\u51fa\u4e00\u6761\u7ed3\u679c\u7684\u573a\u5408 \u200b \u5982\u679c\u67e5\u8be2\u591a\u4e8e\u4e00\u6761\u6570\u636e\u6216\u6ca1\u67e5\u8be2\u51fa\u7ed3\u679c\u90fd\u4f1a\u629b\u51fa\u5f02\u5e38 \u6839\u636e\u6761\u4ef6\u67e5\u8be2\u90e8\u5206\u884c \u65b9\u6cd5\uff1a filter(\u6761\u4ef6) \u8fd4\u56de\uff1a QuerySet python # \u67e5\u8be2Author\u5b9e\u4f53\u4e2did=1\u7684\u4fe1\u606f authors = Author.objects.filter(id=1) \u975e\u7b49\u503c\u6761\u4ef6\u9700\u8981\u4f7f\u7528\u67e5\u8be2\u8c13\u8bcd Field Lookup \u8bed\u6cd5\uff1a \u200b Entry.objects.filter(\u5c5e\u6027__\u67e5\u8be2\u8c13\u8bcd=\u503c) \u6ce8\u610f\uff1a python # \u6bcf\u4e2a\u67e5\u8be2\u8c13\u8bcd\u90fd\u662f\u4e00\u4e2a\u72ec\u7acb\u7684\u529f\u80fd\u6761\u4ef6 __exact: \u7b49\u503c\u6761\u4ef6\u5224\u65ad __gt: \u5927\u4e8e\u6761\u4ef6\u5224\u65ad __year: \u5f97\u5230\u65e5\u671f\u4e2d\u7684\u5e74\u4efd\u518d\u8fdb\u4e00\u6b65\u5224\u65ad __contains: \u6a21\u7cca\u67e5\u8be2'%xxx%' __range: \u6a21\u7cca\u67e5\u8be2 between add ... ... # \u6240\u6709\u652f\u6301\u6761\u4ef6\u67e5\u8be2\u7684\u4f4d\u7f6e\u5904\u90fd\u652f\u6301\u67e5\u8be2\u8c13\u8bcd filter() get() exclude() \u5bf9\u6761\u4ef6\u53d6\u53cd \u65b9\u6cd5\uff1a exclude(\u6761\u4ef6) python Author.objects.exclude(id=1) select * from author where not(id=1) \u805a\u5408\u67e5\u8be2\uff08\u4e0d\u5e26\u5206\u7ec4\uff09 \u65b9\u6cd5\uff1a aggregate(\u5217\u540d=\u805a\u5408\u51fd\u6570('\u5217')) python Author.objects.aggregate(sumAge=Avg('age')) \u805a\u5408\u51fd\u6570: 1. Avg(): \u5e73\u5747\u503c 2. Count(): \u6570\u91cf 3. Sum(): \u6c42\u548c 4. Min(): \u6c42\u6700\u5c0f\u503c 5. Max(): \u6c42\u6700\u5927\u503c \u805a\u5408\u67e5\u8be2\uff08\u5e26\u5206\u7ec4\uff09 \u65b9\u6cd5\uff1a nnotate(\u540d\u5b57=\u805a\u5408\u51fd\u6570('\u5217')) ```python # \u6309id\u5206\u7ec4\u67e5\u8be2\u5e73\u5747\u5e74\u9f84 Author.objects.values('id').annotate(avg_age=Avg('age')) \u96c6\u7ed3 where\uff0c\u5206\u7ec4\u67e5\u8be2\uff0chaving \u4e8e\u4e00\u4f53\u7684\u67e5\u8be2\u63a5\u53e3 Author.objects .filter(id__gte=3) # where\u5b50\u53e5 .values('age') # group by .annotate(avgAge=Avg('age')) # \u67e5\u8be2\u805a\u5408\u51fd\u6570 .filter(avgAge__gte>20) # having\u5b50\u53e5 .order_by('') # \u5b50\u53e5 ``` \u6240\u6709\u7684\u67e5\u8be2\u63a5\u53e3\u51fd\u6570\u90fd\u53ef\u4ee5\u901a\u8fc7query\u5c5e\u6027\u6765\u5f97\u5230\u5bf9\u5e94\u7684sql\u8bed\u53e5 \u4f8b\u5982\uff1a Entry.objects.all().query \u4fee\u6539\u6570\u636e update \u4fee\u6539\u5355\u4e2a\u5b9e\u4f53 python # \u67e5\uff0c \u6539\uff0c \u4fdd\u5b58 obj = TestModel.objects.filter(id=1).first() obj.name = 'wwww' obj.save() \u6279\u91cf\u4fee\u6539\u6570\u636e python # \u8c03\u7528QuerySet\u7684update(\u5c5e\u6027=\u503c, \u5c5e\u6027=\u503c)\u5b9e\u73b0\u6279\u91cf\u4fee\u6539 objs = TestModel.objects.all() objs.update(name='xxx') \u5220\u9664\u6570\u636e delete \u8c03\u7528\u5b9e\u4f53\u5bf9\u8c61\u6216\u67e5\u8be2\u7ed3\u679c\u96c6\u7684delete()\u65b9\u6cd5\u6765\u5b8c\u6210\u5220\u9664 \u5220\u9664\u5355\u4e2a\u5bf9\u8c61 python au = Author.objects.get(id=1) au.delete() \u6279\u91cf\u5220\u9664 python Author.objects.all().delete() F\u67e5\u8be2 Q\u67e5\u8be2 F(): \u4f5c\u7528\uff1a\u5728\u6267\u884c\u8fc7\u7a0b\u4e2d\u83b7\u53d6\u67d0\u5217\u7684\u503c \u8bed\u6cd5\uff1a \u200b from django.db.models import F \u200b F('\u5217\u540d'): \u5f97\u5230\u67d0\u5217\u7684\u503c # \u628a\u6240\u6709\u7684Author\u7684age\u589e\u52a010 Author.objects.all().update(age=F('age')+10) Q() \u4f5c\u7528\uff1a\u5728\u67e5\u8be2\u6761\u4ef6\u4e2d\u53ef\u4ee5\u5b8c\u6210or\u64cd\u4f5c \u8bed\u6cd5\uff1a \u200b from django.db.models import Q \u200b Q(\u6761\u4ef61)|Q(\u6761\u4ef62) # \u67e5\u8be2id>=3 \u6216 \u5e74\u9f84\u5c0f\u4e8e60\u7684\u4fe1\u606f authors = Author.objects.filter(Q(id__gte=3)|Q(age__lt=60)).all() \u539f\u751f\u7684\u6570\u636e\u5e93\u64cd\u4f5c\u65b9\u6cd5 \u67e5\u8be2 python Entry.objects.raw(sql) \u8fd4\u56de\u503c:QuerySet() \u589e\u5220\u6539 python from django.db import connection def do_sql(request): with connection.curso() as cursor: sql = '...'; cursor.execute(sql) # \u5f71\u54cd\u7684\u884c\u6570 return xx \u81ea\u5b9a\u4e49\u67e5\u8be2\u5bf9\u8c61 - objects objects \u7684 \u5c5e\u6027\u7684\u7c7b\u578b\u4e3a models.Manager \u58f0\u660e EntryManager \u7c7b\uff0c\u7ee7\u627f\u81eamodels.Manager, \u5141\u8bb8\u5728 EntryManager \u4e2d\u589e\u52a0\u81ea\u5b9a\u4e49\u51fd\u6570 python class EntryManager(models.Manager): def \u51fd\u6570\u540d(self): ... ... return ... \u4f7f\u7528\u7ed9EntryManager \u8986\u76d6Models\u7c7b\u4e2d\u8986\u76d6\u539f\u6709\u7684objects python class Entry(models.Model): objects = EntryManager()","title":"django\u4e2d\u7684\u6a21\u578b"},{"location":"django/6_django\u4e2d\u7684\u6a21\u578b/#django","text":"","title":"Django\u4e2d\u7684\u6a21\u578b"},{"location":"django/6_django\u4e2d\u7684\u6a21\u578b/#orm","text":"\u5bf9\u8c61\u5173\u7cfb\u6620\u5c04\uff08Object Relational Mapping\uff09\uff1a\u901a\u8fc7\u4f7f\u7528\u63cf\u8ff0\u5bf9\u8c61\u548c\u6570\u636e\u5e93\u4e4b\u95f4\u6620\u5c04\u7684\u5143\u6570\u636e\uff0c\u5c06\u9762\u5411\u5bf9\u8c61\u8bed\u8a00\u7a0b\u5e8f\u4e2d\u7684\u5bf9\u8c61\u81ea\u52a8\u6301\u4e45\u5316\u5230\u5173\u7cfb\u6570\u636e\u5e93\u4e2d\u3002 \u6620\u5c04\u5173\u7cfb model db \u5b9e\u4f53\u7c7b \u8868\u540d \u7c7b\u5c5e\u6027 \u8868\u5b57\u6bb5 \u7c7b\u5b9e\u4f8b \u8868\u8bb0\u5f55","title":"ORM"},{"location":"django/6_django\u4e2d\u7684\u6a21\u578b/#_1","text":"\u5728 setting.py \u4e2d\u914d\u7f6e\u6570\u636e\u5e93\u4fe1\u606f DATABASES = { 'default': { 'ENGINE': 'django.db.backends.mysql', 'NAME': 'db_name', 'USER': 'root', 'PASSWORD': '123456', 'HOST': '127.0.0.1', 'PORT': 3306, } } \u53c2\u6570\u8bf4\u660e\uff1a ENGINE \uff1a # \u53ef\u9009\u503c\u6709\uff0c\u5206\u522b\u5bf9\u5e94\u4e0d\u540c\u7684\u6570\u636e\u5e93 django.db.backends.sqlite3 django.db.backends.postgresql django.db.backends.mysql django.db.backends.oracle NAME \uff1a\u6570\u636e\u5e93\u7684\u540d\u79f0\u3002\u5982\u679c\u4f7f\u7528\u7684\u662f SQLite\uff0c\u6570\u636e\u5e93\u5c06\u662f\u4f60\u7535\u8111\u4e0a\u7684\u4e00\u4e2a\u6587\u4ef6\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c NAME \u5e94\u8be5\u662f\u6b64\u6587\u4ef6\u7684\u7edd\u5bf9\u8def\u5f84\uff0c\u5305\u62ec\u6587\u4ef6\u540d\u3002 \u5982\u679c\u4f60\u4e0d\u4f7f\u7528 SQLite\uff0c\u5219\u5fc5\u987b\u6dfb\u52a0\u4e00\u4e9b\u989d\u5916\u8bbe\u7f6e\uff0c\u6bd4\u5982 USER \u3001 PASSWORD \u3001 HOST \u7b49\u7b49\u3002 \u60f3\u4e86\u89e3\u66f4\u591a\u6570\u636e\u5e93\u8bbe\u7f6e\u65b9\u9762\u7684\u5185\u5bb9\uff0c\u8bf7\u770b\u6587\u6863\uff1a DATABASES","title":"\u6570\u636e\u5e93\u914d\u7f6e"},{"location":"django/6_django\u4e2d\u7684\u6a21\u578b/#_2","text":"\u8bed\u6cd5\uff1a class ModelName(models.Model): \u5c5e\u6027\u540d = models.\u5b57\u6bb5\u7c7b\u578b(\u5b57\u6bb5\u9009\u9879) \u5b57\u6bb5\u7c7b\u578b: \u200b \u5206\u522b\u5bf9\u5e94\u6570\u636e\u5e93\u4e2d\u7684\u6570\u636e\u7c7b\u578b CharField() varchar() EmailField() varchar() URLField() varchar() ImageField() varchar() IntegerField() int FloatField() float DecimalField() decimal BolleanField() boolean DateField() data DateTimeField() datetime TextField() text \u5b57\u6bb5\u9009\u9879: 1. default 2. null: True \u6216 False 3. db_column: \u6307\u5b9a\u5217\u540d 4. db_index: True \u6216 False \u521b\u5efa\u7d22\u5f15 5. max_length: \u6700\u5927\u957f\u5ea6 # models.py from django.db import models from django.db.models import CharField class TestModel(models.Model): name = CharField(max_length=50)","title":"\u521b\u5efa\u6a21\u578b"},{"location":"django/6_django\u4e2d\u7684\u6a21\u578b/#_3","text":"# 1. \u5c06models.py\u4e2d\u7684\u5185\u5bb9\u751f\u6210\u4e2d\u95f4\u6587\u4ef6 python manage.py makemigrations # 2. \u5c06\u4e2d\u95f4\u6587\u4ef6\u6620\u5c04\u5230\u6570\u636e\u5e93\u4e2d python manage.py migrate \u6267\u884c\u5b8c\u7b2c\u4e00\u6761\u4e4b\u540e\u4f1a\u53d1\u73b0\u5e94\u7528\u76ee\u5f55\u4e0b\u591a\u4e86\u4e00\u4e2a\u4e2d\u95f4\u6587\u4ef6\u3002(\u9047\u5230\u95ee\u9898\u53ef\u4ee5\u770b\u8fd9\u7bc7\u6587\u7ae0\uff1a https://kongping.net/blog/post/5538/ ) \u6b64\u65f6\u53ea\u662f\u751f\u6210\u4e86\u4e2d\u95f4\u6587\u4ef6\uff0c\u6570\u636e\u5e93\u4e2d\u662f\u6ca1\u6709\u8868\u7684\uff08\u56e0\u4e3a\u8fd8\u6ca1\u6709\u540c\u6b65\u5230\u6570\u636e\u5e93\uff09 \u6267\u884c\u7b2c\u4e8c\u6761\u8bed\u53e5\uff1apython manage.py migrate \u6210\u529f\u540c\u6b65\u5230\u6570\u636e\u5e93\u4e2d\uff0c\u770b\u4e0b\u56fe\u3002 tips: \u6bcf\u6b21\u4fee\u6539\u6a21\u578b\u90fd\u8981\u540c\u6b65\u4e00\u4e0b\uff01","title":"\u521b\u5efa\u597d\u6a21\u578b\u4e4b\u540e\u9700\u8981\u540c\u6b65\u6570\u636e\u5e93"},{"location":"django/6_django\u4e2d\u7684\u6a21\u578b/#_4","text":"0001-initial.py 0002-xxxx.py 0003-xxxx.py python manage.py migrate \u5e94\u7528\u7684\u540d\u79f0 \u7248\u672c\u53f7","title":"\u7248\u672c\u7684\u5207\u6362\u6307\u4ee4"},{"location":"django/6_django\u4e2d\u7684\u6a21\u578b/#crud-create-read-update-delete","text":"","title":"\u6a21\u578b\u4e2d\u7684CRUD (create read update delete)"},{"location":"django/6_django\u4e2d\u7684\u6a21\u578b/#create","text":"Entry.objects.create(\u5c5e\u6027=\u503c\uff0c\u5c5e\u6027=\u503c) \u8fd4\u56de\u503c \u200b \u63d2\u5165\u6210\u529f\uff1a\u8fd4\u56de\u521b\u5efa\u597d\u7684\u5b9e\u4f53\u5bf9\u8c61 \u200b \u63d2\u5165\u5931\u8d25\uff1a\u8fd4\u56deNone\uff0c\u4ea7\u751f\u5f02\u5e38 \u521b\u5efa\u4e00\u4e2aEntry\u5bf9\u8c61\uff0c\u5e76\u901a\u8fc7save()\u8fdb\u884c\u4fdd\u5b58 obj = Entry(\u5c5e\u6027=\u503c, \u5c5e\u6027=\u503c) obj.\u5c5e\u6027 = \u503c obj.save() \u65e0\u8fd4\u56de\u503c\uff0c\u4fdd\u5b58\u6210\u529f\u540e\uff0cobj\u4f1a\u88ab\u91cd\u65b0\u8d4b\u503c (obj\u591a\u4e86\u4e00\u4e2aid\u5c5e\u6027) ```python def index_view(request): obj = TestModel() obj.name = 'xxx' print(obj.id) obj.save() print(obj.id) return HttpResponse('index') # \u6267\u884c\u7ed3\u679c None 1 ```","title":"\u589e\u52a0\u6570\u636e create"},{"location":"django/6_django\u4e2d\u7684\u6a21\u578b/#read","text":"\u901a\u8fc7Entry.objects \u8c03\u7528\u67e5\u8be2\u63a5\u53e3\u51fd\u6570 Entry.objects \u63d0\u4f9b\u4e86\u5bf9\u8be5\u5b9e\u4f53\u7684\u6240\u6709\u7684\u6570\u636e\u7684\u67e5\u8be2 \u83b7\u53d6\u6240\u6709\u67e5\u8be2\u7ed3\u679c\u7684\u65b9\u6cd5 \u65b9\u6cd5\uff1a all() python Enrty.objects.all() \u8fd4\u56de\uff1aQuerySet(\u67e5\u8be2\u7ed3\u679c\u96c6\uff0c\u672c\u8d28\u662f\u4e00\u4e2a\u5c01\u88c5\u4e86\u82e5\u5e72\u5bf9\u8c61\u7684\u5217\u8868) \u67e5\u8be2\u8fd4\u56de\u6307\u5b9a\u5217 \u65b9\u6cd5\uff1a values() \u6216 values('\u5217\u540d1', '\u5217\u540d2') \u4f5c\u7528\uff1a \u67e5\u8be2\u8868\u4e2d\u6570\u636e\u7684\u90e8\u5206\u5217\uff0c\u5c01\u88c5\u5230\u5b57\u5178\u4e2d\uff0c\u518d\u5c01\u88c5\u5230QuerySet\u4e2d \u8fd4\u56de\uff1aQuerySet(\u67e5\u8be2\u7ed3\u679c\u96c6\uff0c\u672c\u8d28\u662f\u4e00\u4e2a\u5c01\u88c5\u4e86\u82e5\u5e72\u5b57\u6bb5\u7684\u5217\u8868) \u67e5\u8be2\u8fd4\u56de\u6307\u5b9a\u5217 \u65b9\u6cd5: values_list() \u4f5c\u7528\uff1a\u5c06\u6570\u636e\u5c01\u88c5\u5230\u5143\u7ec4\u4e2d\u518d\u5c01\u88c5\u5230\u5217\u8868\u4e2d \u6392\u5e8f\u65b9\u6cd5 \u65b9\u6cd5\uff1a order_by() \u8bed\u6cd5\uff1a Entry.objects.order_by('col1', '-col2') \u9ed8\u8ba4\u662f\u5347\u5e8f\u6392\u5e8f\uff0c\u5217\u540d\u524d\u52a0-\uff0c\u5219\u8868\u793a\u964d\u5e8f\u6392\u5e8f \u67e5\u8be2\u53ea\u8fd4\u56de\u4e00\u6761\u6570\u636e \u65b9\u6cd5\uff1a get(\u6761\u4ef6) \u8fd4\u56de\uff1a\u5355\u4e2a\u5b9e\u4f53\u5bf9\u8c61 \u6ce8\u610f\uff1a \u200b \u8be5\u65b9\u6cd5\u53ea\u4f7f\u7528\u4e8e\u53ea\u80fd\u67e5\u8be2\u51fa\u4e00\u6761\u7ed3\u679c\u7684\u573a\u5408 \u200b \u5982\u679c\u67e5\u8be2\u591a\u4e8e\u4e00\u6761\u6570\u636e\u6216\u6ca1\u67e5\u8be2\u51fa\u7ed3\u679c\u90fd\u4f1a\u629b\u51fa\u5f02\u5e38 \u6839\u636e\u6761\u4ef6\u67e5\u8be2\u90e8\u5206\u884c \u65b9\u6cd5\uff1a filter(\u6761\u4ef6) \u8fd4\u56de\uff1a QuerySet python # \u67e5\u8be2Author\u5b9e\u4f53\u4e2did=1\u7684\u4fe1\u606f authors = Author.objects.filter(id=1) \u975e\u7b49\u503c\u6761\u4ef6\u9700\u8981\u4f7f\u7528\u67e5\u8be2\u8c13\u8bcd Field Lookup \u8bed\u6cd5\uff1a \u200b Entry.objects.filter(\u5c5e\u6027__\u67e5\u8be2\u8c13\u8bcd=\u503c) \u6ce8\u610f\uff1a python # \u6bcf\u4e2a\u67e5\u8be2\u8c13\u8bcd\u90fd\u662f\u4e00\u4e2a\u72ec\u7acb\u7684\u529f\u80fd\u6761\u4ef6 __exact: \u7b49\u503c\u6761\u4ef6\u5224\u65ad __gt: \u5927\u4e8e\u6761\u4ef6\u5224\u65ad __year: \u5f97\u5230\u65e5\u671f\u4e2d\u7684\u5e74\u4efd\u518d\u8fdb\u4e00\u6b65\u5224\u65ad __contains: \u6a21\u7cca\u67e5\u8be2'%xxx%' __range: \u6a21\u7cca\u67e5\u8be2 between add ... ... # \u6240\u6709\u652f\u6301\u6761\u4ef6\u67e5\u8be2\u7684\u4f4d\u7f6e\u5904\u90fd\u652f\u6301\u67e5\u8be2\u8c13\u8bcd filter() get() exclude() \u5bf9\u6761\u4ef6\u53d6\u53cd \u65b9\u6cd5\uff1a exclude(\u6761\u4ef6) python Author.objects.exclude(id=1) select * from author where not(id=1) \u805a\u5408\u67e5\u8be2\uff08\u4e0d\u5e26\u5206\u7ec4\uff09 \u65b9\u6cd5\uff1a aggregate(\u5217\u540d=\u805a\u5408\u51fd\u6570('\u5217')) python Author.objects.aggregate(sumAge=Avg('age')) \u805a\u5408\u51fd\u6570: 1. Avg(): \u5e73\u5747\u503c 2. Count(): \u6570\u91cf 3. Sum(): \u6c42\u548c 4. Min(): \u6c42\u6700\u5c0f\u503c 5. Max(): \u6c42\u6700\u5927\u503c \u805a\u5408\u67e5\u8be2\uff08\u5e26\u5206\u7ec4\uff09 \u65b9\u6cd5\uff1a nnotate(\u540d\u5b57=\u805a\u5408\u51fd\u6570('\u5217')) ```python # \u6309id\u5206\u7ec4\u67e5\u8be2\u5e73\u5747\u5e74\u9f84 Author.objects.values('id').annotate(avg_age=Avg('age')) \u96c6\u7ed3 where\uff0c\u5206\u7ec4\u67e5\u8be2\uff0chaving \u4e8e\u4e00\u4f53\u7684\u67e5\u8be2\u63a5\u53e3 Author.objects .filter(id__gte=3) # where\u5b50\u53e5 .values('age') # group by .annotate(avgAge=Avg('age')) # \u67e5\u8be2\u805a\u5408\u51fd\u6570 .filter(avgAge__gte>20) # having\u5b50\u53e5 .order_by('') # \u5b50\u53e5 ``` \u6240\u6709\u7684\u67e5\u8be2\u63a5\u53e3\u51fd\u6570\u90fd\u53ef\u4ee5\u901a\u8fc7query\u5c5e\u6027\u6765\u5f97\u5230\u5bf9\u5e94\u7684sql\u8bed\u53e5 \u4f8b\u5982\uff1a Entry.objects.all().query","title":"\u67e5\u8be2\u6570\u636e read"},{"location":"django/6_django\u4e2d\u7684\u6a21\u578b/#update","text":"\u4fee\u6539\u5355\u4e2a\u5b9e\u4f53 python # \u67e5\uff0c \u6539\uff0c \u4fdd\u5b58 obj = TestModel.objects.filter(id=1).first() obj.name = 'wwww' obj.save() \u6279\u91cf\u4fee\u6539\u6570\u636e python # \u8c03\u7528QuerySet\u7684update(\u5c5e\u6027=\u503c, \u5c5e\u6027=\u503c)\u5b9e\u73b0\u6279\u91cf\u4fee\u6539 objs = TestModel.objects.all() objs.update(name='xxx')","title":"\u4fee\u6539\u6570\u636e update"},{"location":"django/6_django\u4e2d\u7684\u6a21\u578b/#delete","text":"\u8c03\u7528\u5b9e\u4f53\u5bf9\u8c61\u6216\u67e5\u8be2\u7ed3\u679c\u96c6\u7684delete()\u65b9\u6cd5\u6765\u5b8c\u6210\u5220\u9664 \u5220\u9664\u5355\u4e2a\u5bf9\u8c61 python au = Author.objects.get(id=1) au.delete() \u6279\u91cf\u5220\u9664 python Author.objects.all().delete()","title":"\u5220\u9664\u6570\u636e delete"},{"location":"django/6_django\u4e2d\u7684\u6a21\u578b/#f-q","text":"","title":"F\u67e5\u8be2  Q\u67e5\u8be2"},{"location":"django/6_django\u4e2d\u7684\u6a21\u578b/#f","text":"\u4f5c\u7528\uff1a\u5728\u6267\u884c\u8fc7\u7a0b\u4e2d\u83b7\u53d6\u67d0\u5217\u7684\u503c \u8bed\u6cd5\uff1a \u200b from django.db.models import F \u200b F('\u5217\u540d'): \u5f97\u5230\u67d0\u5217\u7684\u503c # \u628a\u6240\u6709\u7684Author\u7684age\u589e\u52a010 Author.objects.all().update(age=F('age')+10)","title":"F():"},{"location":"django/6_django\u4e2d\u7684\u6a21\u578b/#q","text":"\u4f5c\u7528\uff1a\u5728\u67e5\u8be2\u6761\u4ef6\u4e2d\u53ef\u4ee5\u5b8c\u6210or\u64cd\u4f5c \u8bed\u6cd5\uff1a \u200b from django.db.models import Q \u200b Q(\u6761\u4ef61)|Q(\u6761\u4ef62) # \u67e5\u8be2id>=3 \u6216 \u5e74\u9f84\u5c0f\u4e8e60\u7684\u4fe1\u606f authors = Author.objects.filter(Q(id__gte=3)|Q(age__lt=60)).all()","title":"Q()"},{"location":"django/6_django\u4e2d\u7684\u6a21\u578b/#_5","text":"\u67e5\u8be2 python Entry.objects.raw(sql) \u8fd4\u56de\u503c:QuerySet() \u589e\u5220\u6539 python from django.db import connection def do_sql(request): with connection.curso() as cursor: sql = '...'; cursor.execute(sql) # \u5f71\u54cd\u7684\u884c\u6570 return xx","title":"\u539f\u751f\u7684\u6570\u636e\u5e93\u64cd\u4f5c\u65b9\u6cd5"},{"location":"django/6_django\u4e2d\u7684\u6a21\u578b/#-objects","text":"objects \u7684 \u5c5e\u6027\u7684\u7c7b\u578b\u4e3a models.Manager \u58f0\u660e EntryManager \u7c7b\uff0c\u7ee7\u627f\u81eamodels.Manager, \u5141\u8bb8\u5728 EntryManager \u4e2d\u589e\u52a0\u81ea\u5b9a\u4e49\u51fd\u6570 python class EntryManager(models.Manager): def \u51fd\u6570\u540d(self): ... ... return ... \u4f7f\u7528\u7ed9EntryManager \u8986\u76d6Models\u7c7b\u4e2d\u8986\u76d6\u539f\u6709\u7684objects python class Entry(models.Model): objects = EntryManager()","title":"\u81ea\u5b9a\u4e49\u67e5\u8be2\u5bf9\u8c61 - objects"},{"location":"django/7_django\u6a21\u578b\u4e2d\u7684\u5173\u7cfb\u6620\u5c04/","text":"django\u6a21\u578b\u4e2d\u7684\u5173\u7cfb\u6620\u5c04 \u4e00\u5bf9\u4e00\u6620\u5c04 \u8bed\u6cd5\uff1a\u5728\u5173\u8054\u7684\u4e24\u4e2a\u7c7b\u4e2d\u7684\u4efb\u4f55\u4e00\u4e2a\u7c7b\u90fd\u53ef\u4ee5\u589e\u52a0\u5bf9\u53e6\u4e00\u4e2a\u7c7b\u7684\u5f15\u7528 \u5c5e\u6027 = modles.OneToOneField(Entry) ```python # \u5728Wife\u5b9e\u4f53\u7c7b\u4e2d\u589e\u52a0\u5bf9Author\u5b9e\u4f53\u7c7b\u7684\u4e00\u5bf9\u4e00\u5f15\u7528 class Author(models.Model): ... ... class Wife(models.Model): ... ... # \u589e\u52a0\u4e00\u5bf9\u4e00\u7684\u5f15\u7528 author = modles.OneToOneField(Author) ``` \u6570\u636e\u5e93\u4e2d\u4f1a\u751f\u6210\u4e00\u4e2a\u5916\u952e(author_id)\u5217\u5728wife\u8868\u4e2d, \u4f1a\u5f15\u7528\u5728author\u8868\u7684\u4e3b\u952e \u5728Author\u4e2d\uff0c\u4f1a\u589e\u52a0\u4e00\u4e2a\u9690\u5f0f\u5c5e\u6027\uff0c\u6765\u8868\u793aauthor\u6240\u5bf9\u5e94\u7684wife\uff08\u5176\u5b9e\u53cd\u5411\u5f15\u7528\u5c5e\u6027\uff09 \u67e5\u8be2 \u6b63\u5411\u67e5\u8be2\uff1a \u901a\u8fc7wife \u627e author ```python \u7279\u70b9\uff1a \u901a\u8fc7\u81ea\u5b9a\u4e49\u7684\u5173\u8054\u5c5e\u6027\u53bb\u67e5\u627e\u5bf9\u5e94\u7684\u5b9e\u4f53 wife = Wife.objects.get(id=1) author = wife.author ``` \u53cd\u5411\u67e5\u8be2\uff1a\u901a\u8fc7author \u627e wife ```python \u7279\u70b9\uff1a \u901a\u8fc7\u53cd\u5411\u5f15\u7528\u5c5e\u6027\u53bb\u67e5\u627e\u5bf9\u5e94\u7684\u5b9e\u4f53 author = Author.objects.get(id=1) wife = author.wife ``` \u4e00\u5bf9\u591a\u6620\u5c04 \u8bed\u6cd5 \u5728'\u591a'\u8868\u4e2d\u589e\u52a0\u5bf9'\u4e00'\u8868\u7684\u5916\u952e\u5f15\u7528\uff08\u6570\u636e\u5e93\u4e2d\u8868\u73b0\uff09 \u5728'\u591a'\u5b9e\u4f53\u4e2d\u589e\u52a0\u5bf9'\u4e00'\u5b9e\u4f53\u7684\u5f15\u7528\uff08django\u6a21\u578b\u4e2d\u64cd\u4f5c\uff09 \u5c5e\u6027 = models.ForeignKey(Entry) python # \u4e00\u4e2a\u51fa\u7248\u793e\u5bf9\u5e94\u591a\u672c\u4e66 # Book Publisher # \u591a \u4e00 class Book(models.Model): ... ... publisher = models.ForeignKey(Publisher) Book \u8868\u4e2d\u589e\u52a0\u4e00\u4e2a\u5916\u952e\u5217 publisher_id, \u5f15\u7528\u81eaPublisher \u8868\u4e2d\u7684\u4e3b\u952e Publisher \u4e2d\u4f1a\u7531\u4e00\u4e2a\u9690\u5f0f\u5c5e\u6027 book_set, \u7528\u6765\u8868\u793a\u8be5publisher\u5bf9\u5e94\u7684\u6240\u6709\u7684Book\u5bf9\u8c61\u7684\u67e5\u8be2 \u591a\u5bf9\u591a\u6620\u5c04 \u8bed\u6cd5 \u5728\u5173\u8054\u7684\u4e24\u4e2a\u7c7b\u7684\u4efb\u610f\u4e00\u4e2a\u7c7b\u4e2d\uff0c\u589e\u52a0 \u5c5e\u6027 = models.ManyToManyField(Entry) ```python # Author Book \u53ef\u4ee5\u7684\u662f\u591a\u5bf9\u591a\u5173\u8054\u5173\u7cfb # \u4e00\u4e2aauthor \u53ef\u4ee5\u51fa\u7248\u591a\u672cbook # \u4e00\u672cbook \u53ef\u4ee5\u7531\u591a\u4f4d author \u8054\u5408\u7f16\u5199 class Author(models.Model): ... ... class Book(models.Model): ... ... authors = models.ManyToManyField(Author) ``` Book \u8868\u4e2d\u589e\u52a0\u4e00\u4e2a\u5916\u952e\u5217 publisher_id, \u5f15\u7528\u81eaPublisher \u8868\u4e2d\u7684\u4e3b\u952e Publisher \u4e2d\u4f1a\u7531\u4e00\u4e2a\u9690\u5f0f\u5c5e\u6027 book_set, \u7528\u6765\u8868\u793a\u8be5publisher\u5bf9\u5e94\u7684\u6240\u6709\u7684Book\u5bf9\u8c61\u7684\u67e5\u8be2 \u67e5\u8be2 \u901a\u8fc7 Book \u67e5\u8be2 authors: python authors = book.authors.all() \u53cd\u5411\u67e5\u8be2\uff1a python books = author.book_set.all()","title":"\u6a21\u578b\u4e2d\u7684\u5173\u7cfb\u6620\u5c04"},{"location":"django/7_django\u6a21\u578b\u4e2d\u7684\u5173\u7cfb\u6620\u5c04/#django","text":"","title":"django\u6a21\u578b\u4e2d\u7684\u5173\u7cfb\u6620\u5c04"},{"location":"django/7_django\u6a21\u578b\u4e2d\u7684\u5173\u7cfb\u6620\u5c04/#_1","text":"\u8bed\u6cd5\uff1a\u5728\u5173\u8054\u7684\u4e24\u4e2a\u7c7b\u4e2d\u7684\u4efb\u4f55\u4e00\u4e2a\u7c7b\u90fd\u53ef\u4ee5\u589e\u52a0\u5bf9\u53e6\u4e00\u4e2a\u7c7b\u7684\u5f15\u7528 \u5c5e\u6027 = modles.OneToOneField(Entry) ```python # \u5728Wife\u5b9e\u4f53\u7c7b\u4e2d\u589e\u52a0\u5bf9Author\u5b9e\u4f53\u7c7b\u7684\u4e00\u5bf9\u4e00\u5f15\u7528 class Author(models.Model): ... ... class Wife(models.Model): ... ... # \u589e\u52a0\u4e00\u5bf9\u4e00\u7684\u5f15\u7528 author = modles.OneToOneField(Author) ``` \u6570\u636e\u5e93\u4e2d\u4f1a\u751f\u6210\u4e00\u4e2a\u5916\u952e(author_id)\u5217\u5728wife\u8868\u4e2d, \u4f1a\u5f15\u7528\u5728author\u8868\u7684\u4e3b\u952e \u5728Author\u4e2d\uff0c\u4f1a\u589e\u52a0\u4e00\u4e2a\u9690\u5f0f\u5c5e\u6027\uff0c\u6765\u8868\u793aauthor\u6240\u5bf9\u5e94\u7684wife\uff08\u5176\u5b9e\u53cd\u5411\u5f15\u7528\u5c5e\u6027\uff09 \u67e5\u8be2 \u6b63\u5411\u67e5\u8be2\uff1a \u901a\u8fc7wife \u627e author ```python","title":"\u4e00\u5bf9\u4e00\u6620\u5c04"},{"location":"django/7_django\u6a21\u578b\u4e2d\u7684\u5173\u7cfb\u6620\u5c04/#_2","text":"wife = Wife.objects.get(id=1) author = wife.author ``` \u53cd\u5411\u67e5\u8be2\uff1a\u901a\u8fc7author \u627e wife ```python","title":"\u7279\u70b9\uff1a \u901a\u8fc7\u81ea\u5b9a\u4e49\u7684\u5173\u8054\u5c5e\u6027\u53bb\u67e5\u627e\u5bf9\u5e94\u7684\u5b9e\u4f53"},{"location":"django/7_django\u6a21\u578b\u4e2d\u7684\u5173\u7cfb\u6620\u5c04/#_3","text":"author = Author.objects.get(id=1) wife = author.wife ```","title":"\u7279\u70b9\uff1a \u901a\u8fc7\u53cd\u5411\u5f15\u7528\u5c5e\u6027\u53bb\u67e5\u627e\u5bf9\u5e94\u7684\u5b9e\u4f53"},{"location":"django/7_django\u6a21\u578b\u4e2d\u7684\u5173\u7cfb\u6620\u5c04/#_4","text":"\u8bed\u6cd5 \u5728'\u591a'\u8868\u4e2d\u589e\u52a0\u5bf9'\u4e00'\u8868\u7684\u5916\u952e\u5f15\u7528\uff08\u6570\u636e\u5e93\u4e2d\u8868\u73b0\uff09 \u5728'\u591a'\u5b9e\u4f53\u4e2d\u589e\u52a0\u5bf9'\u4e00'\u5b9e\u4f53\u7684\u5f15\u7528\uff08django\u6a21\u578b\u4e2d\u64cd\u4f5c\uff09 \u5c5e\u6027 = models.ForeignKey(Entry) python # \u4e00\u4e2a\u51fa\u7248\u793e\u5bf9\u5e94\u591a\u672c\u4e66 # Book Publisher # \u591a \u4e00 class Book(models.Model): ... ... publisher = models.ForeignKey(Publisher) Book \u8868\u4e2d\u589e\u52a0\u4e00\u4e2a\u5916\u952e\u5217 publisher_id, \u5f15\u7528\u81eaPublisher \u8868\u4e2d\u7684\u4e3b\u952e Publisher \u4e2d\u4f1a\u7531\u4e00\u4e2a\u9690\u5f0f\u5c5e\u6027 book_set, \u7528\u6765\u8868\u793a\u8be5publisher\u5bf9\u5e94\u7684\u6240\u6709\u7684Book\u5bf9\u8c61\u7684\u67e5\u8be2","title":"\u4e00\u5bf9\u591a\u6620\u5c04"},{"location":"django/7_django\u6a21\u578b\u4e2d\u7684\u5173\u7cfb\u6620\u5c04/#_5","text":"\u8bed\u6cd5 \u5728\u5173\u8054\u7684\u4e24\u4e2a\u7c7b\u7684\u4efb\u610f\u4e00\u4e2a\u7c7b\u4e2d\uff0c\u589e\u52a0 \u5c5e\u6027 = models.ManyToManyField(Entry) ```python # Author Book \u53ef\u4ee5\u7684\u662f\u591a\u5bf9\u591a\u5173\u8054\u5173\u7cfb # \u4e00\u4e2aauthor \u53ef\u4ee5\u51fa\u7248\u591a\u672cbook # \u4e00\u672cbook \u53ef\u4ee5\u7531\u591a\u4f4d author \u8054\u5408\u7f16\u5199 class Author(models.Model): ... ... class Book(models.Model): ... ... authors = models.ManyToManyField(Author) ``` Book \u8868\u4e2d\u589e\u52a0\u4e00\u4e2a\u5916\u952e\u5217 publisher_id, \u5f15\u7528\u81eaPublisher \u8868\u4e2d\u7684\u4e3b\u952e Publisher \u4e2d\u4f1a\u7531\u4e00\u4e2a\u9690\u5f0f\u5c5e\u6027 book_set, \u7528\u6765\u8868\u793a\u8be5publisher\u5bf9\u5e94\u7684\u6240\u6709\u7684Book\u5bf9\u8c61\u7684\u67e5\u8be2 \u67e5\u8be2 \u901a\u8fc7 Book \u67e5\u8be2 authors: python authors = book.authors.all() \u53cd\u5411\u67e5\u8be2\uff1a python books = author.book_set.all()","title":"\u591a\u5bf9\u591a\u6620\u5c04"},{"location":"django/8_django\u81ea\u5e26\u7684\u540e\u53f0\u7ba1\u7406/","text":"\u540e\u53f0\u7ba1\u7406\u7cfb\u7edf \u540e\u53f0\u914d\u7f6e \u767b\u9646\u5730\u5740\uff1a /admin/ \u521b\u5efa\u540e\u53f0\u7ba1\u7406\u5458\uff08\u8d85\u7ea7\u7528\u6237\uff09 python python manage.py createsuperuser Models \u7684\u57fa\u672c\u7ba1\u7406 \u5728\u5e94\u7528\u4e2d\u7684 admin.py \u4e2d\u6ce8\u518c\u8981\u7ba1\u7406\u7684\u5b9e\u4f53\u7c7b admin.py\u4f5c\u7528\uff1a \u6ce8\u518c\u8981\u7ba1\u7406\u7684Models\u7c7b\uff0c\u53ea\u6709\u6ce8\u518c\u4e4b\u540e\u624d\u80fd\u7ba1\u7406 \u6ce8\u518cModels admin.site.register() \u7c7b\u8bbe\u7f6e \u91cd\u5199\u6bcf\u4e2a\u5b9e\u4f53\u7c7b\u4e2d\u7684 __str__() \u65b9\u6cd5\uff0c\u540e\u53f0\u663e\u793a\u7684\u5c06\u4ee5 __str__() \u7684\u8fd4\u56de\u503c\u4e3a\u51c6 \u4e3a\u5b9e\u4f53\u7c7b\u4e2d\u7684\u5c5e\u6027\u4eec\u6dfb\u52a0\u5b57\u6bb5\u9009\u9879 verbose_name\uff0c\u7528\u4e8e\u4fee\u6539\u663e\u793a\u7684\u5b57\u6bb5\u540d \u901a\u8fc7Model\u7c7b\u7684\u5185\u90e8\u7c7bMeta\u5b9a\u4e49\u5176\u5c55\u73b0\u5f62\u5f0f ```python class Author(models.Model): name = models.CharField(max_length=20) class Meta(): 1. db_table = '' # \u6307\u5b9a\u8be5\u5b9e\u4f53\u7c7b\u6620\u5c04\u5230\u8868\u7684\u540d\u79f0\uff0c\u8be5\u5c5e\u6027\u8bbe\u7f6e\u5b8c\u6210\u540e\u9700\u8981\u540c\u6b65\u56de\u6570\u636e\u5e93 2. verbose_name = '' # \u5b9a\u4e49\u7c7b\u5728admin\u4e2d\u663e\u793a\u7684\u540d\u5b57(\u5355\u6570) 3. varbose_name_plural # \u5b9a\u4e49\u7c7b\u5728admin\u4e2d\u663e\u793a\u7684\u540d\u5b57(\u590d\u6570) 4. ordering # \u6307\u5b9a\u6570\u636e\u5728\u540e\u53f0\u7ba1\u7406\u4e2d\u7684\u6392\u5e8f\u65b9\u5f0f # \u53d6\u503c\u4e00\u4e2a\u5217\u8868\uff0c\u6307\u5b9a\u6392\u5e8f\u5217\uff0c\u9ed8\u8ba4\u5347\u5e8f\uff0c\u964d\u5e8f\u4f7f\u7528 ``` Models \u7684\u9ad8\u7ea7\u7ba1\u7406 \u5728admin.py\u4e2d\u521b\u5efa\u9ad8\u7ea7\u7ba1\u7406\u7c7b\u5e76\u6ce8\u518c python # \u521b\u5efa EntryAdmin\u7c7b\uff0c\u7ee7\u627f\u81eaadmin.ModelAdmin class AuthorAdmin(admin.ModelAdmin): pass # \u6ce8\u518c\u9ad8\u7ea7\u7ba1\u7406\u7c7b admin.site.register(Entry, EntryAdmin) # ex: admin.site.register(Author, AuthorAdmin) \u5141\u8bb8\u5728EntryAdmin\u4e2d\u589e\u52a0\u7684\u5c5e\u6027 ```python # list_display \u4f5c\u7528 \u5b9a\u4e49\u5728\u5217\u8868\u4e5f\u4e0a\u663e\u793a\u7684\u5b57\u6bb5\u4eec \u53d6\u503c\uff1a \u7531\u6a21\u578b\u7c7b\u4e2d\u5bf9\u8c61\u7684\u5c5e\u6027\u540d\u7ec4\u6210\u7684\u5143\u7ec4\u6216\u5217\u8868 # list_display_links \u4f5c\u7528 \u5b9a\u4e49\u5728\u5217\u8868\u9875\u4e0a\u4e5f\u80fd\u591f\u94fe\u63a5\u5230\u8be6\u60c5\u9875\u7684\u5b57\u6bb5\u4eec # list_editable \u4f5c\u7528 \u5b9a\u4e49\u5728\u5217\u8868\u9875\u4e0a\u5c31\u80fd\u591f\u4fee\u6539\u7684\u5b57\u6bb5\u4eec \u53d6\u503c \u53ea\u80fd\u51fa\u73b0\u5728list_display\u4e2d\uff0c\u4e0d\u80fd\u51fa\u73b0\u5728list_display_links\u4e2d # search_fields \u4f5c\u7528 \u5728\u5217\u8868\u9875\u7684\u504f\u4e0a\u6dfb\u52a0\u4e00\u4e2a\u641c\u7d22\u680f\uff0c\u3001 \u5b9a\u4e49\u641c\u7d22\u680f\u4e2d\u5141\u8bb8\u641c\u7d22\u7684\u5b57\u6bb5\u503c\u4eec # list_filter \u4f5c\u7528 \u5728\u5217\u8868\u9875\u7684\u53f3\u4fa7\u589e\u52a0\u8fc7\u6ee4\u5668\u6765\u5b9e\u73b0\u5feb\u901f\u7b5b\u9009 # date_hierarchy \u4f5c\u7528 \u5728\u5217\u8868\u9875\u7684\u9876\u90e8\u4f1a\u589e\u52a0\u4e00\u4e2a\u65f6\u95f4\u9009\u62e9\u5668\uff0c\u53d6\u503c\u5c5e\u6027\u5fc5\u987b\u662fDateField \u6216 DateTimeField\u7684\u5217 # fields \u4f5c\u7528 \u5728\u8be6\u60c5\u9875\u9762\u4e2d\uff0c\u6307\u5b9a\u8981\u663e\u793a\u90a3\u4e9b\u5b57\u6bb5\u5e76\u6309\u7167\u4ec0\u4e48\u987a\u5e8f\u663e\u793a # fieldsets \u4f5c\u7528 \u5728\u8be6\u60c5\u9875\u4e2d\u5bf9\u5b57\u6bb5\u4eec\u8fdb\u884c\u5206\u7ec4\u663e\u793a \u6ce8\u610f fieldssets \u4e0e fields \u4e0d\u80fd\u5171\u5b58 \u53d6\u503c fieldssets = [ # \u5206\u7ec41 ('\u5206\u7ec4\u540d\u79f0', { 'fields': ('\u5c5e\u60271', '\u5c5e\u60272'), 'classes': ('collapse',) # collapse \u6298\u53e0 }), # \u5206\u7ec42 ] ```","title":"\u81ea\u5e26\u7684\u540e\u53f0\u7ba1\u7406"},{"location":"django/8_django\u81ea\u5e26\u7684\u540e\u53f0\u7ba1\u7406/#_1","text":"","title":"\u540e\u53f0\u7ba1\u7406\u7cfb\u7edf"},{"location":"django/8_django\u81ea\u5e26\u7684\u540e\u53f0\u7ba1\u7406/#_2","text":"\u767b\u9646\u5730\u5740\uff1a /admin/ \u521b\u5efa\u540e\u53f0\u7ba1\u7406\u5458\uff08\u8d85\u7ea7\u7528\u6237\uff09 python python manage.py createsuperuser","title":"\u540e\u53f0\u914d\u7f6e"},{"location":"django/8_django\u81ea\u5e26\u7684\u540e\u53f0\u7ba1\u7406/#models","text":"\u5728\u5e94\u7528\u4e2d\u7684 admin.py \u4e2d\u6ce8\u518c\u8981\u7ba1\u7406\u7684\u5b9e\u4f53\u7c7b admin.py\u4f5c\u7528\uff1a \u6ce8\u518c\u8981\u7ba1\u7406\u7684Models\u7c7b\uff0c\u53ea\u6709\u6ce8\u518c\u4e4b\u540e\u624d\u80fd\u7ba1\u7406 \u6ce8\u518cModels admin.site.register() \u7c7b\u8bbe\u7f6e \u91cd\u5199\u6bcf\u4e2a\u5b9e\u4f53\u7c7b\u4e2d\u7684 __str__() \u65b9\u6cd5\uff0c\u540e\u53f0\u663e\u793a\u7684\u5c06\u4ee5 __str__() \u7684\u8fd4\u56de\u503c\u4e3a\u51c6 \u4e3a\u5b9e\u4f53\u7c7b\u4e2d\u7684\u5c5e\u6027\u4eec\u6dfb\u52a0\u5b57\u6bb5\u9009\u9879 verbose_name\uff0c\u7528\u4e8e\u4fee\u6539\u663e\u793a\u7684\u5b57\u6bb5\u540d \u901a\u8fc7Model\u7c7b\u7684\u5185\u90e8\u7c7bMeta\u5b9a\u4e49\u5176\u5c55\u73b0\u5f62\u5f0f ```python class Author(models.Model): name = models.CharField(max_length=20) class Meta(): 1. db_table = '' # \u6307\u5b9a\u8be5\u5b9e\u4f53\u7c7b\u6620\u5c04\u5230\u8868\u7684\u540d\u79f0\uff0c\u8be5\u5c5e\u6027\u8bbe\u7f6e\u5b8c\u6210\u540e\u9700\u8981\u540c\u6b65\u56de\u6570\u636e\u5e93 2. verbose_name = '' # \u5b9a\u4e49\u7c7b\u5728admin\u4e2d\u663e\u793a\u7684\u540d\u5b57(\u5355\u6570) 3. varbose_name_plural # \u5b9a\u4e49\u7c7b\u5728admin\u4e2d\u663e\u793a\u7684\u540d\u5b57(\u590d\u6570) 4. ordering # \u6307\u5b9a\u6570\u636e\u5728\u540e\u53f0\u7ba1\u7406\u4e2d\u7684\u6392\u5e8f\u65b9\u5f0f # \u53d6\u503c\u4e00\u4e2a\u5217\u8868\uff0c\u6307\u5b9a\u6392\u5e8f\u5217\uff0c\u9ed8\u8ba4\u5347\u5e8f\uff0c\u964d\u5e8f\u4f7f\u7528 ```","title":"Models \u7684\u57fa\u672c\u7ba1\u7406"},{"location":"django/8_django\u81ea\u5e26\u7684\u540e\u53f0\u7ba1\u7406/#models_1","text":"\u5728admin.py\u4e2d\u521b\u5efa\u9ad8\u7ea7\u7ba1\u7406\u7c7b\u5e76\u6ce8\u518c python # \u521b\u5efa EntryAdmin\u7c7b\uff0c\u7ee7\u627f\u81eaadmin.ModelAdmin class AuthorAdmin(admin.ModelAdmin): pass # \u6ce8\u518c\u9ad8\u7ea7\u7ba1\u7406\u7c7b admin.site.register(Entry, EntryAdmin) # ex: admin.site.register(Author, AuthorAdmin) \u5141\u8bb8\u5728EntryAdmin\u4e2d\u589e\u52a0\u7684\u5c5e\u6027 ```python # list_display \u4f5c\u7528 \u5b9a\u4e49\u5728\u5217\u8868\u4e5f\u4e0a\u663e\u793a\u7684\u5b57\u6bb5\u4eec \u53d6\u503c\uff1a \u7531\u6a21\u578b\u7c7b\u4e2d\u5bf9\u8c61\u7684\u5c5e\u6027\u540d\u7ec4\u6210\u7684\u5143\u7ec4\u6216\u5217\u8868 # list_display_links \u4f5c\u7528 \u5b9a\u4e49\u5728\u5217\u8868\u9875\u4e0a\u4e5f\u80fd\u591f\u94fe\u63a5\u5230\u8be6\u60c5\u9875\u7684\u5b57\u6bb5\u4eec # list_editable \u4f5c\u7528 \u5b9a\u4e49\u5728\u5217\u8868\u9875\u4e0a\u5c31\u80fd\u591f\u4fee\u6539\u7684\u5b57\u6bb5\u4eec \u53d6\u503c \u53ea\u80fd\u51fa\u73b0\u5728list_display\u4e2d\uff0c\u4e0d\u80fd\u51fa\u73b0\u5728list_display_links\u4e2d # search_fields \u4f5c\u7528 \u5728\u5217\u8868\u9875\u7684\u504f\u4e0a\u6dfb\u52a0\u4e00\u4e2a\u641c\u7d22\u680f\uff0c\u3001 \u5b9a\u4e49\u641c\u7d22\u680f\u4e2d\u5141\u8bb8\u641c\u7d22\u7684\u5b57\u6bb5\u503c\u4eec # list_filter \u4f5c\u7528 \u5728\u5217\u8868\u9875\u7684\u53f3\u4fa7\u589e\u52a0\u8fc7\u6ee4\u5668\u6765\u5b9e\u73b0\u5feb\u901f\u7b5b\u9009 # date_hierarchy \u4f5c\u7528 \u5728\u5217\u8868\u9875\u7684\u9876\u90e8\u4f1a\u589e\u52a0\u4e00\u4e2a\u65f6\u95f4\u9009\u62e9\u5668\uff0c\u53d6\u503c\u5c5e\u6027\u5fc5\u987b\u662fDateField \u6216 DateTimeField\u7684\u5217 # fields \u4f5c\u7528 \u5728\u8be6\u60c5\u9875\u9762\u4e2d\uff0c\u6307\u5b9a\u8981\u663e\u793a\u90a3\u4e9b\u5b57\u6bb5\u5e76\u6309\u7167\u4ec0\u4e48\u987a\u5e8f\u663e\u793a # fieldsets \u4f5c\u7528 \u5728\u8be6\u60c5\u9875\u4e2d\u5bf9\u5b57\u6bb5\u4eec\u8fdb\u884c\u5206\u7ec4\u663e\u793a \u6ce8\u610f fieldssets \u4e0e fields \u4e0d\u80fd\u5171\u5b58 \u53d6\u503c fieldssets = [ # \u5206\u7ec41 ('\u5206\u7ec4\u540d\u79f0', { 'fields': ('\u5c5e\u60271', '\u5c5e\u60272'), 'classes': ('collapse',) # collapse \u6298\u53e0 }), # \u5206\u7ec42 ] ```","title":"Models \u7684\u9ad8\u7ea7\u7ba1\u7406"},{"location":"django/django/","text":"1. django\u4ecb\u7ecd\u53ca\u5b89\u88c5 1.1 \u7248\u672c\u4ecb\u7ecd \u6846\u67b6\u4ecb\u7ecd Django\u662f\u4e00\u4e2a\u5f00\u6e90\u6846\u67b6\uff0c2005\u5e74\u5f00\u53d1\uff0c\u91c7\u7528python\u8bed\u8a00\u7f16\u5199\u7684\u3002 \u65e9\u671f\u662f\u4e3b\u8981\u505a\u65b0\u95fb\u548c\u5185\u5bb9\u7ba1\u7406\u7684\u7f51\u7ad9 Django\u672c\u8eab\u63d0\u4f9b\u4e86\u975e\u5e38\u5f3a\u5927\u7684\u540e\u53f0\u7ba1\u7406\u7cfb\u7edf \u5b98\u7f51 http://www.djangoproject.com \u4e2d\u6587\u6587\u6863 http://djangobook.py3k.cn/2.0/ \u7248\u672c\u8def\u7ebf\u56fe \u6a2a\u8f74\u4ee3\u8868\u53d1\u884c\u5e74\u4efd\u3002 LTS \u662f\u957f\u671f\u652f\u6301(Long Term Support)\u7684\u7f29\u5199 \uff0c\u9009\u7528django\u5f00\u53d1\u65f6\uff0c\u4e00\u822c\u9009\u7528\u957f\u671f\u652f\u6301\u7248\u3002 django1.8 2019\u5e74\u5c31\u4e0d\u518d\u652f\u6301\u7ef4\u62a4\u4e86\u3002 django1.11 2021\u5e74 \u4e0d\u518d\u652f\u6301\u7ef4\u62a4\u3002 \u7b14\u8005\u5b66\u4e60\u7684\u65f6\u5019\u4f7f\u7528\u7684\u662fdjango1.11\u7248\uff0c\u73b0\u5728\u63a8\u8350\u4f7f\u7528\u7684\u662fdjango2.2 \u4ee5\u540e\u7248\u672c\u3002 \u6846\u67b6\u6a21\u5f0f MTV M Models - \u6a21\u578b\uff08\u6570\u636e\u5e93\uff09 T Templates - \u6a21\u677f\uff08\u7f51\u9875\uff09 V Views - \u89c6\u56fe\uff08\u903b\u8f91\uff09 Django\u6846\u67b6\u7684\u5b89\u88c5 \u5b89\u88c5\u6700\u65b0\u7248\u672c\u7684django python pip install django \u5b89\u88c5\u6307\u5b9a\u7248\u672c\u7684django python pip install django==2.2.6 \u79bb\u7ebf\u5b89\u88c5 django\u5b98\u7f51\u4e0b\u8f7dtar.gz\u6587\u4ef6\uff0c\u6839\u636e\u5b98\u7f51\u6587\u6863\u5b89\u88c5 django\u6846\u67b6\u7684\u4f7f\u7528 \u521b\u5efa\u9879\u76ee \u4f7f\u7528 django-admin \u521b\u5efa Django \u9879\u76ee \uff0c\u5728\u63a7\u5236\u53f0\u8f93\u5165\u3002 \u200b \u8bed\u6cd5\uff1a django-admin startproject \u9879\u76ee\u540d\u79f0 \u200b \u5982: django-admin startproject django_test Django\u9879\u76ee\u7ed3\u6784 manage.py \u529f\u80fd\uff1a \u5305\u542b\u6267\u884cdjango\u4e2d\u7684\u5404\u9879\u64cd\u4f5c\u7684\u6307\u4ee4 \u5982\uff1a \u542f\u52a8\u670d\u52a1 runserver \u4e3b\u76ee\u5f55 django_test/django_test __init__.py \u9879\u76ee\u7684\u521d\u59cb\u5316\u6587\u4ef6\uff0c\u81ea\u52a8\u8fd0\u884c urls.py \u9879\u76ee\u7684\u57fa\u7840\u8def\u7531\u914d\u7f6e\u6587\u4ef6 wsgi.py Web Server Gateway Interface Web \u670d\u52a1\u7f51\u5173\u63a5\u53e3 settings.py \u9879\u76ee\u7684\u914d\u7f6e\u6587\u4ef6 python 1. BASE_DIR \u9879\u76ee\u6839\u76ee\u5f55 2. ALLOWED_HOSTS \u8bbe\u7f6e\u5141\u8bb8\u8bbf\u95ee\u5230\u672c\u9879\u76ee\u7684\u5730\u5740\u5217\u8868 \u5982\u679c\u5141\u8bb8\u5728\u7f51\u7edc\u4e2d\u88ab\u5176\u4ed6\u7684\u673a\u5668\u8bbf\u95ee\u5230\u7684\u8bdd \u63a8\u8350\u5199[\"*\"], \u8868\u793a\u4efb\u4f55\u80fd\u591f\u8868\u793a\u8be5\u673a\u5668\u7684\u5730\u5740\u90fd\u80fd\u8bbf\u95ee\u5230\u8be5\u9879\u76ee \u540c\u65f6\u5728\u542f\u52a8\u670d\u52a1\u65f6\u8fd8\u9700\u8981\u6307\u5b9a\u5730\u5740\u548c\u7aef\u53e3 python3 manage.py runserver 0.0.0.0:8000 3. INSTALLED_APPS \u6307\u5b9a\u5df2\u5b89\u88c5\u7684\u5e94\u7528\uff0c\u5982\u679c\u7531\u81ea\u5b9a\u4e49\u7684\u5e94\u7528\u7684\u8bdd\u9700\u8981\u5728\u6b64\u6ce8\u518c 4. MIDDLEWARE \u4e2d\u95f4\u4ef6\uff0c\u5982\u679c\u6709\u81ea\u5b9a\u4e49\u7684\u4e2d\u95f4\u4ef6\uff0c\u9700\u8981\u5728\u6b64\u6ce8\u518c 5. ROOT_URLCONF \u6307\u5b9a\u9879\u76ee\u7684\u57fa\u7840\u8def\u7531\u914d\u7f6e\u6587\u4ef6 6. TEMPLATES \u914d\u7f6e\u6a21\u677f\u7684\u76f8\u5e94\u4fe1\u606f 7. DATABASES \u914d\u7f6e\u6570\u636e\u5e93\u7684\u4fe1\u606f 8. LANGUAGE_CODE \u8bbe\u7f6e\u8bed\u8a00\uff0c\u4e3b\u8981\u8bbe\u7f6e\u4e2d\u6587\u7684\u8bdd\uff0c\u5141\u8bb8\u5c06\u503c\u6539\u4e3a'zh-Hans' 9. TIME_ZONE \u6307\u5b9a\u65f6\u533a\uff0c\u9ed8\u8ba4\u65f6\u533a\uff0c\u5141\u8bb8\u5c06\u503c\u66f4\u6539\u4e3a\"Asia/Shanghai\" url\u7684\u4f7f\u7528 urls.py \u9ed8\u8ba4\u5728\u4e3b\u76ee\u5f55\u4e2d\uff0c\u4e3b\u8def\u7531\u914d\u7f6e\u6587\u4ef6\uff0c\u4f1a\u5305\u542b\u6700\u57fa\u672c\u7684\u5730\u5740\u6620\u5c04\uff0c\u6bcf\u4e2a\u5730\u5740\u8bbf\u95ee\u90fd\u5fc5\u987b\u8981\u5148\u7ecf\u8fc7\u8be5\u6587\u4ef6 \u4f5c\u7528\uff1a\u901a\u8fc7urls\u4e2d\u5b9a\u4e49\u597d\u7684\u5730\u5740\u627e\u5230\u5bf9\u5e94\u7684\u89c6\u56fe\u5904\u7406\u51fd\u6570 python urlpatterns = [ path('admin/', admin.site.urls), ] path() \u4f5c\u7528\uff1a\u4e3a\u4e86\u5339\u914d\u7528\u6237\u7684\u8bbf\u95ee\u8def\u5f84 \u8bed\u6cd5: ``` from django.urls import path path(route, view, kwargs=None, name=None) route: \u5339\u914d\u8bf7\u6c42\u7684url view: \u5730\u5740\u5339\u914d\u4e0a\u4e4b\u540e\u8981\u6267\u884c\u64cd\u4f5c\u7684\u89c6\u56fe\u5904\u7406\u51fd\u6570 kwargs: \u5b57\u5178\uff0c\u7528\u6765\u60f3view\u4f20\u53c2\u7684\uff0c\u53ef\u4ee5\u7701\u7565 name: \u4e3aurl\u8d77\u522b\u540d, \u5728\u5730\u5740\u53cd\u5411\u89e3\u6790\u65f6\u4f7f\u7528 ``` \u5411url\u4f20\u9012\u53c2\u6570 \u65b9\u5f0f\u4e00\uff1a\u901a\u8fc7path\u7684\u53c2\u6570kwargs\u7684\u65b9\u5f0f\u4f20\u9012\uff0c\u4e0d\u63a8\u8350\uff0c\u8fd9\u91cc\u4f9d\u8d56\u4e86django\u6846\u67b6\uff0c\u4e0d\u901a\u7528\u3002 \u65b9\u5f0f\u4e8c\uff1a\u901a\u8fc7http\u534f\u8bae\u8fdb\u884c\u4f20\u53c2 get\u8bf7\u6c42 http:// xxxx.com/login?id=1&token=xxx post\u8bf7\u6c42 http:// xxx.com/login \u6570\u636e\u653e\u5728 form-data\u91cc\uff0c\u8be6\u7ec6\u4e00\u70b9\u7684\u8bdd\u5c31\u662f\u653e\u5728http\u8bf7\u6c42\u7684\u8bf7\u6c42\u4f53\u91cc\uff08\u53ef\u4ee5\u53bb\u770b\u770bhttp\u534f\u8bae\u7684\u5185\u5bb9\uff09 \u6570\u636e\u600e\u4e48\u53d6\uff1f\uff1f \u540e\u9762\u7684\u6559\u7a0b\u4f1a\u8bb2\u5230\u3002 Django\u4e2d\u7684\u5e94\u7528 \u4ec0\u4e48\u662f\u5e94\u7528 \uff1f \u5e94\u7528\u5c31\u662f\u7f51\u7ad9\u4e2d\u7684\u4e00\u4e2a\u72ec\u7acb\u7684\u6a21\u5757 \u5982: \u7f51\u6613\u7f51\u7ad9\u53ef\u5206\u4e3a\u82e5\u5e72\u5e94\u7528\u7ec4\u6210 \u200b \u65b0\u95fb\u5e94\u7528: \u4e0e\u65b0\u95fb\u76f8\u5173\u7684\u5185\u5bb9 \u200b \u8f66\u5e94\u7528: \u4e0e\u6c7d\u8f66\u76f8\u5173\u7684\u5185\u5bb9 \u200b \u79d1\u6280\u5e94\u7528: \u4e0e\u79d1\u6280\u76f8\u5173\u7684\u5185\u5bb9 \u5728django\u4e2d, \u4e3b\u76ee\u5f55\u4e00\u822c\u4e0d\u5904\u7406\u5177\u4f53\u7684\u8bf7\u6c42, \u4e3b\u76ee\u5f55\u4e00\u822c\u5904\u7406\u7684\u662f\u9879\u76ee\u7684\u521d\u59cb\u5316\u64cd\u4f5c \u5904\u7406\u7684\u662f\u521d\u59cb\u5316\u64cd\u4f5c, \u4ee5\u53ca\u8bf7\u6c42\u7684\u5206\u53d1(\u5206\u5e03\u5f0f\u8bf7\u6c42\u5904\u7406), \u800c\u5177\u4f53\u7684\u8bf7\u6c42\u662f\u7531\u5404\u4e2a\u5e94\u7528\u53bb\u5904\u7406. \u521b\u5efa\u5e94\u7528 \u547d\u4ee4 python python manage.py startapp \u5e94\u7528\u7684\u540d\u79f0 \u9700\u8981\u5728settings.py \u4e2d\u8fdb\u884c\u6ce8\u518c \uff0c \u5728INSTALLED_APPS \u4e2d\u8ffd\u52a0\u5e94\u7528\u7684\u540d\u79f0\u6765\u6ce8\u518c\u5e94\u7528 python INSTALLED_APPS = [ 'django.contrib.admin', ... ... '\u81ea\u5b9a\u4e49\u7684\u5e94\u7528\u540d\u79f0' ] \u5e94\u7528\u7684\u89e3\u6790\u7ec4\u6210 migrations \u6587\u4ef6\u5939 : \u5b58\u653e\u6570\u636e\u5e93\u7684\u4e2d\u95f4\u6587\u4ef6 __init__.py : \u5e94\u7528\u7684\u521d\u59cb\u5316\u6587\u4ef6 admin.py : \u5e94\u7528\u7684\u540e\u53f0\u7ba1\u7406\u914d\u7f6e\u6587\u4ef6 apps.py : \u548c\u5e94\u7528\u7684\u5c5e\u6027\u914d\u7f6e\u6587\u4ef6 models.py : Models \u4e0e \u6a21\u578b\u76f8\u5173\u7684\u6620\u5c04\u6587\u4ef6 tests.py : \u5e94\u7528\u7684\u5355\u5143\u6d4b\u8bd5\u6587\u4ef6 views.py : \u89c6\u56fe\u5904\u7406\u51fd\u6570\u7684\u6587\u4ef6 \u5206\u90e8\u5f0f\u7684\u8def\u7531\u7cfb\u7edf \u5728\u6bcf\u4e2a\u5e94\u7528\u4e2d\u5206\u522b\u521b\u5efaurls.py, \u683c\u5f0f\u53c2\u8003\u4e3b\u8def\u7531\u6587\u4ef6 \u76ee\u7684: \u4e3a\u4e86\u5904\u7406\u5404\u4e2a\u5e94\u7528\u4e2d\u7684\u8bf7\u6c42\u8def\u7531 \u7528\u6cd5: (\u8fd9\u91cc\u76f4\u63a5\u5f15\u7528django\u5b98\u65b9\u7684\u4f8b\u5b50) \u521b\u5efa\u4e00\u4e2apolls\u5e94\u7528\uff1a python python manage.py startapp polls django_test/setting.py \u58f0\u660epolls\u6a21\u5757 INSTALLED_APPS = [ 'django.contrib.admin', 'django.contrib.auth', 'django.contrib.contenttypes', 'django.contrib.sessions', 'django.contrib.messages', 'django.contrib.staticfiles', 'polls' # <- \u8fd9\u91cc ] \u5728polls\u5305\u4e0b\u521b\u5efa urls.py \u6a21\u5757\uff0c\u5e76\u5b9a\u4e49\u4e00\u4e2ahttp://127.0.0.1:8000/ \u8def\u7531\u3002 ```python from django.urls import path from .views import index_view urlpatterns = [ path('', index_view, name='index'), ] ``` \u7f16\u5199\u8bd5\u56fe\u51fd\u6570 polls/views.py ```python from django.http import HttpResponse from django.shortcuts import render # Create your views here. def index_view(request): return HttpResponse('index') ``` \u5c06polls\u5e94\u7528\u7684urls\u6ce8\u518c\u5230\u4e3b\u8def\u7531\u7cfb\u7edf\u4e2d\uff0c django_test/urls.py ```python from django.contrib import admin from django.urls import path, include urlpatterns = [ path('admin/', admin.site.urls), path('', include(\"polls.urls\")), ] ``` \u542f\u52a8\u670d\u52a1\uff0c\u8bbf\u95ee\u4e3b\u9875\uff1ahttp://127.0.0.1:8000/","title":"1. django\u4ecb\u7ecd\u53ca\u5b89\u88c5"},{"location":"django/django/#1-django","text":"","title":"1. django\u4ecb\u7ecd\u53ca\u5b89\u88c5"},{"location":"django/django/#11","text":"\u6846\u67b6\u4ecb\u7ecd Django\u662f\u4e00\u4e2a\u5f00\u6e90\u6846\u67b6\uff0c2005\u5e74\u5f00\u53d1\uff0c\u91c7\u7528python\u8bed\u8a00\u7f16\u5199\u7684\u3002 \u65e9\u671f\u662f\u4e3b\u8981\u505a\u65b0\u95fb\u548c\u5185\u5bb9\u7ba1\u7406\u7684\u7f51\u7ad9 Django\u672c\u8eab\u63d0\u4f9b\u4e86\u975e\u5e38\u5f3a\u5927\u7684\u540e\u53f0\u7ba1\u7406\u7cfb\u7edf \u5b98\u7f51 http://www.djangoproject.com \u4e2d\u6587\u6587\u6863 http://djangobook.py3k.cn/2.0/","title":"1.1 \u7248\u672c\u4ecb\u7ecd"},{"location":"django/django/#_1","text":"\u6a2a\u8f74\u4ee3\u8868\u53d1\u884c\u5e74\u4efd\u3002 LTS \u662f\u957f\u671f\u652f\u6301(Long Term Support)\u7684\u7f29\u5199 \uff0c\u9009\u7528django\u5f00\u53d1\u65f6\uff0c\u4e00\u822c\u9009\u7528\u957f\u671f\u652f\u6301\u7248\u3002 django1.8 2019\u5e74\u5c31\u4e0d\u518d\u652f\u6301\u7ef4\u62a4\u4e86\u3002 django1.11 2021\u5e74 \u4e0d\u518d\u652f\u6301\u7ef4\u62a4\u3002 \u7b14\u8005\u5b66\u4e60\u7684\u65f6\u5019\u4f7f\u7528\u7684\u662fdjango1.11\u7248\uff0c\u73b0\u5728\u63a8\u8350\u4f7f\u7528\u7684\u662fdjango2.2 \u4ee5\u540e\u7248\u672c\u3002","title":"\u7248\u672c\u8def\u7ebf\u56fe"},{"location":"django/django/#_2","text":"MTV M Models - \u6a21\u578b\uff08\u6570\u636e\u5e93\uff09 T Templates - \u6a21\u677f\uff08\u7f51\u9875\uff09 V Views - \u89c6\u56fe\uff08\u903b\u8f91\uff09","title":"\u6846\u67b6\u6a21\u5f0f"},{"location":"django/django/#django","text":"\u5b89\u88c5\u6700\u65b0\u7248\u672c\u7684django python pip install django \u5b89\u88c5\u6307\u5b9a\u7248\u672c\u7684django python pip install django==2.2.6 \u79bb\u7ebf\u5b89\u88c5 django\u5b98\u7f51\u4e0b\u8f7dtar.gz\u6587\u4ef6\uff0c\u6839\u636e\u5b98\u7f51\u6587\u6863\u5b89\u88c5","title":"Django\u6846\u67b6\u7684\u5b89\u88c5"},{"location":"django/django/#django_1","text":"","title":"django\u6846\u67b6\u7684\u4f7f\u7528"},{"location":"django/django/#_3","text":"\u4f7f\u7528 django-admin \u521b\u5efa Django \u9879\u76ee \uff0c\u5728\u63a7\u5236\u53f0\u8f93\u5165\u3002 \u200b \u8bed\u6cd5\uff1a django-admin startproject \u9879\u76ee\u540d\u79f0 \u200b \u5982: django-admin startproject django_test","title":"\u521b\u5efa\u9879\u76ee"},{"location":"django/django/#django_2","text":"manage.py \u529f\u80fd\uff1a \u5305\u542b\u6267\u884cdjango\u4e2d\u7684\u5404\u9879\u64cd\u4f5c\u7684\u6307\u4ee4 \u5982\uff1a \u542f\u52a8\u670d\u52a1 runserver \u4e3b\u76ee\u5f55 django_test/django_test __init__.py \u9879\u76ee\u7684\u521d\u59cb\u5316\u6587\u4ef6\uff0c\u81ea\u52a8\u8fd0\u884c urls.py \u9879\u76ee\u7684\u57fa\u7840\u8def\u7531\u914d\u7f6e\u6587\u4ef6 wsgi.py Web Server Gateway Interface Web \u670d\u52a1\u7f51\u5173\u63a5\u53e3 settings.py \u9879\u76ee\u7684\u914d\u7f6e\u6587\u4ef6 python 1. BASE_DIR \u9879\u76ee\u6839\u76ee\u5f55 2. ALLOWED_HOSTS \u8bbe\u7f6e\u5141\u8bb8\u8bbf\u95ee\u5230\u672c\u9879\u76ee\u7684\u5730\u5740\u5217\u8868 \u5982\u679c\u5141\u8bb8\u5728\u7f51\u7edc\u4e2d\u88ab\u5176\u4ed6\u7684\u673a\u5668\u8bbf\u95ee\u5230\u7684\u8bdd \u63a8\u8350\u5199[\"*\"], \u8868\u793a\u4efb\u4f55\u80fd\u591f\u8868\u793a\u8be5\u673a\u5668\u7684\u5730\u5740\u90fd\u80fd\u8bbf\u95ee\u5230\u8be5\u9879\u76ee \u540c\u65f6\u5728\u542f\u52a8\u670d\u52a1\u65f6\u8fd8\u9700\u8981\u6307\u5b9a\u5730\u5740\u548c\u7aef\u53e3 python3 manage.py runserver 0.0.0.0:8000 3. INSTALLED_APPS \u6307\u5b9a\u5df2\u5b89\u88c5\u7684\u5e94\u7528\uff0c\u5982\u679c\u7531\u81ea\u5b9a\u4e49\u7684\u5e94\u7528\u7684\u8bdd\u9700\u8981\u5728\u6b64\u6ce8\u518c 4. MIDDLEWARE \u4e2d\u95f4\u4ef6\uff0c\u5982\u679c\u6709\u81ea\u5b9a\u4e49\u7684\u4e2d\u95f4\u4ef6\uff0c\u9700\u8981\u5728\u6b64\u6ce8\u518c 5. ROOT_URLCONF \u6307\u5b9a\u9879\u76ee\u7684\u57fa\u7840\u8def\u7531\u914d\u7f6e\u6587\u4ef6 6. TEMPLATES \u914d\u7f6e\u6a21\u677f\u7684\u76f8\u5e94\u4fe1\u606f 7. DATABASES \u914d\u7f6e\u6570\u636e\u5e93\u7684\u4fe1\u606f 8. LANGUAGE_CODE \u8bbe\u7f6e\u8bed\u8a00\uff0c\u4e3b\u8981\u8bbe\u7f6e\u4e2d\u6587\u7684\u8bdd\uff0c\u5141\u8bb8\u5c06\u503c\u6539\u4e3a'zh-Hans' 9. TIME_ZONE \u6307\u5b9a\u65f6\u533a\uff0c\u9ed8\u8ba4\u65f6\u533a\uff0c\u5141\u8bb8\u5c06\u503c\u66f4\u6539\u4e3a\"Asia/Shanghai\"","title":"Django\u9879\u76ee\u7ed3\u6784"},{"location":"django/django/#url","text":"urls.py \u9ed8\u8ba4\u5728\u4e3b\u76ee\u5f55\u4e2d\uff0c\u4e3b\u8def\u7531\u914d\u7f6e\u6587\u4ef6\uff0c\u4f1a\u5305\u542b\u6700\u57fa\u672c\u7684\u5730\u5740\u6620\u5c04\uff0c\u6bcf\u4e2a\u5730\u5740\u8bbf\u95ee\u90fd\u5fc5\u987b\u8981\u5148\u7ecf\u8fc7\u8be5\u6587\u4ef6 \u4f5c\u7528\uff1a\u901a\u8fc7urls\u4e2d\u5b9a\u4e49\u597d\u7684\u5730\u5740\u627e\u5230\u5bf9\u5e94\u7684\u89c6\u56fe\u5904\u7406\u51fd\u6570 python urlpatterns = [ path('admin/', admin.site.urls), ] path() \u4f5c\u7528\uff1a\u4e3a\u4e86\u5339\u914d\u7528\u6237\u7684\u8bbf\u95ee\u8def\u5f84 \u8bed\u6cd5: ``` from django.urls import path path(route, view, kwargs=None, name=None) route: \u5339\u914d\u8bf7\u6c42\u7684url view: \u5730\u5740\u5339\u914d\u4e0a\u4e4b\u540e\u8981\u6267\u884c\u64cd\u4f5c\u7684\u89c6\u56fe\u5904\u7406\u51fd\u6570 kwargs: \u5b57\u5178\uff0c\u7528\u6765\u60f3view\u4f20\u53c2\u7684\uff0c\u53ef\u4ee5\u7701\u7565 name: \u4e3aurl\u8d77\u522b\u540d, \u5728\u5730\u5740\u53cd\u5411\u89e3\u6790\u65f6\u4f7f\u7528 ``` \u5411url\u4f20\u9012\u53c2\u6570 \u65b9\u5f0f\u4e00\uff1a\u901a\u8fc7path\u7684\u53c2\u6570kwargs\u7684\u65b9\u5f0f\u4f20\u9012\uff0c\u4e0d\u63a8\u8350\uff0c\u8fd9\u91cc\u4f9d\u8d56\u4e86django\u6846\u67b6\uff0c\u4e0d\u901a\u7528\u3002 \u65b9\u5f0f\u4e8c\uff1a\u901a\u8fc7http\u534f\u8bae\u8fdb\u884c\u4f20\u53c2 get\u8bf7\u6c42 http:// xxxx.com/login?id=1&token=xxx post\u8bf7\u6c42 http:// xxx.com/login \u6570\u636e\u653e\u5728 form-data\u91cc\uff0c\u8be6\u7ec6\u4e00\u70b9\u7684\u8bdd\u5c31\u662f\u653e\u5728http\u8bf7\u6c42\u7684\u8bf7\u6c42\u4f53\u91cc\uff08\u53ef\u4ee5\u53bb\u770b\u770bhttp\u534f\u8bae\u7684\u5185\u5bb9\uff09 \u6570\u636e\u600e\u4e48\u53d6\uff1f\uff1f \u540e\u9762\u7684\u6559\u7a0b\u4f1a\u8bb2\u5230\u3002","title":"url\u7684\u4f7f\u7528"},{"location":"django/django/#django_3","text":"\u4ec0\u4e48\u662f\u5e94\u7528 \uff1f \u5e94\u7528\u5c31\u662f\u7f51\u7ad9\u4e2d\u7684\u4e00\u4e2a\u72ec\u7acb\u7684\u6a21\u5757 \u5982: \u7f51\u6613\u7f51\u7ad9\u53ef\u5206\u4e3a\u82e5\u5e72\u5e94\u7528\u7ec4\u6210 \u200b \u65b0\u95fb\u5e94\u7528: \u4e0e\u65b0\u95fb\u76f8\u5173\u7684\u5185\u5bb9 \u200b \u8f66\u5e94\u7528: \u4e0e\u6c7d\u8f66\u76f8\u5173\u7684\u5185\u5bb9 \u200b \u79d1\u6280\u5e94\u7528: \u4e0e\u79d1\u6280\u76f8\u5173\u7684\u5185\u5bb9 \u5728django\u4e2d, \u4e3b\u76ee\u5f55\u4e00\u822c\u4e0d\u5904\u7406\u5177\u4f53\u7684\u8bf7\u6c42, \u4e3b\u76ee\u5f55\u4e00\u822c\u5904\u7406\u7684\u662f\u9879\u76ee\u7684\u521d\u59cb\u5316\u64cd\u4f5c \u5904\u7406\u7684\u662f\u521d\u59cb\u5316\u64cd\u4f5c, \u4ee5\u53ca\u8bf7\u6c42\u7684\u5206\u53d1(\u5206\u5e03\u5f0f\u8bf7\u6c42\u5904\u7406), \u800c\u5177\u4f53\u7684\u8bf7\u6c42\u662f\u7531\u5404\u4e2a\u5e94\u7528\u53bb\u5904\u7406. \u521b\u5efa\u5e94\u7528 \u547d\u4ee4 python python manage.py startapp \u5e94\u7528\u7684\u540d\u79f0 \u9700\u8981\u5728settings.py \u4e2d\u8fdb\u884c\u6ce8\u518c \uff0c \u5728INSTALLED_APPS \u4e2d\u8ffd\u52a0\u5e94\u7528\u7684\u540d\u79f0\u6765\u6ce8\u518c\u5e94\u7528 python INSTALLED_APPS = [ 'django.contrib.admin', ... ... '\u81ea\u5b9a\u4e49\u7684\u5e94\u7528\u540d\u79f0' ] \u5e94\u7528\u7684\u89e3\u6790\u7ec4\u6210 migrations \u6587\u4ef6\u5939 : \u5b58\u653e\u6570\u636e\u5e93\u7684\u4e2d\u95f4\u6587\u4ef6 __init__.py : \u5e94\u7528\u7684\u521d\u59cb\u5316\u6587\u4ef6 admin.py : \u5e94\u7528\u7684\u540e\u53f0\u7ba1\u7406\u914d\u7f6e\u6587\u4ef6 apps.py : \u548c\u5e94\u7528\u7684\u5c5e\u6027\u914d\u7f6e\u6587\u4ef6 models.py : Models \u4e0e \u6a21\u578b\u76f8\u5173\u7684\u6620\u5c04\u6587\u4ef6 tests.py : \u5e94\u7528\u7684\u5355\u5143\u6d4b\u8bd5\u6587\u4ef6 views.py : \u89c6\u56fe\u5904\u7406\u51fd\u6570\u7684\u6587\u4ef6 \u5206\u90e8\u5f0f\u7684\u8def\u7531\u7cfb\u7edf \u5728\u6bcf\u4e2a\u5e94\u7528\u4e2d\u5206\u522b\u521b\u5efaurls.py, \u683c\u5f0f\u53c2\u8003\u4e3b\u8def\u7531\u6587\u4ef6 \u76ee\u7684: \u4e3a\u4e86\u5904\u7406\u5404\u4e2a\u5e94\u7528\u4e2d\u7684\u8bf7\u6c42\u8def\u7531 \u7528\u6cd5: (\u8fd9\u91cc\u76f4\u63a5\u5f15\u7528django\u5b98\u65b9\u7684\u4f8b\u5b50) \u521b\u5efa\u4e00\u4e2apolls\u5e94\u7528\uff1a python python manage.py startapp polls django_test/setting.py \u58f0\u660epolls\u6a21\u5757 INSTALLED_APPS = [ 'django.contrib.admin', 'django.contrib.auth', 'django.contrib.contenttypes', 'django.contrib.sessions', 'django.contrib.messages', 'django.contrib.staticfiles', 'polls' # <- \u8fd9\u91cc ] \u5728polls\u5305\u4e0b\u521b\u5efa urls.py \u6a21\u5757\uff0c\u5e76\u5b9a\u4e49\u4e00\u4e2ahttp://127.0.0.1:8000/ \u8def\u7531\u3002 ```python from django.urls import path from .views import index_view urlpatterns = [ path('', index_view, name='index'), ] ``` \u7f16\u5199\u8bd5\u56fe\u51fd\u6570 polls/views.py ```python from django.http import HttpResponse from django.shortcuts import render # Create your views here. def index_view(request): return HttpResponse('index') ``` \u5c06polls\u5e94\u7528\u7684urls\u6ce8\u518c\u5230\u4e3b\u8def\u7531\u7cfb\u7edf\u4e2d\uff0c django_test/urls.py ```python from django.contrib import admin from django.urls import path, include urlpatterns = [ path('admin/', admin.site.urls), path('', include(\"polls.urls\")), ] ``` \u542f\u52a8\u670d\u52a1\uff0c\u8bbf\u95ee\u4e3b\u9875\uff1ahttp://127.0.0.1:8000/","title":"Django\u4e2d\u7684\u5e94\u7528"},{"location":"drf/1.django\u89c6\u56fe\u4e4bCBV\u7684\u57fa\u672c\u4f7f\u7528/","text":"django\u89c6\u56fe\u4e4bCBV\u7684\u57fa\u672c\u4f7f\u7528 CBV \u548c FBV \u662f\u4ec0\u4e48\uff1f CBV: class base view \u200b \u57fa\u4e8e\u7c7b\u7684\u89c6\u56fe FBV: function base view \u200b \u57fa\u4e8e\u51fd\u6570\u7684\u89c6\u56fe \u6211\u4eec\u5728django\u57fa\u7840\u4e2d\u8bf4\u5230\u8def\u7531\u5339\u914d\u662f\u5339\u914d\u5230\u5bf9\u5e94\u7684\u51fd\u6570\uff0c\u7136\u540e\u8fd4\u56de\u8be5\u51fd\u6570\u5bf9\u5e94\u7684\u7ed3\u679c\uff0c\u800c\u4e0d\u662fclass\u3002\u9488\u5bf9\u8fd9\u4e2a\u95ee\u9898\uff0cdjango\u63d0\u4f9b\u4e86\u4e00\u4e2a\u7c7b\uff0c\u6211\u4eec\u5199\u7684\u7c7b\u89c6\u56fe\u53ea\u9700\u8981\u7ee7\u627f\u8fd9\u4e2a\u7c7bi\uff0cdjango\u5c31\u81ea\u52a8\u5e2e\u6211\u5b9e\u73b0http\u8bf7\u6c42\u548c\u7c7b\u65b9\u9762\u6620\u5c04\u5173\u7cfb\u3002 \u7c7b\u89c6\u56fe\u7684\u7528\u6cd5 \u5728 urls.py \u4e2d\u5b9a\u4e49\u8def\u7531\u89c4\u5219\uff08\u8fd9\u91cc\u4f7f\u7528django 2.2 \u4ee5\u4e0a\u7684\u7248\u672c\uff09 from .views import LoginView urlpatterns = [ path('login/', LoginView.as_view()) ] \u5728 views.py \u4e2d\u7f16\u5199\u7c7b\u89c6\u56fe from django.http import HttpResponse from django.views import View class LoginView(View): def get(self, request, *args, **kwargs): return HttpResponse('GET') def post(self, request, *args, **kwargs): return HttpResponse('POST') \u4e0d\u540c\u7684http\u8bf7\u6c42\u65b9\u5f0f\u53bbhttp://127.0.0.1:8000/login/ \u5c31\u4f1a\u6267\u884c\u7c7b\u89c6\u56fe\u4e2d\u5bf9\u5e94\u7684\u65b9\u6cd5\u3002 \u8def\u7531\u5206\u53d1\u600e\u4e48\u505a\u5230\u7684\u5462\uff1f \u200b \u5339\u914d\u5230\u8def\u7531\u4e4b\u540e\uff0c\u9996\u5148\u6267\u884c LoginView.as_view( ) \u65b9\u6cd5\uff0c LoginView\u7c7b\u4e0d\u5b58\u5728 as_view() \u65b9\u6cd5\uff0c\u53bb\u7236\u7c7b\u627e\uff0c\u7236\u7c7b\uff08View\uff09\u7684as_view()\u6e90\u7801\u5982\u4e0b\uff1a class View: \"\"\" Intentionally simple parent class for all views. Only implements dispatch-by-method and simple sanity checking. \"\"\" http_method_names = ['get', 'post', 'put', 'patch', 'delete', 'head', 'options', 'trace'] def __init__(self, **kwargs): \"\"\" Constructor. Called in the URLconf; can contain helpful extra keyword arguments, and other things. \"\"\" # Go through keyword arguments, and either save their values to our # instance, or raise an error. for key, value in kwargs.items(): setattr(self, key, value) @classonlymethod def as_view(cls, **initkwargs): \"\"\"Main entry point for a request-response process.\"\"\" for key in initkwargs: if key in cls.http_method_names: raise TypeError(\"You tried to pass in the %s method name as a \" \"keyword argument to %s(). Don't do that.\" % (key, cls.__name__)) if not hasattr(cls, key): raise TypeError(\"%s() received an invalid keyword %r. as_view \" \"only accepts arguments that are already \" \"attributes of the class.\" % (cls.__name__, key)) def view(request, *args, **kwargs): self = cls(**initkwargs) if hasattr(self, 'get') and not hasattr(self, 'head'): self.head = self.get self.setup(request, *args, **kwargs) if not hasattr(self, 'request'): raise AttributeError( \"%s instance has no 'request' attribute. Did you override \" \"setup() and forget to call super()?\" % cls.__name__ ) return self.dispatch(request, *args, **kwargs) view.view_class = cls view.view_initkwargs = initkwargs # take name and docstring from class update_wrapper(view, cls, updated=()) # and possible attributes set by decorators # like csrf_exempt from dispatch update_wrapper(view, cls.dispatch, assigned=()) return view \u770b\u6e90\u7801\u53ef\u4ee5\u770b\u51fa\uff0c as_view() \u65b9\u6cd5 \u5982\u679c\u8bf7\u6c42\u7684\u65b9\u6cd5\u6ca1\u5728 http_method_names \u4e2d\uff0c\u5219\u4f1a\u629b\u51fa\u5f02\u5e38 \u3002 \u53c8\u5b9a\u4e49\u4e86\u4e00\u4e2a\u51fd\u6570 view , self = cls(**initkwargs) \u7b49\u4ef7\u4e8e self = LoginView(**initkwargs) , \u968f\u540e\u8fdb\u884c\u4e86\u4e00\u4e9b\u5c5e\u6027\u7ed1\u5b9a self.setup(request, *args, **kwargs) \uff0c\u518d\u5224\u65ad\u4e86self\u5bf9\u8c61\u6709\u6ca1\u6709request\u5c5e\u6027\u3002 \u91cd\u70b9:\u8c03\u7528self.dispatch(request, *args, kwargs) \u65b9\u6cd5\u3002 python def dispatch(self, request, *args, **kwargs): # Try to dispatch to the right method; if a method doesn't exist, # defer to the error handler. Also defer to the error handler if the # request method isn't on the approved list. if request.method.lower() in self.http_method_names: handler = getattr(self, request.method.lower(), self.http_method_not_allowed) else: handler = self.http_method_not_allowed return handler(request, *args, **kwargs) \u4eceLoginView\u7684request\u4e2d\u83b7\u53d6\u8bf7\u6c42\u65b9\u5f0f\uff0c \u5982\u679crequest.method\u5b58\u5728\u4e8ehttp_method_names\u4e2d\uff0c\u5219\u4f7f\u7528getattr\u53cd\u5c04\u7684\u65b9\u5f0f\u6765\u5f97\u5230handler\uff0c\u518d\u6267\u884cCBV\u4e2d\u7684\u65b9\u6cd5\u5e76\u8fd4\u56de\u3002 \u7531\u6b64\uff0c\u53ef\u4ee5\u77e5\u9053\u5982\u679c\u5728Django\u9879\u76ee\u4e2d\u4f7f\u7528CBV\u7684\u6a21\u5f0f\uff0c\u5b9e\u9645\u4e0a\u8c03\u7528\u4e86getattr\u7684\u65b9\u5f0f\u6765\u6267\u884c\u83b7\u53d6\u7c7b\u4e2d\u7684\u8bf7\u6c42\u65b9\u6cd5\u5bf9\u5e94\u7684\u51fd\u6570 \u81ea\u5b9a\u4e49dispatch\u65b9\u6cd5 \u7531\u4e0a\u8ff0\u7684\u5206\u6790\u53ef\u77e5\uff0c\u4efb\u52a1cbv\u5728\u6267\u884c\u4ee3\u7801\u524d\u90fd\u4f1a\u6267\u884cdispatch\u65b9\u6cd5\uff0c\u6240\u4ee5dispatch\u53ef\u4ee5\u5f53\u52fe\u5b50\u4f7f\u7528\uff0c\u53ef\u4ee5\u5728\u8bf7\u6c42url\u65f6\u5728 dispatch \u4e2d\u5b9a\u4e49\u4e00\u4e9b\u884c\u4e3a\u3002 from django.http import HttpResponse from django.views import View class LoginView(View): def dispatch(self, request, *args, **kwargs): print('before') ret = super(LoginView, self).dispatch(request, *args, **kwargs) print('after') return ret def get(self, request, *args, **kwargs): return HttpResponse('GET') def post(self, request, *args, **kwargs): return HttpResponse('GET')","title":"django\u89c6\u56fe\u4e4bCBV\u7684\u57fa\u672c\u4f7f\u7528"},{"location":"drf/1.django\u89c6\u56fe\u4e4bCBV\u7684\u57fa\u672c\u4f7f\u7528/#djangocbv","text":"","title":"django\u89c6\u56fe\u4e4bCBV\u7684\u57fa\u672c\u4f7f\u7528"},{"location":"drf/1.django\u89c6\u56fe\u4e4bCBV\u7684\u57fa\u672c\u4f7f\u7528/#cbv-fbv","text":"","title":"CBV \u548c FBV \u662f\u4ec0\u4e48\uff1f"},{"location":"drf/1.django\u89c6\u56fe\u4e4bCBV\u7684\u57fa\u672c\u4f7f\u7528/#cbv-class-base-view","text":"\u200b \u57fa\u4e8e\u7c7b\u7684\u89c6\u56fe","title":"CBV: class base view"},{"location":"drf/1.django\u89c6\u56fe\u4e4bCBV\u7684\u57fa\u672c\u4f7f\u7528/#fbv-function-base-view","text":"\u200b \u57fa\u4e8e\u51fd\u6570\u7684\u89c6\u56fe \u6211\u4eec\u5728django\u57fa\u7840\u4e2d\u8bf4\u5230\u8def\u7531\u5339\u914d\u662f\u5339\u914d\u5230\u5bf9\u5e94\u7684\u51fd\u6570\uff0c\u7136\u540e\u8fd4\u56de\u8be5\u51fd\u6570\u5bf9\u5e94\u7684\u7ed3\u679c\uff0c\u800c\u4e0d\u662fclass\u3002\u9488\u5bf9\u8fd9\u4e2a\u95ee\u9898\uff0cdjango\u63d0\u4f9b\u4e86\u4e00\u4e2a\u7c7b\uff0c\u6211\u4eec\u5199\u7684\u7c7b\u89c6\u56fe\u53ea\u9700\u8981\u7ee7\u627f\u8fd9\u4e2a\u7c7bi\uff0cdjango\u5c31\u81ea\u52a8\u5e2e\u6211\u5b9e\u73b0http\u8bf7\u6c42\u548c\u7c7b\u65b9\u9762\u6620\u5c04\u5173\u7cfb\u3002","title":"FBV: function base view"},{"location":"drf/1.django\u89c6\u56fe\u4e4bCBV\u7684\u57fa\u672c\u4f7f\u7528/#_1","text":"\u5728 urls.py \u4e2d\u5b9a\u4e49\u8def\u7531\u89c4\u5219\uff08\u8fd9\u91cc\u4f7f\u7528django 2.2 \u4ee5\u4e0a\u7684\u7248\u672c\uff09 from .views import LoginView urlpatterns = [ path('login/', LoginView.as_view()) ] \u5728 views.py \u4e2d\u7f16\u5199\u7c7b\u89c6\u56fe from django.http import HttpResponse from django.views import View class LoginView(View): def get(self, request, *args, **kwargs): return HttpResponse('GET') def post(self, request, *args, **kwargs): return HttpResponse('POST') \u4e0d\u540c\u7684http\u8bf7\u6c42\u65b9\u5f0f\u53bbhttp://127.0.0.1:8000/login/ \u5c31\u4f1a\u6267\u884c\u7c7b\u89c6\u56fe\u4e2d\u5bf9\u5e94\u7684\u65b9\u6cd5\u3002","title":"\u7c7b\u89c6\u56fe\u7684\u7528\u6cd5"},{"location":"drf/1.django\u89c6\u56fe\u4e4bCBV\u7684\u57fa\u672c\u4f7f\u7528/#_2","text":"\u200b \u5339\u914d\u5230\u8def\u7531\u4e4b\u540e\uff0c\u9996\u5148\u6267\u884c LoginView.as_view( ) \u65b9\u6cd5\uff0c LoginView\u7c7b\u4e0d\u5b58\u5728 as_view() \u65b9\u6cd5\uff0c\u53bb\u7236\u7c7b\u627e\uff0c\u7236\u7c7b\uff08View\uff09\u7684as_view()\u6e90\u7801\u5982\u4e0b\uff1a class View: \"\"\" Intentionally simple parent class for all views. Only implements dispatch-by-method and simple sanity checking. \"\"\" http_method_names = ['get', 'post', 'put', 'patch', 'delete', 'head', 'options', 'trace'] def __init__(self, **kwargs): \"\"\" Constructor. Called in the URLconf; can contain helpful extra keyword arguments, and other things. \"\"\" # Go through keyword arguments, and either save their values to our # instance, or raise an error. for key, value in kwargs.items(): setattr(self, key, value) @classonlymethod def as_view(cls, **initkwargs): \"\"\"Main entry point for a request-response process.\"\"\" for key in initkwargs: if key in cls.http_method_names: raise TypeError(\"You tried to pass in the %s method name as a \" \"keyword argument to %s(). Don't do that.\" % (key, cls.__name__)) if not hasattr(cls, key): raise TypeError(\"%s() received an invalid keyword %r. as_view \" \"only accepts arguments that are already \" \"attributes of the class.\" % (cls.__name__, key)) def view(request, *args, **kwargs): self = cls(**initkwargs) if hasattr(self, 'get') and not hasattr(self, 'head'): self.head = self.get self.setup(request, *args, **kwargs) if not hasattr(self, 'request'): raise AttributeError( \"%s instance has no 'request' attribute. Did you override \" \"setup() and forget to call super()?\" % cls.__name__ ) return self.dispatch(request, *args, **kwargs) view.view_class = cls view.view_initkwargs = initkwargs # take name and docstring from class update_wrapper(view, cls, updated=()) # and possible attributes set by decorators # like csrf_exempt from dispatch update_wrapper(view, cls.dispatch, assigned=()) return view \u770b\u6e90\u7801\u53ef\u4ee5\u770b\u51fa\uff0c as_view() \u65b9\u6cd5 \u5982\u679c\u8bf7\u6c42\u7684\u65b9\u6cd5\u6ca1\u5728 http_method_names \u4e2d\uff0c\u5219\u4f1a\u629b\u51fa\u5f02\u5e38 \u3002 \u53c8\u5b9a\u4e49\u4e86\u4e00\u4e2a\u51fd\u6570 view , self = cls(**initkwargs) \u7b49\u4ef7\u4e8e self = LoginView(**initkwargs) , \u968f\u540e\u8fdb\u884c\u4e86\u4e00\u4e9b\u5c5e\u6027\u7ed1\u5b9a self.setup(request, *args, **kwargs) \uff0c\u518d\u5224\u65ad\u4e86self\u5bf9\u8c61\u6709\u6ca1\u6709request\u5c5e\u6027\u3002 \u91cd\u70b9:\u8c03\u7528self.dispatch(request, *args, kwargs) \u65b9\u6cd5\u3002 python def dispatch(self, request, *args, **kwargs): # Try to dispatch to the right method; if a method doesn't exist, # defer to the error handler. Also defer to the error handler if the # request method isn't on the approved list. if request.method.lower() in self.http_method_names: handler = getattr(self, request.method.lower(), self.http_method_not_allowed) else: handler = self.http_method_not_allowed return handler(request, *args, **kwargs) \u4eceLoginView\u7684request\u4e2d\u83b7\u53d6\u8bf7\u6c42\u65b9\u5f0f\uff0c \u5982\u679crequest.method\u5b58\u5728\u4e8ehttp_method_names\u4e2d\uff0c\u5219\u4f7f\u7528getattr\u53cd\u5c04\u7684\u65b9\u5f0f\u6765\u5f97\u5230handler\uff0c\u518d\u6267\u884cCBV\u4e2d\u7684\u65b9\u6cd5\u5e76\u8fd4\u56de\u3002 \u7531\u6b64\uff0c\u53ef\u4ee5\u77e5\u9053\u5982\u679c\u5728Django\u9879\u76ee\u4e2d\u4f7f\u7528CBV\u7684\u6a21\u5f0f\uff0c\u5b9e\u9645\u4e0a\u8c03\u7528\u4e86getattr\u7684\u65b9\u5f0f\u6765\u6267\u884c\u83b7\u53d6\u7c7b\u4e2d\u7684\u8bf7\u6c42\u65b9\u6cd5\u5bf9\u5e94\u7684\u51fd\u6570","title":"\u8def\u7531\u5206\u53d1\u600e\u4e48\u505a\u5230\u7684\u5462\uff1f"},{"location":"drf/1.django\u89c6\u56fe\u4e4bCBV\u7684\u57fa\u672c\u4f7f\u7528/#dispatch","text":"\u7531\u4e0a\u8ff0\u7684\u5206\u6790\u53ef\u77e5\uff0c\u4efb\u52a1cbv\u5728\u6267\u884c\u4ee3\u7801\u524d\u90fd\u4f1a\u6267\u884cdispatch\u65b9\u6cd5\uff0c\u6240\u4ee5dispatch\u53ef\u4ee5\u5f53\u52fe\u5b50\u4f7f\u7528\uff0c\u53ef\u4ee5\u5728\u8bf7\u6c42url\u65f6\u5728 dispatch \u4e2d\u5b9a\u4e49\u4e00\u4e9b\u884c\u4e3a\u3002 from django.http import HttpResponse from django.views import View class LoginView(View): def dispatch(self, request, *args, **kwargs): print('before') ret = super(LoginView, self).dispatch(request, *args, **kwargs) print('after') return ret def get(self, request, *args, **kwargs): return HttpResponse('GET') def post(self, request, *args, **kwargs): return HttpResponse('GET')","title":"\u81ea\u5b9a\u4e49dispatch\u65b9\u6cd5"},{"location":"drf/2.CBV\u4e2d\u89e3\u51b3csrf\u8ba4\u8bc1\u7684\u95ee\u9898/","text":"CBV\u4e2d\u89e3\u51b3csrf\u8ba4\u8bc1\u7684\u95ee\u9898 CSRF\uff08cross site request forgery\uff09\u8de8\u7ad9\u8bf7\u6c42\u4f2a\u9020 \u5177\u4f53\u662f\u5229\u7528\u4ec0\u4e48\u653b\u51fb\u7684\u53ef\u4ee5\u770b\u770b\u767e\u5ea6\u767e\u79d1\uff1a csrf\u767e\u79d1 \u9632\u5fa1\uff1a \u670d\u52a1\u5668\u7ed9\u5ba2\u6237\u7aef\u53d1\u9001\u4e00\u4e2a\u968f\u673a\u7684\u5b57\u7b26\u4e32\uff0c\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u4ea4\u4e92\u7684\u65f6\u5019\u9700\u8981\u5e26\u4e0a\u8fd9\u4e2a\u5b57\u7b26\u4e32\uff0c\u5426\u5219\u5c31\u662f\u8fdd\u6cd5\u7684\u7528\u6237\uff0c\u56e0\u4e3a\u6bcf\u6b21\u5b57\u7b26\u4e32\u90fd\u662f\u968f\u673a\u7684\uff0c\u4ece\u800c\u907f\u514d\u4e86\u9ed1\u5ba2\u5229\u7528\u7684\u98ce\u9669\u3002 django\u662f\u9632\u5fa1csrf\u7684\uff1f django\u9ed8\u8ba4\u5168\u5c40\u5f00\u542fcsrf\u8ba4\u8bc1\uff0c\u53ea\u8981\u662fpost\u8bf7\u6c42\u5c31\u5fc5\u987b\u5e26\u4e0acsrf\u7684\u5b57\u7b26\u4e32\u3002 \u5728 setting.py \u4e2d\u8bbe\u7f6e\u4e2d\u95f4\u4ef6\u3002 django.middleware.csrf.CsrfViewMiddleware MIDDLEWARE = [ 'django.middleware.security.SecurityMiddleware', 'django.contrib.sessions.middleware.SessionMiddleware', 'django.middleware.common.CommonMiddleware', 'django.middleware.csrf.CsrfViewMiddleware', # \u5168\u5c40\u5f00\u542f 'django.contrib.auth.middleware.AuthenticationMiddleware', 'django.contrib.messages.middleware.MessageMiddleware', 'django.middleware.clickjacking.XFrameOptionsMiddleware', ] \u4e5f\u53ef\u4ee5\u628a\u4e2d\u95f4\u4ef6\u6ce8\u91ca\u6389\uff0c\u5c31\u5168\u5c40\u5173\u95ed\u4e86\uff0c\u4f46\u662f\u5b58\u5728\u88ab\u5229\u7528\u6f0f\u6d1e\u7684\u98ce\u9669\u3002 \u5f00\u542fcsrf\u9a8c\u8bc1\u53d1\u9001post\u672a\u5e26\u968f\u673a\u5b57\u7b26\u4e32 ajax\u63d0\u4ea4post\u8bf7\u6c42 \u5728\u7f51\u9875\u4e2d\u4efb\u610f\u4e00\u4e2a\u4f4d\u7f6e\u589e\u52a0 {% csrf_token %} \u5728\u6a21\u677f\u4e2d\u589e\u52a0\u4e86 {% csrf_token %} \u540e\uff0c\u524d\u7aef\u6a21\u677f\u4e2d\u4f1a\u751f\u6210\u4e00\u4e2ainput\u6807\u7b7e\u3002\u5c31\u662f\u4e0b\u9762\u8fd9\u6837 html <input type=\"hidden\" name=\"csrfmiddlewaretoken\" value=\"YcT8OPwJxCzwyspr0zDeoU6jSBv65EbhT5oBf2LMV603Qs2joTROB6YIlHvV6E4K\"> \u5728ajax post\u8bf7\u6c42\u4e2d\u63d0\u4ea4\u53c2\u6570\u65f6\uff0c\u9700\u8981\u5c06csrf\u7684\u952e\u548c\u503c\u4e5f\u63d0\u4ea4\u7ed9\u670d\u52a1\u5668\u3002 \u628a\u968f\u673a\u5b57\u7b26\u4e32\u8bbe\u7f6e\u5230\u8bf7\u6c42\u5934\u91cc\u3002jquery\u793a\u4f8b\u3002 js var csrftoken = $('input[name=csrfmiddlewaretoken]').attr('value'); xhr.setRequestHeader(\"X-CSRFtoken\", csrftoken); \u5168\u5c40\u5f00\u542f\u4e86\uff0c\u600e\u4e48\u8ba9\u5355\u4e2a\u89c6\u56fe\u51fd\u6570\u4e0d\u5f00\u542fcsrf\u4fdd\u62a4\u5462\uff1f \u88c5\u9970\u5668 # \u5173\u95edcsrf\u4fdd\u62a4 from django.views.decorators.csrf import csrf_exempt # \u5f00\u542fcsrf\u4fdd\u62a4 from django.views.decorators.csrf import csrf_protect FBV \u200b \u53ea\u9700\u8981\u5728\u9700\u8981\u5f00\u542f/\u5173\u95ed\u7684\u51fd\u6570\u4e0a\u4f7f\u7528\u88c5\u9970\u5668\u3002 CBV \u200b \u9700\u8981\u501f\u52a9 method_decorator \u88c5\u9970\u5668 from django.utils.decorators import method_decorator \u65b9\u5f0f\u4e00\uff1a\u5728dispatch\u65b9\u6cd5\u4e0a\u4f7f\u7528\u88c5\u9970\u5668 ```python from django.views.decorators.csrf import csrf_exempt, csrf_protect from django.utils.decorators import method_decorator class StutentsView(View): method_descrator(csrf_exempt) def dispatch(csrf_exempt): return super(StudentsView, self).dispatch(request, args, *kwargs) def get(self, request, *args, **kwargs): return HttpResponse('GET') ``` \u65b9\u5f0f\u4e8c\uff1a\u5728\u7c7b\u4e0a\u4f7f\u7528\u88c5\u9970\u5668 ```python from django.views.decorators.csrf import csrf_exempt, csrf_protect from django.utils.decorators import method_decorator @method_decorator(csrf_exempt, name=\"dispatch\") class StutentsView(View): def get(self, request, args, *kwargs): return HttpResponse('GET') ```","title":"CBV\u4e2d\u89e3\u51b3csrf\u8ba4\u8bc1\u7684\u95ee\u9898"},{"location":"drf/2.CBV\u4e2d\u89e3\u51b3csrf\u8ba4\u8bc1\u7684\u95ee\u9898/#cbvcsrf","text":"","title":"CBV\u4e2d\u89e3\u51b3csrf\u8ba4\u8bc1\u7684\u95ee\u9898"},{"location":"drf/2.CBV\u4e2d\u89e3\u51b3csrf\u8ba4\u8bc1\u7684\u95ee\u9898/#csrfcross-site-request-forgery","text":"\u5177\u4f53\u662f\u5229\u7528\u4ec0\u4e48\u653b\u51fb\u7684\u53ef\u4ee5\u770b\u770b\u767e\u5ea6\u767e\u79d1\uff1a csrf\u767e\u79d1 \u9632\u5fa1\uff1a \u670d\u52a1\u5668\u7ed9\u5ba2\u6237\u7aef\u53d1\u9001\u4e00\u4e2a\u968f\u673a\u7684\u5b57\u7b26\u4e32\uff0c\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u4ea4\u4e92\u7684\u65f6\u5019\u9700\u8981\u5e26\u4e0a\u8fd9\u4e2a\u5b57\u7b26\u4e32\uff0c\u5426\u5219\u5c31\u662f\u8fdd\u6cd5\u7684\u7528\u6237\uff0c\u56e0\u4e3a\u6bcf\u6b21\u5b57\u7b26\u4e32\u90fd\u662f\u968f\u673a\u7684\uff0c\u4ece\u800c\u907f\u514d\u4e86\u9ed1\u5ba2\u5229\u7528\u7684\u98ce\u9669\u3002","title":"CSRF\uff08cross site request  forgery\uff09\u8de8\u7ad9\u8bf7\u6c42\u4f2a\u9020"},{"location":"drf/2.CBV\u4e2d\u89e3\u51b3csrf\u8ba4\u8bc1\u7684\u95ee\u9898/#djangocsrf","text":"django\u9ed8\u8ba4\u5168\u5c40\u5f00\u542fcsrf\u8ba4\u8bc1\uff0c\u53ea\u8981\u662fpost\u8bf7\u6c42\u5c31\u5fc5\u987b\u5e26\u4e0acsrf\u7684\u5b57\u7b26\u4e32\u3002 \u5728 setting.py \u4e2d\u8bbe\u7f6e\u4e2d\u95f4\u4ef6\u3002 django.middleware.csrf.CsrfViewMiddleware MIDDLEWARE = [ 'django.middleware.security.SecurityMiddleware', 'django.contrib.sessions.middleware.SessionMiddleware', 'django.middleware.common.CommonMiddleware', 'django.middleware.csrf.CsrfViewMiddleware', # \u5168\u5c40\u5f00\u542f 'django.contrib.auth.middleware.AuthenticationMiddleware', 'django.contrib.messages.middleware.MessageMiddleware', 'django.middleware.clickjacking.XFrameOptionsMiddleware', ] \u4e5f\u53ef\u4ee5\u628a\u4e2d\u95f4\u4ef6\u6ce8\u91ca\u6389\uff0c\u5c31\u5168\u5c40\u5173\u95ed\u4e86\uff0c\u4f46\u662f\u5b58\u5728\u88ab\u5229\u7528\u6f0f\u6d1e\u7684\u98ce\u9669\u3002","title":"django\u662f\u9632\u5fa1csrf\u7684\uff1f"},{"location":"drf/2.CBV\u4e2d\u89e3\u51b3csrf\u8ba4\u8bc1\u7684\u95ee\u9898/#csrfpost","text":"","title":"\u5f00\u542fcsrf\u9a8c\u8bc1\u53d1\u9001post\u672a\u5e26\u968f\u673a\u5b57\u7b26\u4e32"},{"location":"drf/2.CBV\u4e2d\u89e3\u51b3csrf\u8ba4\u8bc1\u7684\u95ee\u9898/#ajaxpost","text":"\u5728\u7f51\u9875\u4e2d\u4efb\u610f\u4e00\u4e2a\u4f4d\u7f6e\u589e\u52a0 {% csrf_token %} \u5728\u6a21\u677f\u4e2d\u589e\u52a0\u4e86 {% csrf_token %} \u540e\uff0c\u524d\u7aef\u6a21\u677f\u4e2d\u4f1a\u751f\u6210\u4e00\u4e2ainput\u6807\u7b7e\u3002\u5c31\u662f\u4e0b\u9762\u8fd9\u6837 html <input type=\"hidden\" name=\"csrfmiddlewaretoken\" value=\"YcT8OPwJxCzwyspr0zDeoU6jSBv65EbhT5oBf2LMV603Qs2joTROB6YIlHvV6E4K\"> \u5728ajax post\u8bf7\u6c42\u4e2d\u63d0\u4ea4\u53c2\u6570\u65f6\uff0c\u9700\u8981\u5c06csrf\u7684\u952e\u548c\u503c\u4e5f\u63d0\u4ea4\u7ed9\u670d\u52a1\u5668\u3002 \u628a\u968f\u673a\u5b57\u7b26\u4e32\u8bbe\u7f6e\u5230\u8bf7\u6c42\u5934\u91cc\u3002jquery\u793a\u4f8b\u3002 js var csrftoken = $('input[name=csrfmiddlewaretoken]').attr('value'); xhr.setRequestHeader(\"X-CSRFtoken\", csrftoken);","title":"ajax\u63d0\u4ea4post\u8bf7\u6c42"},{"location":"drf/2.CBV\u4e2d\u89e3\u51b3csrf\u8ba4\u8bc1\u7684\u95ee\u9898/#csrf","text":"","title":"\u5168\u5c40\u5f00\u542f\u4e86\uff0c\u600e\u4e48\u8ba9\u5355\u4e2a\u89c6\u56fe\u51fd\u6570\u4e0d\u5f00\u542fcsrf\u4fdd\u62a4\u5462\uff1f"},{"location":"drf/2.CBV\u4e2d\u89e3\u51b3csrf\u8ba4\u8bc1\u7684\u95ee\u9898/#_1","text":"# \u5173\u95edcsrf\u4fdd\u62a4 from django.views.decorators.csrf import csrf_exempt # \u5f00\u542fcsrf\u4fdd\u62a4 from django.views.decorators.csrf import csrf_protect","title":"\u88c5\u9970\u5668"},{"location":"drf/2.CBV\u4e2d\u89e3\u51b3csrf\u8ba4\u8bc1\u7684\u95ee\u9898/#fbv","text":"\u200b \u53ea\u9700\u8981\u5728\u9700\u8981\u5f00\u542f/\u5173\u95ed\u7684\u51fd\u6570\u4e0a\u4f7f\u7528\u88c5\u9970\u5668\u3002","title":"FBV"},{"location":"drf/2.CBV\u4e2d\u89e3\u51b3csrf\u8ba4\u8bc1\u7684\u95ee\u9898/#cbv","text":"\u200b \u9700\u8981\u501f\u52a9 method_decorator \u88c5\u9970\u5668 from django.utils.decorators import method_decorator \u65b9\u5f0f\u4e00\uff1a\u5728dispatch\u65b9\u6cd5\u4e0a\u4f7f\u7528\u88c5\u9970\u5668 ```python from django.views.decorators.csrf import csrf_exempt, csrf_protect from django.utils.decorators import method_decorator class StutentsView(View): method_descrator(csrf_exempt) def dispatch(csrf_exempt): return super(StudentsView, self).dispatch(request, args, *kwargs) def get(self, request, *args, **kwargs): return HttpResponse('GET') ``` \u65b9\u5f0f\u4e8c\uff1a\u5728\u7c7b\u4e0a\u4f7f\u7528\u88c5\u9970\u5668 ```python from django.views.decorators.csrf import csrf_exempt, csrf_protect from django.utils.decorators import method_decorator @method_decorator(csrf_exempt, name=\"dispatch\") class StutentsView(View): def get(self, request, args, *kwargs): return HttpResponse('GET') ```","title":"CBV"}]}